//tealium universal tag - utag.205 ut4.0.202404021445, Copyright 2024 Tealium.com Inc. All Rights Reserved.
try{(function(id,loader){var u={"id":id};utag.o[loader].sender[id]=u;u.ev={"view":1,"link":1};u.map={"ga4MeasurementID":"measurement_id","ut.event:view":"page_view","ga4DynamicEvents":"dynamic_event_trigger","logged_in_user_id":"config.user_id,set.user_properties.logged_in_user_id","basicCustomerBrand":"config.customer_brand","ga4PlatformEnvironment":"config.platform_environment","cs_matching_key":"config.cs_matching_key","ut.profile":"config.tealium_profile","ut.env":"config.tealium_environment","ut.version":"config.tealium_version","basicLoggedIn":"all_events.user_login_status_ep","basicPageName":"all_events.page_title","dom.title":"all_events.web_page_title","basicPageType":"all_events.content_group","basicPreviousPageName":"all_events.page_previous_name","basicPreviousPageURL":"all_events.page_previous_url","basicBreadcrumb":"all_events.breadcrumb","basicBreadcrumbLevel1":"all_events.breadcrumb_level_1","basicBreadcrumbLevel2":"all_events.breadcrumb_level_2","basicBreadcrumbLevel3":"all_events.breadcrumb_level_3","basicBreadcrumbLevel4":"all_events.breadcrumb_level_4","basicBreadcrumbLevel5":"all_events.breadcrumb_level_5","basicBreadcrumbLevel6":"all_events.breadcrumb_level_6","basketId":"all_events.basket_id","basicStoreSelected":"page_view.store_name,view_item.store_name,add_to_cart.store_name,view_cart.store_name,begin_checkout.store_name,add_payment_info.store_name,add_shipping_info.store_name,purchase.store_name,view_item_list.store_name,select_item.store_name,remove_from_cart.store_name,appointment_booking_interactions.store_name,error_events.store_name,change_delivery_date.store_name,view_fulfilment.store_name,view_delivery.store_name,view_payment.store_name,view_payment_review.store_name","basicStoreId":"page_view.store_id,view_item.store_id,add_to_cart.store_id,view_cart.store_id,begin_checkout.store_id,add_payment_info.store_id,add_shipping_info.store_id,purchase.store_id,view_item_list.store_id,select_item.store_id,remove_from_cart.store_id,change_delivery_date.store_id,view_fulfilment.store_id,view_delivery.store_id,view_payment.store_id,view_payment_review.store_id","categoryIdPage":"page_view.category_id","categoryName":"page_view.category_name","categoryParentName":"page_view.category_parent_name","categoryParentId":"page_view.category_parent_id","categoryTrail":"page_view.category_trail","listerPage":"page_view.lister_page_number","icamp_fragment":"page_view.icamp_fragment","prodColor":"product_variant,product_colour","prodPriceIncVat":"product_unit_price","prodMerchant":"product_affiliation,product_merchant_name_marketplace","samCurrency":"order_currency","prodMixedPaint":"product_mixed_paint_used","prodMixedPaintColourCode":"product_mixed_colour_code","prodMixedPaintColourName":"product_mixed_colour_name","prodSocialProofing":"product_social_proofing","prodRating":"product_rating","prodReviews":"product_reviews","prodOfferId":"product_offer_id_marketplace","prodType":"product_type_marketplace","prodBasketId":"product_basket_id","basicPDPType":"product_pdp_type","prodImage":"product_image_url","prodAvailabilityCc":"product_sku_availability_cc","prodAvailabilityDelivery":"product_sku_availability_delivery","prodNumberOfImages":"product_pdp_no_of_images","prodTypeOfImages":"product_pdp_type_of_images","prodCategoryId":"product_category_id","prodListNameArr":"product_item_list_name","prodList":"product_item_list_name","prodListPosition":"product_index","prodPosition":"product_index","prodFulfillmentType":"product_fulfillment_type","_sm_205_59":"view_item.e_product_offer_id_marketplace,add_to_cart.e_product_offer_id_marketplace,view_cart.e_product_offer_id_marketplace,begin_checkout.e_product_offer_id_marketplace,add_payment_info.e_product_offer_id_marketplace,add_shipping_info.e_product_offer_id_marketplace,purchase.e_product_offer_id_marketplace,remove_from_cart.e_product_offer_id_marketplace,add_to_wishlist.e_product_offer_id_marketplace,select_item.e_product_offer_id_marketplace,change_delivery_date.e_product_offer_id_marketplace,view_fulfilment.e_product_offer_id_marketplace,view_delivery.e_product_offer_id_marketplace,view_payment.e_product_offer_id_marketplace,view_payment_review.e_product_offer_id_marketplace","_sm_205_60":"view_item.e_product_type_marketplace,add_to_cart.e_product_type_marketplace,view_cart.e_product_type_marketplace,begin_checkout.e_product_type_marketplace,add_payment_info.e_product_type_marketplace,add_shipping_info.e_product_type_marketplace,purchase.e_product_type_marketplace,remove_from_cart.e_product_type_marketplace,add_to_wishlist.e_product_type_marketplace,select_item.e_product_type_marketplace,change_delivery_date.e_product_type_marketplace,view_fulfilment.e_product_type_marketplace,view_delivery.e_product_type_marketplace,view_payment.e_product_type_marketplace,view_payment_review.e_product_type_marketplace","_sm_205_61":"view_item.e_product_merchant_name_marketplace,add_to_cart.e_product_merchant_name_marketplace,view_cart.e_product_merchant_name_marketplace,begin_checkout.e_product_merchant_name_marketplace,add_payment_info.e_product_merchant_name_marketplace,add_shipping_info.e_product_merchant_name_marketplace,purchase.e_product_merchant_name_marketplace,remove_from_cart.e_product_merchant_name_marketplace,add_to_wishlist.e_product_merchant_name_marketplace,select_item.e_product_merchant_name_marketplace,change_delivery_date.e_product_merchant_name_marketplace,view_fulfilment.e_product_merchant_name_marketplace,view_delivery.e_product_merchant_name_marketplace,view_payment.e_product_merchant_name_marketplace,view_payment_review.e_product_merchant_name_marketplace","_sm_205_62":"view_item.e_product_rating,add_to_cart.e_product_rating,add_to_wishlist.e_product_rating","_sm_205_63":"view_item.e_product_reviews,add_to_cart.e_product_reviews,add_to_wishlist.e_product_reviews","prodDeliveryMessage":"view_item.delivery_message,general_user_interactions.delivery_message,general_user_interactions.interaction_details","prodCcMessage":"view_item.cc_message","prodStoreNotAvMessage":"view_item.unavailable_store","prodNotAvailableMessage":"view_item.product_unavailable","productCount":"view_item.lister_product_count,begin_checkout.lister_product_count,view_item_list.total_no_of_returned_results,select_item.total_no_of_returned_results,view_fulfilment.lister_product_count,view_delivery.lister_product_count,view_payment.lister_product_count,view_payment_review.lister_product_count","prodListName":"add_to_cart.interaction_location,remove_from_cart.interaction_location,add_to_wishlist.interaction_location,select_item.interaction_location","_sm_205_70":"login.method,sign_up.method","eventLabel":"sign_up.interaction_location","_sm_205_72":"sign_up.interaction_description","_sm_205_73":"login.logins,sign_up.registrations","transactionPaymentType":"add_payment_info.payment_type,purchase.payment_type","_sm_205_75":"add_shipping_info.shipping_tier","transactionFullfilmentType":"purchase.transaction_fulfillment_type,purchase.shipping_tier","transactionDiscountNameOrder":"purchase.transaction_discount_code_order","transactionDiscountAmount":"purchase.discount_amount","transactionTotalDiscountIncVat":"purchase.transaction_total_discount_inc_vat","transactionTax":"order_tax","productDisplayCount":"view_item_list.no_of_items_displayed,select_item.no_of_items_displayed","prodDisplayCount":"view_item_list.no_of_items_displayed,select_item.no_of_items_displayed","list_product_type_display_count":"view_item_list.split_1p_vs_3p,select_item.split_1p_vs_3p","interactionDescription":"remove_from_cart.interaction_description,general_user_interactions.interaction_description","menuFormat":"menu_interactions.menu_format","menuHierarchy":"menu_interactions.menu_hierarchy","menuItemName":"menu_interactions.menu_item_name","eventName":"menu_interactions.menu_action","linkURL":"menu_interactions.link_url","searchTerm":"search.search_term","searchCount":"search.total_no_of_returned_results","searchType":"search.search_type","searchFor":"search.search_for","searchCategory":"search.search_category","tmsAction":"appointment_booking_interactions.interaction_description","tmsLabel":"appointment_booking_interactions.interaction_details","interactionLocation":"general_user_interactions.interaction_location","pfsEANList":"error_events.e_product_id","postcode_on_entry":"page_view.postcode_on_entry","store_selected_on_entry":"page_view.store_selected_on_entry","postcode_for_fulfilment":"all_events.postcode_for_fulfilment","1pCheckout":"all_events.v3Checkout","patchEan":"error_events.e_product_id","transactionStatus":"purchase.transaction_status","transactionDiscountCodeOrder":"order_coupon_code","findability_element":"findability_interaction.findability_element","interactionDetails":"general_user_interactions.interaction_details","transactionCouponCode":"purchase.order_voucher_code","linkClickCategory":"external_link_click.linkClickCategory","linkClickText":"external_link_click.linkClickText","linkClickUrl":"external_link_click.linkClickUrl","productHomeDeliveryMessage":"view_item.product_home_delivery_message","productClickCollectMessage":"view_item.product_click_collect_message","productFindInStoreMessage":"view_item.product_find_in_store_message","hello_casto_referral":"page_view.hello_casto_referral,view_item.hello_casto_referral","prodEanList":"add_to_cart.e_product_id,remove_from_cart.e_product_id,view_cart.e_product_id,begin_checkout.e_product_id,purchase.e_product_id,add_to_wishlist.e_product_id,select_item.e_product_id,view_item.e_product_id,view_fulfilment.e_product_id,view_delivery.e_product_id,view_payment.e_product_id,view_payment_review.e_product_id,change_delivery_date.e_product_id,general_user_interactions.e_product_id","facetRefinementTrail":"page_view.facet_refinement_trail,view_item_list.facet_refinement_trail","original_delivery_days":"all_events.original_delivery_days","selected_delivery_days":"all_events.selected_delivery_days","is_original_delivery_days":"all_events.is_original_delivery_days","has_changed_delivery_date":"all_events.has_changed_delivery_date","checkout_product_list":"all_events.e_product_id","product_page_ean":"page_view.e_product_id","nmgState":"all_events.nmgState","prodCategory1":"product_subcategory,view_item.prodCategory1,add_to_cart.prodCategory1,remove_from_cart.prodCategory1,purchase.prodCategory1","prodCategory2":"product_addcategory3","prodCategory3":"product_addcategory4","prodCategory4":"product_addcategory5","selectedDeliveryDays":"product_selected_delivery_days","originalDeliveryDays":"product_original_delivery_days","isOriginalDeliveryDate":"product_is_original_delivery_days","facetLastRefinement":"view_item_list.facet_last_refinement","facetLastRefinementValue":"view_item_list.facet_last_refinement_value","facetNumberRefinements":"view_item_list.facet_number_refinements","tealium_timestamp_epoch":"all_events.tealium_timestamp_epoch","appMFlag":"all_events.appm_flag","errorType":"error_events.error_type","errorMessage":"error_events.error_message","errorDetails":"error_events.error_details","client_id":"set.user_properties.client_id","tealium_visitor_id":"set.user_properties.tealium_visitor_id","customerStatus":"set.user_properties.customer_status","assigned_user_id":"set.user_properties.assigned_user_id","projectCount":"all_events.project_count","bazaarvoice_loaded":"all_events.bazaarvoice_loaded","contactSellerName":"contact_seller_interactions.contactSellerName","contactSellerOrderNumber":"contact_seller_interactions.contactSellerOrderNumber","contactSellerReason":"contact_seller_interactions.contactSellerReason"};u.extend=[function(a,b){try{b['_sm_205_59']=(b.prodOfferId||[]).join("|");}catch(e){utag.DB(e);}
try{b['_sm_205_60']=(b.prodType||[]).join("|");}catch(e){utag.DB(e);}
try{b['_sm_205_61']=(b.prodMerchant||[]).join("|");}catch(e){utag.DB(e);}
try{b['_sm_205_62']=(b.prodRating||[]).join("|");}catch(e){utag.DB(e);}
try{b['_sm_205_63']=(b.prodReviews||[]).join("|");}catch(e){utag.DB(e);}
try{b['_sm_205_70']="email";}catch(e){utag.DB(e);}
try{b['_sm_205_72']=(b.marketing_preferences||[]).join("|");}catch(e){utag.DB(e);}
try{b['_sm_205_73']=1;}catch(e){utag.DB(e);}
try{b['_sm_205_75']=(b.prodFulfillmentType||[]).join("|");}catch(e){utag.DB(e);}},function(a,b){try{if(1){var is_category_page=window.location.pathname.split("?")[0].endsWith(".cat");var is_category_landing_page=Boolean(window.location.pathname.split("?")[0].startsWith("/landingpage")&&b["tmsAction"]);var is_search_page=Boolean(window.location.pathname.split("?")[0].endsWith("/search")&&b["tmsAction"]);if(b["eventName"]&&b["eventName"]==="bannerOrTileClick"&&(is_category_page||is_category_landing_page||is_search_page)){var is_lister_page=Boolean(document.querySelector("[data-test-id='category-bread-crumb']"));var findability_element={tmsAction:{"Brand Tile":"featured_brand","Category Tile":is_lister_page?"shop_by_type":is_search_page?"popular_searches":"category_tile","Content Article":"ideas_and_advice","CTA":b["tmsLabel"]&&b["tmsLabel"].match(/^view all/gi)?"view_all_cta":"other_cta","Editorial Tile":is_lister_page||is_search_page?"editorial_tile":"ideas_and_advice","Image":b["tmsLabel"]&&b["tmsLabel"].match(/colour$/gi)?"popular_colour":"image_tile","USP Tile":"usp_tile","Visual Facet":"shop_by_type",}}
if(findability_element["tmsAction"][b["tmsAction"]]){var element_type=findability_element["tmsAction"][b["tmsAction"]]
b["findability_element"]=element_type;}}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){(function(){function callback(){if(!disableCallback){disableCallback=true;if(window.CS_CONF){CS_CONF.integrations=CS_CONF.integrations||[];CS_CONF.integrations.push("Google Analytics");}}}
var disableCallback=false;window._uxa=window._uxa||[];_uxa.push(["afterPageView",callback]);if(b["cp._cs_mk"]&&b["cp._cs_id"]){b.cs_matching_key=b["cp._cs_mk"];return;}
function init(cookieValue){var cmk=Math.random()+"_"+Date.now();if(cookieValue){cmk=cookieValue;}
b.cs_matching_key=cmk;var now=new Date();var time=now.getTime();time+=30*60*1000;now.setTime(time);document.cookie="_cs_mk="+cmk+"; expires="+now.toUTCString()+";path=/;domain=."+utag.cfg.domain;_uxa.push(["trackDynamicVariable",{key:"csMatchingKey",value:cmk}]);}
if(!b["cp._cs_mk"]){init();}else{var getCookieValue=b["cp._cs_mk"];init(getCookieValue);}})();}}catch(e){utag.DB(e)}},function(a,b){try{if(1){b["ga4PlatformEnvironment"]=b["ut.env"]&&b["ut.env"]==="prod"?"production":"staging";var ga4_measurement_id={"b-and-q-ie-wapp":b["ut.env"]&&b["ut.env"]==="prod"?"G-L007M7EVDH":"G-37ZD52CP52","b-and-q-wapp":b["ut.env"]&&b["ut.env"]==="prod"?"G-HR6D4YXJ7D":"G-8CD23NE4ZD","castofr-wapp":b["ut.env"]&&b["ut.env"]==="prod"?"G-M34GBDF7HX":"G-DP5FSXYTTR","castopl-wapp":b["ut.env"]&&b["ut.env"]==="prod"?"G-8WCT35PLCE":"G-BF3FESJ14Q","tradepoint-wapp":b["ut.env"]&&b["ut.env"]==="prod"?"G-PJXZWQ919J":"G-WVSXL61J2B",}
if(b["ut.profile"]&&ga4_measurement_id[b["ut.profile"]]){b["ga4MeasurementID"]=ga4_measurement_id[b["ut.profile"]];}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){if(b["pfsEAN"]){b["pfsEANList"]=b.pfsEAN.replace(/\d+/g,'ean:$&');}
if(b["cantAddToBasketEan"]){var ean_array=b["cantAddToBasketEan"].split("|").map(function(ean){return"ean:"+ean;});b["cantAddToBasketEan"]=ean_array.join("|");}
if(b["eventName"]&&b["eventName"]==="cantAddToBasket"){b["eventName"]="add_to_basket_error";}
var error_details_property=b["errorDetails"]||b["pfsEANList"]||b["pfsErrorSelection"]||b["patchEan"]||b["patchSelection"]||b["cantAddToBasketEan"];var error_message_property=b["errorMessage"]||b["pfsErrorName"]||b["patchError"];if(error_details_property){b["errorDetails"]=error_details_property;}
if(error_message_property){b["errorMessage"]=error_message_property;}
var error_event_name={"PFSErrorModal":true,"PFSErrorSelection":true,"PATCH_BASKET_ERROR_MODAL":true,"PATCH_STORE_ERROR_MODAL":true,"PATCH_BASKET_SELECTION":true,"PATCH_STORE_SELECTION":true,"add_to_basket_error":true,}
var discount_error={"Voucher Error Invalid Code":true,"Ecrebo Error Code Already Used":true,"Ecrebo Error Code Expired":true,"Ecrebo Error Offline":true,"Ecrebo Error Invalid Code":true,"customer loyalty card Offline Error":true,"customer loyalty card Invalid Code":true,"Staff discount Offline Error":true,"Staff discount Invalid Error":true,}
if(discount_error[b["eventName"]]){b["errorType"]="discount_error";b["errorDetails"]=b["eventName"];b["isErrorEvent"]="true";b["event"]="errorTracking";}
if(error_event_name[b["eventName"]]){b["isErrorEvent"]="true";b["errorType"]=b["eventName"];b["event"]="errorTracking";}}}catch(e){utag.DB(e)}},function(a,b){try{if(1){var evName=b.eventName||b.event||b.eventAction,pgType=b.basicPageType;if(b["1pCheckout"]&&b["basicPageTitle"]&&b["basicPageTitle"]==="Checkout Delivery Page"){b["checkout_start"]="true";}
if(!b["1pCheckout"]&&b["basicPageTitle"]&&b["basicPageTitle"]==="Checkout Details Page"){b["checkout_start"]="true";}
b.ga4DynamicEvents=(function(){if(a==="view"&&pgType){switch(pgType){case"Product":return(b.prodEan||b.prodSku)?"view_item":undefined;case"Category Lister Page":case"Lister":return"view_item_list";case"Search Results":return"search,view_item_list";case"Store Finder":return(b.basicPageName||"").indexOf("_Results")!==-1?"search":undefined;case"Basket":return"view_cart";case"Checkout":switch(b.checkout_start){case"true":return"begin_checkout";}
switch(b.checkoutStep){case"Fulfilment Step 1":return"view_fulfilment";case 2:return"view_delivery";case 3:return"view_payment";case 4:return"view_payment_review";}}}else if(a==="link"&&evName&&!b["isErrorEvent"]){switch(evName){case"add":return"add_to_cart";case"remove":return"remove_from_cart";case"Registered Success not Active":case"registrationNewAccount":case"Creation":return(evName==="Creation"&&b.tealium_event!=="user_register")?undefined:"sign_up";case"signInExistingAccount":return"login";case"fulfilmentPageSelection":return"add_shipping_info";case"proceedWithOptile":case"proceedWithPayment":return"add_payment_info";case"bannerOrTileClick":return b["findability_element"]?"findability_interaction":(b.tmsLabel=="Qr code hello casto"?"general_user_interactions":undefined);case"orderSubmissionResultSuccess":return b["tealium_profile"]&&b["tealium_profile"]==="castopl-wapp"&&!b["transactionId"]?"link_to_payment_provider":undefined;case"wishlistEvent":return(b.wishlistAction||"").indexOf("Add item")===0?"add_to_wishlist":undefined;case"view_item_list":return evName;case"select_item":return"select_item";case"Menu Usage":case"Menu Category Navigation":case"Menu Open":case"Menu Back":return"menu_interactions";case"change_postcode":case"change_store":return b["basicPageType"]&&b["basicPageType"]==="Home"&&b["tealium_profile"]==="castofr-wapp"?evName:undefined;case"appointBookSource":case"appointBookProdCat":case"appointBookStoreName":case"appointBookDateTime":case"appointBookDetails":case"appointbookConfirm":return"appointment_booking_interactions";case"add_address":case"modify_address":case"find_an_address":case"manual_address_entry":case"Search Box Click":case"hello_casto_interaction":return"general_user_interactions";case"postcodeInteraction":return"general_user_interactions,view_item";case"external_link_click":return"external_link_click";case"changeDeliveryDateContinue":return"change_delivery_date";case"companyDetailsSubmitted":return"submitted_proof_of_trade";case"contactSellerCTAClick":case"contactSellerMessageSent":case"requestAReturnCTAClick":return"contact_seller_interactions";}}
else if(a==="link"&&b["isErrorEvent"]==="true"){return"error_events";}
else if(a==="link"&&!evName&&pgType==="Product"&&(b.prodEan||b.prodSku)){return"view_item";}})();}}catch(e){utag.DB(e)}},function(a,b){try{if(1){if(typeof b.basicBreadcrumb==="string"){var i=0,breadArr=b.basicBreadcrumb.split(">");while(i<6){if(!breadArr[i])break;b["basicBreadcrumbLevel"+(i+1)]=breadArr[i].trim();i++;}}
if(typeof b.searchTerm==="string"){b.searchTerm=b.searchTerm.toLowerCase().trim();}
if(!b.basicStoreSelected&&window.utag.data.basicStoreSelected){b.basicStoreSelected=window.utag.data.basicStoreSelected;}
if(Array.isArray(b.prodSku)){var convParams=["basketId","socialProofing","prodListName","mixedPaint","mixedPaintColourCode","mixedPaintColourName"];for(var y=0;y<convParams.length;y++){var tmpParam="prod"+convParams[y][0].toUpperCase()+convParams[y].slice(1);if(convParams[y]==="prodListName")tmpParam="prodListNameArr";if(Array.isArray(b[convParams[y]])){b[tmpParam]=b[convParams[y]];continue;}
b[tmpParam]=b[tmpParam]||[];for(var i=0;i<b.prodSku.length;i++){b[tmpParam].push(b[convParams[y]]);}}}
if(b.ga4DynamicEvents==="select_item"){var ecoMap={prodName:"_cprodname",prodEan:"_cprod",prodCategory:"_ccat",};for(var prop in b){if(prop.indexOf("prod")===0&&!Array.isArray(b[prop])){b[prop]=[b[prop]];if(ecoMap[prop])b[ecoMap[prop]]=b[prop];}}}
if(b.eventName==="appointBookStoreName"){b.basicStoreSelected=b.basicStoreSelected||b.tmsLabel;}
if(b.eventName==="postcodeInteraction"){b.interactionLocation="pdp";b.interactionDescription=b.pCodeBoxPDP?"post_code_entered":"post_code_changed";}
if(b.eventAction==="Search Box Click"){b.interactionDescription="search_box_click";}
if(b.eventName==="bannerOrTileClick"&&b.tmsLabel==="Qr code hello casto"){b.interactionDescription=b.tmsAction;b.interactionDetails=b.tmsLabel;}
if(b["transactionId"]){b.transactionTax=+(b.transactionTotalDiscountIncVat||0)-+(b.transactionTotalDiscountExVat||0);if(a==="link"){if(b["tealium_profile"]&&b["tealium_profile"]!=="castopl-wapp"||b["tealium_profile"]&&b["tealium_profile"]==="castopl-wapp"&&b["event"]!=="orderSubmissionResultSuccess"){delete b.transactionId;b._corder="";}
else{sessionStorage.setItem("last_transaction_id",b["transactionId"])}}
else{if(b["tealium_profile"]&&b["tealium_profile"]==="castopl-wapp"&&sessionStorage.getItem("last_transaction_id")&&sessionStorage.getItem("last_transaction_id")===b["transactionId"]){delete b.transactionId;b._corder="";}}}
var prods1p=b.productDisplayCount1p||b.prodDisplayCount1p,prods3p=b.productDisplayCount3p||b.prodDisplayCount3p;if(prods1p&&prods3p){b.list_product_type_display_count="1p: "+prods1p+" | 3p: "+prods3p;}
if(Array.isArray(b.prodRating)){b.prodRating=b.prodRating.map(function(rating){var tmpRating=parseFloat(rating);return!tmpRating?"":tmpRating;});}
if(Array.isArray(b.prodReviews)){b.prodReviews=b.prodReviews.map(function(reviews){return!parseFloat(reviews)?"":reviews;});}
if(!b["prodColor"]&&b["prodColour"]){b["prodColor"]=b["prodColour"];}
if(Array.isArray(b.prodEan)){b['prodEanList']=[];for(var i=0;i<b.prodEan.length;i++){b.prodEanList[i]='ean:'+b.prodEan[i];}
b['prodEanList']=b['prodEanList'].join("|");if(a==="view"&&b["prodEanList"]&&b["basicPageType"]&&b["basicPageType"]==="Product"){b["product_page_ean"]=b["prodEanList"];}
if(b["prodEanList"]&&b["basicPageType"]&&b["basicPageType"]==="Checkout"){b["checkout_product_list"]=b["prodEanList"];}}
var all_equal=function(a){return a.every(function(v){return v===a[0];});};if(Array.isArray(b["originalDeliveryDays"])&&Array.isArray(b["selectedDeliveryDays"])&&Array.isArray(b["isOriginalDeliveryDate"])){if(b["originalDeliveryDays"].length>0){var is_same_original_delivery_date=all_equal(b["originalDeliveryDays"]);var is_same_selected_delivery_date=all_equal(b["selectedDeliveryDays"]);var is_same_original_delivery_days=all_equal(b["isOriginalDeliveryDate"]);b["original_delivery_days"]=is_same_original_delivery_date&&is_same_selected_delivery_date?b["originalDeliveryDays"][0]:b["originalDeliveryDays"].join("|");b["selected_delivery_days"]=is_same_selected_delivery_date?b["selectedDeliveryDays"][0]:b["selectedDeliveryDays"].join("|");b["is_original_delivery_days"]=is_same_original_delivery_days?b["isOriginalDeliveryDate"][0]:b["isOriginalDeliveryDate"].join("|");b["has_changed_delivery_date"]=b["isOriginalDeliveryDate"].includes("false")?"yes":"no";}}
if(Array.isArray(b["prodTypeOfImages"])){var primary_image_type="main:"+b["prodTypeOfImages"][0]+"|";var type_counts={};b["prodTypeOfImages"].forEach(function(image_type){type_counts[image_type]=(type_counts[image_type]||0)+1;});var all_image_types=Object.entries(type_counts)
.sort(function(a,b){return a[0].localeCompare(b[0]);})
.map(function(entry){return entry[0]+":"+entry[1];})
.join("|");b["prodTypeOfImages"]=[primary_image_type+all_image_types];}
if(b["prodNumberOfImages"]&&!Array.isArray(b["prodNumberOfImages"])){b["prodNumberOfImages"]=[b["prodNumberOfImages"]];}
if(b["cp.abv2-cid"]&&b["cp.abv2-cid"]==="appm"){b["appMFlag"]="true";}else{b["appMFlag"]="false";}
if(typeof b["prodDeliveryMessage"]==="string"&&b["ut.profile"]){var postcode_mapping={"b-and-q-ie-wapp":{regex:/\b[A-Z0-9]{3,4}\s?[A-Z0-9]{4}\b/gi,},"b-and-q-wapp":{regex:/[A-Z]{1,2}[0-9R][0-9A-Z]?[0-9][ABD-HJLNP-UW-Z]{2}/gi,},"castofr-wapp":{regex:/\b\d{5}\b/,},"castopl-wapp":{regex:/\b\d{2}-\d{3}\b/,},"tradepoint-wapp":{regex:/[A-Z]{1,2}[0-9R][0-9A-Z]?[0-9][ABD-HJLNP-UW-Z]{2}/gi,},};var profile=b["ut.profile"];var mapping=postcode_mapping[profile];if(mapping&&b["prodDeliveryMessage"].match(mapping.regex)){var regex=mapping.regex;b["prodDeliveryMessage"]=b["prodDeliveryMessage"].replace(regex,"X");}}}}catch(e){utag.DB(e)}},function(a,b){try{if((typeof b['basicPageName']!='undefined'&&b['basicPageName'].toString().toLowerCase().indexOf('D_DIY_Endeca_Product_Listing_Template'.toLowerCase())>-1)){b['basicPageType']='Category Lister Page'}}catch(e){utag.DB(e);}},function(a,b){try{if(1){if(b["cp._ga"]){b["client_id"]=b["cp._ga"].substring(6)+"."}
if(b["logged_in_user_id"]||b["client_id"]){b["assigned_user_id"]=b["logged_in_user_id"]||b["client_id"];}}}catch(e){utag.DB(e)}}];u.send=function(utag_event,data_layer){if(u.ev[utag_event]||u.ev.all!==undefined){utag.DB("send:205");utag.DB(data_layer);var a,b,c,d,i,j,has_purchase=false,prop;a=utag_event;b=data_layer;u.data={"base_url":"https://www.googletagmanager.com/gtag/js?id=##utag_measurement_id##","measurement_id":"G-12345678M","clear_global_vars":"false","data_layer_name":"tealiumDataLayer","send_page_view":"false","order_id":"","order_total":"","order_subtotal":"","order_shipping":"","order_tax":"","order_store":"","order_currency":"","order_coupon_code":"","product_id":[],"product_name":[],"product_brand":[],"product_category":[],"product_subcategory":[],"product_addcategory3":[],"product_addcategory4":[],"product_addcategory5":[],"product_quantity":[],"product_unit_price":[],"product_discount":[],"product_coupon":[],"product_variant":[],"product_promotion_id":[],"product_promotion_name":[],"product_creative_name":[],"product_creative_slot":[],"product_location_id":[],"product_index":[],"product_item_list_name":[],"product_item_list_id":[],"product_affiliation":[],"product_colour":[],"product_fulfillment_type":[],"product_pdp_no_of_images":[],"product_pdp_type_of_images":[],"product_rating":[],"product_reviews":[],"product_sku_availability_cc":[],"product_sku_availability_delivery":[],"product_mixed_paint_used":[],"product_mixed_colour_code":[],"product_mixed_colour_name":[],"product_social_proofing":[],"product_offer_id_marketplace":[],"product_type_marketplace":[],"product_merchant_name_marketplace":[],"product_basket_id":[],"product_pdp_type":[],"product_image_url":[],"product_category_id":[],"product_sku":[],"product_original_delivery_days":[],"product_selected_delivery_days":[],"product_is_original_delivery_days":[],"event_queue":[],"config":{},"set":{"developer_id.dYmQxMT":true,"user_properties":{}},"dynamic_event_trigger":"","dynamic_event":{},"event":{},"items":[]};for(c=0;c<u.extend.length;c++){try{d=u.extend[c](a,b);if(d==false)return}catch(e){}};utag.DB("send:205:EXTENSIONS");utag.DB(data_layer);for(var mapping_key in utag.loader.GV(u.map)){if(data_layer[mapping_key]!==undefined&&data_layer[mapping_key]!==""){var destinations=u.map[mapping_key].split(",");for(i=0;i<destinations.length;i++){mapFunc(destinations[i].split("."),u.data,data_layer[mapping_key]);}}else{var event_destinations=mapping_key.split(":");if(event_destinations.length===2&&data_layer[event_destinations[0]]===event_destinations[1]){if(u.map[mapping_key]){u.data.event_queue=u.data.event_queue.concat(u.map[mapping_key].split(","));}}}}
utag.DB("send:205:MAPPINGS");utag.DB(u.data);u.data.order_id=u.data.order_id||data_layer._corder||"";u.data.order_total=u.data.order_total||data_layer._ctotal||"";u.data.order_shipping=u.data.order_shipping||data_layer._cship||"";u.data.order_tax=u.data.order_tax||data_layer._ctax||"";u.data.order_store=u.data.order_store||data_layer._cstore||"";u.data.order_currency=u.data.order_currency||data_layer._ccurrency||"";u.data.order_coupon_code=u.data.order_coupon_code||data_layer._cpromo||"";u.data.customer_id=u.data.customer_id||data_layer._ccustid||"";u.data.customer_city=u.data.customer_city||data_layer._ccity||"";u.data.customer_state=u.data.customer_state||data_layer._cstate||"";u.data.customer_zip=u.data.customer_zip||data_layer._czip||"";u.data.customer_country=u.data.customer_country||data_layer._ccountry||"";if(u.data.product_id.length===0&&data_layer._cprod!==undefined){u.data.product_id=data_layer._cprod.slice(0);}
if(u.data.product_sku.length===0&&data_layer._csku!==undefined){u.data.product_sku=data_layer._csku.slice(0);}
if(u.data.product_name.length===0&&data_layer._cprodname!==undefined){u.data.product_name=data_layer._cprodname.slice(0);}
if(u.data.product_brand.length===0&&data_layer._cbrand!==undefined){u.data.product_brand=data_layer._cbrand.slice(0);}
if(u.data.product_category.length===0&&data_layer._ccat!==undefined){u.data.product_category=data_layer._ccat.slice(0);}
if(u.data.product_subcategory.length===0&&data_layer._ccat2!==undefined){u.data.product_subcategory=data_layer._ccat2.slice(0);}
if(u.data.product_quantity.length===0&&data_layer._cquan!==undefined){u.data.product_quantity=data_layer._cquan.slice(0);}
if(u.data.product_unit_price.length===0&&data_layer._cprice!==undefined){u.data.product_unit_price=data_layer._cprice.slice(0);}
if(u.data.product_discount.length===0&&data_layer._cpdisc!==undefined){u.data.product_discount=data_layer._cpdisc.slice(0);}
if(utag.ut.typeOf(u.data.measurement_id)==="string"&&u.data.measurement_id!==""){u.data.measurement_id=u.data.measurement_id.replace(/\s/g,"").split(",");}
if(u.data.data_layer_name){u.data.base_url=u.data.base_url+"&l="+u.data.data_layer_name;}
if(!u.data.measurement_id){utag.DB(u.id+": Tag not fired: Required attribute measurement_id not populated");return;}
if(u.data.gtag_enable_tcf_support){window["gtag_enable_tcf_support"]=toBoolean(u.data.gtag_enable_tcf_support);}
var utmParams=["utm_source","utm_medium","utm_campaign","utm_term","utm_content"];var utmPageLocation=u.data.config.page_location||data_layer["dom.url"];var utmQuery=[];utmParams.forEach(function(paramName){if(u.data[paramName]&&utmPageLocation.indexOf(paramName+"=")===-1){utmQuery.push(paramName+"="+u.data[paramName]);}});if(utmQuery.length){u.data.config.page_location=utmPageLocation.indexOf("?")===-1?utmPageLocation+"?"+utmQuery.join("&"):utmPageLocation+"&"+utmQuery.join("&");}
u.data.event.send_to=u.data.event.send_to||u.data.measurement_id;if(toBoolean(u.data.clear_global_vars)){setGlobalProperties(u.data.config,true);for(prop in utag.loader.GV(u.data.set)){if(prop!=="developer_id.dYmQxMT"){setGlobalProperties(u.data.set,true,prop);}}}
setGlobalProperties(u.data.config,false);setGlobalProperties(u.data.set,false);if(u.data.config.send_page_view!==undefined){u.data.send_page_view=toBoolean(u.data.config.send_page_view);}
if(toBoolean(u.data.send_page_view)&&(utag_event==='view'||!u.initialized)){u.data.event_queue.unshift("page_view");}
u.data.config.send_page_view=false;for(i=0;i<u.data.measurement_id.length;i++){if(!/^[a-zA-Z]{1}-|^[a-zA-Z]{2}-/.test(u.data.measurement_id[i])){u.data.measurement_id[i]="G-"+u.data.measurement_id[i];}
u.o("config",u.data.measurement_id[i],u.data.config);}
u.initialized=true;for(i=0;i<u.data.event_queue.length;i++){if(u.data.event_queue[i]==="purchase"||u.data.event_queue[i]==="refund"){has_purchase=true;}}
if(u.data.order_id&&!has_purchase){u.data.event_queue.push("purchase");}
if(u.data.dynamic_event_trigger){var dyn_evts=u.data.dynamic_event_trigger.split(",");for(i=0;i<dyn_evts.length;i++){u.data.event_queue.push(dyn_evts[i]);u.data[dyn_evts[i]]=u.data[dyn_evts[i]]||u.data.dynamic_event||{};}}
for(i=0;i<u.data.event_queue.length;i++){var event_name=u.data.event_queue[i];var event_data={};event_data=JSON.parse(JSON.stringify(u.data.event));if(u.data.event.event_callback){event_data.event_callback=u.data.event.event_callback;}
if(u.data.event.non_interaction){u.data.event.non_interaction=true;}
if(u.event_map[event_name]){for(j=0;j<u.event_map[event_name].length;j++){var event_param=u.event_map[event_name][j];var event_param_value=u.std_params[event_param]?u.std_params[event_param](event_name):u.data[event_param]||"";if(event_param_value!==""){event_data[event_param]=event_param_value;}}}
Object.keys(u.map).forEach(function(mapping_from){if(u.map[mapping_from].match(new RegExp(event_name+'^'))&&typeof b[mapping_from]!=="undefined"){var mapDestination=u.map[mapping_from].split(',')[0];var mapping_to=mapDestination.substring(event_name.length+1);event_data[mapping_to]=b[mapping_from];}});utag.ut.merge(event_data,u.data[event_name],0);utag.ut.merge(event_data,u.data.all_events||{},0);u.o("event",event_name,event_data);}
if(!hasgtagjs()){u.scriptrequested=true;utag.ut.gtagScriptRequested=true;u.data.base_url=u.data.base_url.replace("##utag_measurement_id##",u.data.measurement_id[0]);utag.ut.loader({type:"script",src:u.data.base_url,cb:null,loc:"script",id:"utag_205",attrs:{}});}
utag.DB("send:205:COMPLETE");}};function mapFunc(arr,obj,item){var i=arr.shift();obj[i]=obj[i]||{};if(arr.length>0){mapFunc(arr,obj[i],item);}else{obj[i]=item;}}
function toBoolean(val){val=val||"";return val===true||val.toLowerCase()==="true"||val.toLowerCase()==="on";}
function hasgtagjs(){window.gtagRename=window.gtagRename||""||"gtag";if(utag.ut.gtagScriptRequested){return true;}
var i,s=document.getElementsByTagName("script");for(i=0;i<s.length;i++){if(s[i].src&&s[i].src.indexOf("gtag/js")>=0&&(s[i].id&&s[i].id.indexOf("utag")>-1)){return true;}}
var data_layer_name="tealiumDataLayer"||"dataLayer";window[data_layer_name]=window[data_layer_name]||[];if(typeof window[window.gtagRename]!=="function"){window[window.gtagRename]=function(){window[data_layer_name].push(arguments);};var cross_track=toBoolean(""),cross_track_domains="";if(cross_track&&cross_track_domains!==""){window[window.gtagRename]("set","linker",{domains:cross_track_domains.split(","),accept_incoming:true});}
window[window.gtagRename]("js",new Date());}
return false;}
u.scriptrequested=hasgtagjs();u.initialized=false;u.o=window[window.gtagRename];function setGlobalProperties(data,reset,custom_property){var map={"user_id":{"name":"user_id","type":"exists","reset":true},"page_path":{"name":"page_path","type":"exists","reset":true},"page_title":{"name":"page_title","type":"exists","reset":true},"page_location":{"name":"page_location","type":"exists","reset":false},"developer_id.dYmQxMT":{"name":"developer_id.dYmQxMT","type":"exists","reset":false},"user_properties":{"name":"user_properties","type":"object","reset":true}},prop,subProp,g={};if(custom_property&&reset){g[custom_property]="";}
for(prop in utag.loader.GV(map)){if(reset&&map[prop].reset){if(map[prop].name==="user_properties"){for(subProp in data[prop]){if(!g[map[prop].name]){g[map[prop].name]={};}
g[map[prop].name][subProp]="";}}else{g[map[prop].name]="";}}else{if(map[prop].type==="bool"){if(data[prop]==true||data[prop]==="true"){g[map[prop].name]=true;}}
else if(map[prop].type==="exists"||map[prop].type==="object"){if(data[prop]){g[map[prop].name]=data[prop];}}}}
if(!utag.ut.isEmptyObject(g)){u.o("set",g);}}
function getItems(length){var g={},i,items=[];length=length||u.data.product_id.length||u.data.product_name.length;for(i=0;i<length;i++){g={};g.item_id=u.data.product_id[i];if(u.data.product_name[i]){g.item_name=u.data.product_name[i];}
if(u.data.product_coupon[i]){g.coupon=u.data.product_coupon[i];}
if(u.data.product_discount[i]){g.discount=u.data.product_discount[i];}
if(u.data.product_affiliation[i]){g.affiliation=u.data.product_affiliation[i];}
if(u.data.product_brand[i]){g.item_brand=u.data.product_brand[i];}
if(u.data.product_category[i]){g.item_category=u.data.product_category[i];}
if(u.data.product_subcategory[i]){g.item_category2=u.data.product_subcategory[i];}
if(u.data.product_addcategory3[i]){g.item_category3=u.data.product_addcategory3[i];}
if(u.data.product_addcategory4[i]){g.item_category4=u.data.product_addcategory4[i];}
if(u.data.product_addcategory5[i]){g.item_category5=u.data.product_addcategory5[i];}
if(u.data.product_variant[i]){g.item_variant=u.data.product_variant[i];}
if(u.data.product_unit_price[i]){g.price=u.data.product_unit_price[i];}
if(u.data.order_currency){g.currency=u.data.order_currency;}
if(u.data.product_quantity[i]){g.quantity=u.data.product_quantity[i];}
if(u.data.product_promotion_id[i]){g.promotion_id=u.data.product_promotion_id[i];}
if(u.data.product_promotion_name[i]){g.promotion_name=u.data.product_promotion_name[i];}
if(u.data.product_creative_name[i]){g.creative_name=u.data.product_creative_name[i];}
if(u.data.product_creative_slot[i]){g.creative_slot=u.data.product_creative_slot[i];}
if(u.data.product_location_id[i]){g.location_id=u.data.product_location_id[i];}
if(u.data.product_index[i]){g.index=u.data.product_index[i];}
if(u.data.product_item_list_name[i]){g.item_list_name=u.data.product_item_list_name[i];}
if(u.data.product_item_list_id[i]){g.item_list_id=u.data.product_item_list_id[i];}
if(u.data.product_colour[i]){g.product_colour=u.data.product_colour[i];}
if(u.data.product_fulfillment_type[i]){g.product_fulfillment_type=u.data.product_fulfillment_type[i];}
if(u.data.product_pdp_no_of_images[i]){g.product_pdp_no_of_images=u.data.product_pdp_no_of_images[i];}
if(u.data.product_pdp_type_of_images[i]){g.product_pdp_type_of_images=u.data.product_pdp_type_of_images[i];}
if(u.data.product_rating[i]){g.product_rating=u.data.product_rating[i];}
if(u.data.product_reviews[i]){g.product_reviews=u.data.product_reviews[i];}
if(u.data.product_sku_availability_cc[i]){g.product_sku_availability_cc=u.data.product_sku_availability_cc[i];}
if(u.data.product_sku_availability_delivery[i]){g.product_sku_availability_delivery=u.data.product_sku_availability_delivery[i];}
if(u.data.product_mixed_paint_used[i]){g.product_mixed_paint_used=u.data.product_mixed_paint_used[i];}
if(u.data.product_mixed_colour_code[i]){g.product_mixed_colour_code=u.data.product_mixed_colour_code[i];}
if(u.data.product_mixed_colour_name[i]){g.product_mixed_colour_name=u.data.product_mixed_colour_name[i];}
if(u.data.product_social_proofing[i]){g.product_social_proofing=u.data.product_social_proofing[i];}
if(u.data.product_offer_id_marketplace[i]){g.product_offer_id_marketplace=u.data.product_offer_id_marketplace[i];}
if(u.data.product_type_marketplace[i]){g.product_type_marketplace=u.data.product_type_marketplace[i];}
if(u.data.product_merchant_name_marketplace[i]){g.product_merchant_name_marketplace=u.data.product_merchant_name_marketplace[i];}
if(u.data.product_basket_id[i]){g.product_basket_id=u.data.product_basket_id[i];}
if(u.data.product_pdp_type[i]){g.product_pdp_type=u.data.product_pdp_type[i];}
if(u.data.product_image_url[i]){g.product_image_url=u.data.product_image_url[i];}
if(u.data.product_category_id[i]){g.product_category_id=u.data.product_category_id[i];}
if(u.data.product_sku[i]){g.product_sku=u.data.product_sku[i];}
if(u.data.product_original_delivery_days[i]){g.product_original_delivery_days=u.data.product_original_delivery_days[i];}
if(u.data.product_selected_delivery_days[i]){g.product_selected_delivery_days=u.data.product_selected_delivery_days[i];}
if(u.data.product_is_original_delivery_days[i]){g.product_is_original_delivery_days=u.data.product_is_original_delivery_days[i];}
items.push(g);}
return items;}
u.event_map={add_payment_info:["coupon","currency","items","payment_type","value"],add_shipping_info:["coupon","currency","items","shipping_tier","value"],add_to_cart:["currency","items","value"],add_to_wishlist:["currency","items","value"],begin_checkout:["coupon","currency","items","value"],earn_virtual_currency:["virtual_currency_name","value"],generate_lead:["currency","value"],join_group:["group_id"],level_end:["level_name","success"],level_start:["level_name"],level_up:["level","character"],login:["method"],post_score:["score","level","character"],purchase:["affiliation","coupon","currency","items","transaction_id","shipping","tax","value"],refund:["affiliation","coupon","currency","items","transaction_id","shipping","tax","value"],remove_from_cart:["currency","items","value"],search:["search_term"],select_content:["content_type","item_id"],select_item:["items","item_list_name","item_list_id"],select_promotion:["items","location_id"],share:["method","content_type","content_id"],sign_up:["method"],spend_virtual_currency:["item_name","virtual_currency_name","value"],tutorial_begin:[],tutorial_complete:[],unlock_achievement:["achievement_id"],view_cart:["currency","items","value"],view_item:["currency","items","value"],view_item_list:["items","item_list_name","item_list_id"],view_promotion:["items","location_id"],exception:["description","fatal"],screen_view:["screen_name"]};u.std_params={"transaction_id":function(){return u.data.order_id;},"affiliation":function(){return u.data.order_store;},"value":function(event){if(event.match(/timing_complete|virtual_currency/i)){return u.data.value;}
return u.data.order_total;},"currency":function(){return u.data.order_currency;},"tax":function(){return u.data.order_tax;},"shipping":function(){return u.data.order_shipping;},"coupon":function(){return u.data.order_coupon_code;},"fatal":function(){return toBoolean(u.data.fatal);},"items":function(event){if(event.match(/view_item$|select_content/)){return getItems(1);}
return getItems();},"item_id":function(){return u.data.product_id[0]?u.data.product_id[0]:"";}};utag.o[loader].loader.LOAD(id);}("205","kingfisher.b-and-q-wapp"));}catch(error){utag.DB(error);}
