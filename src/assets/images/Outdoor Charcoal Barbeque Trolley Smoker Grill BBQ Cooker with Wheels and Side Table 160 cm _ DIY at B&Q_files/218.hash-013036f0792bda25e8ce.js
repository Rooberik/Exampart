(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[218],{2641:function(t,e,n){"use strict";n.d(e,"b",(function(){return B})),n.d(e,"a",(function(){return z}));var a=n(2658),i=n(2681),s=n(2642);class r{constructor(t,e,n){this.h=t,this.xn=e||!1,this.qn=n,this.Gn=new i.a,this.Hn=0,this.Jn=1}Kn(){return this.xn}Mn(){return this.h.I(a.a.q.Qn)}setSdkAuthenticationSignature(t){const e=this.Mn();this.h.B(a.a.q.Qn,t);const n=s.a.xt.Ft;new s.a.qt(n,s.a.D).setItem(n.$t.Vn,this.Jn,t),e!==t&&this.Qs()}Wn(){this.h.Xs(a.a.q.Qn);const t=s.a.xt.Ft;new s.a.qt(t,s.a.D).br(t.$t.Vn,this.Jn)}subscribeToSdkAuthenticationFailures(t){return this.qn.ut(t)}Xn(t){this.qn.St(t)}Yn(){this.Gn.removeAllSubscriptions()}Zn(){this.Hn+=1}au(){return this.Hn}Qs(){this.Hn=0}}var o=n(2884),l=n(2770),c=n(2883);class u{constructor(t){this.id=t}Si(){const t={};return null!=this[c.a.BROWSER]&&(t.browser=this[c.a.BROWSER]),null!=this[c.a.BROWSER_VERSION]&&(t.browser_version=this[c.a.BROWSER_VERSION]),null!=this[c.a.OS]&&(t.os_version=this[c.a.OS]),null!=this[c.a.RESOLUTION]&&(t.resolution=this[c.a.RESOLUTION]),null!=this[c.a.LANGUAGE]&&(t.locale=this[c.a.LANGUAGE]),null!=this[c.a.TIME_ZONE]&&(t.time_zone=this[c.a.TIME_ZONE]),null!=this[c.a.USER_AGENT]&&(t.user_agent=this[c.a.USER_AGENT]),t}}var h=n(2939),d=n(2654);class b{constructor(t,e){this.h=t,null==e&&(e=Object(d.h)(c.a)),this.xo=e}te(){let t=this.h.tu(a.a.eu.Jo);null==t&&(t=new h.a(s.a.it.nt()),this.h.ru(a.a.eu.Jo,t));const e=new u(t.iu);for(let t=0;t<this.xo.length;t++){const n=this.xo[t];switch(n){case c.a.BROWSER:e[n]=l.a.browser;break;case c.a.BROWSER_VERSION:e[n]=l.a.version;break;case c.a.OS:e[n]=this.qo();break;case c.a.RESOLUTION:e[n]=screen.width+"x"+screen.height;break;case c.a.LANGUAGE:e[n]=l.a.language;break;case c.a.TIME_ZONE:e[n]=this.Qo(new Date);break;case c.a.USER_AGENT:e[n]=l.a.userAgent}}return e}qo(){if(l.a.Xo())return l.a.Xo();const t=this.h.I(a.a.q.Yo);return t&&t.os_version?t.os_version:l.a.Zo()}Qo(t){if("undefined"!=typeof Intl&&"function"==typeof Intl.DateTimeFormat)try{if("function"==typeof Intl.DateTimeFormat().resolvedOptions){const t=Intl.DateTimeFormat().resolvedOptions().timeZone;if(null!=t&&""!==t)return t}}catch(e){s.a.D.info("Intl.DateTimeFormat threw an error, cannot detect user's time zone:"+e.message),t=""}if(!t)return t;const e=t.getTimezoneOffset();return this.sa(e)}sa(t){const e=parseInt(t/60),n=parseInt(t%60);let a="GMT";return 0!==t&&(a+=t<0?"+":"-",a+=("00"+Math.abs(e)).slice(-2)+":"+("00"+Math.abs(n)).slice(-2)),a}}var p=n(3190),f=n(3189),g=n(2811),m=n(2676),v=n(2731);class w{constructor(t,e,n,a,i,s,r,o,l,c,u){this.Ur=t,this.h=e,this.Ho=n,this.v=a,this.j=i,this.gt=s,this._r=r,this.Wo=o,this.Uo=l,this.Ko=c,this.oa=u,this.ua=["npm"]}Ps(t,e){const n=this.Ur.te(),i=n.Si(),s=this.h.I(a.a.q.Yo);Object(d.d)(s,i)||(t.device=i),t.api_key=this._r,t.time=Object(m.a)((new Date).valueOf(),!0);const r=this.h.I(a.a.q.ha)||[],o=this.h.I(a.a.q.ca)||"";if(this.ua.length>0&&(!Object(d.d)(r,this.ua)||o!==this.j.la())&&(t.sdk_metadata=this.ua),t.sdk_version=this.Uo,this.Ko&&(t.sdk_flavor=this.Ko),t.app_version=this.oa,t.device_id=n.id,e){const e=this.v.getUserId();null!=e&&(t.user_id=e)}return t}Os(t,e,n){const a=e.auth_error,i=e.error;if(!a&&!i)return!0;if(a){let e;this.Ho.Zn();const i={errorCode:a.error_code};for(const t of n)Object(d.b)(t)&&"X-Braze-Auth-Signature"===t[0]&&(i.signature=t[1]);t.respond_with&&t.respond_with.user_id?i.userId=t.respond_with.user_id:t.user_id&&(i.userId=t.user_id);const r=a.reason;return r?(i.reason=r,e=`due to ${r}`):e=`with error code ${a.error_code}.`,this.Ho.Kn()||(e+=' Please use the "enableSdkAuthentication" initialization option to enable authentication.'),s.a.D.error(`SDK Authentication failed ${e}`),this.fa(t.events,t.attributes),this.Ho.Xn(i),!1}if(i){let n=i;switch(n){case f.a.ma:const a="Received successful response with empty body.";return v.a.G(s.a.A.qs,{e:a}),s.a.D.info(a),!1;case f.a.pa:const i="Received successful response with invalid JSON";return v.a.G(s.a.A.qs,{e:i+": "+e.response}),s.a.D.info(i),!1;case f.a.Ra:n=`The API key "${t.api_key}" is invalid for the baseUrl ${this.Wo}`;break;case f.a.ba:n="Sorry, we are not currently accepting your requests. If you think this is in error, please contact us.";break;case f.a.ga:n="No device identifier. Please contact support@braze.com"}s.a.D.error("Backend error: "+n)}return!1}qa(t,e,n,a){return!!(t&&0!==t.length||e&&0!==e.length||n||a)}Aa(t,e,n,a){const i=[],s=t=>t||"",r=s(this.v.getUserId());let o,l,c,u,h=this.wi(t,e);if(n.length>0){const t=[];for(const e of n){if(o=e.Si(),this.Ho.Kn()){if(r&&!o.user_id){u||(u={},u.events=[]),u.events.push(o);continue}if(s(o.user_id)!==r){l||(l=[]),l.push(o);continue}}t.push(o)}t.length>0&&(h.events=t)}if(a.length>0){const t=[];for(const e of a)this.Ho.Kn()&&s(e.user_id)!==r?(c||(c=[]),c.push(e)):t.push(e);t.length>0&&(h.attributes=t)}if(this.fa(l,c),h=this.Ps(h,!0),u){u=this.Ps(u,!1);const t={requestData:u,headers:this.Bs(u)};i.push(t)}if(h&&!this.qa(h.events,h.attributes,t,e))return u?i:null;const d={requestData:h,headers:this.Bs(h)};return i.push(d),i}fa(t,e){if(t){const e=[];for(const n of t){const t=g.a.fromJson(n);t.time=Object(m.b)(t.time),e.push(t)}this.h.bo(e)}if(e)for(const t of e)this.h.za(t)}Vs(t,e){let n="HTTP error ";null!=t&&(n+=t+" "),n+=e,s.a.D.error(n)}Fr(t){return v.a.G(s.a.A.Ba,{n:t})}wi(t,e,n){const a={};t&&(a.feed=!0),e&&(a.triggers=!0);const i=null!=n?n:this.v.getUserId();return i&&(a.user_id=i),a.config={config_time:this.gt.Zs()},{respond_with:a}}Bs(t,e,n,i){const s=[["X-Braze-Api-Key",this._r]];let r=!1;if(null!=t.respond_with&&t.respond_with.triggers&&(s.push(["X-Braze-TriggersRequest","true"]),r=!0),null!=t.respond_with&&t.respond_with.feed&&(s.push(["X-Braze-FeedRequest","true"]),r=!0),e){s.push(["X-Braze-ContentCardsRequest","true"]);let t=this.h.I(a.a.q.As);t&&i||(t=0,this.h.B(a.a.q.As,t)),s.push(["BRAZE-SYNC-RETRY-COUNT",t.toString()]),r=!0}if(n&&(s.push(["X-Braze-FeatureFlagsRequest","true"]),r=!0),r&&s.push(["X-Braze-DataRequest","true"]),this.Ho.Kn()){const t=this.Ho.Mn();null!=t&&s.push(["X-Braze-Auth-Signature",t])}return s}Gs(t,e){const n=t.device;n&&n.os_version instanceof Promise?n.os_version.then((n=>{t.device.os_version=n,e()})):e()}Qs(){this.Ho.Qs()}Ks(){return this.Wo}addSdkMetadata(t){for(const e of t)-1===this.ua.indexOf(e)&&this.ua.push(e)}}var x=n(2943),y=n(3090),S=n(2942),A=n(2812);class k{constructor(t,e,n,a,s,r,o,l,c,u){this._r=t,this.Wo=e,this.kl=0,this.yl=o.xa(),this.jl=null,this.j=n,this.Ur=a,this.v=s,this.gt=r,this.h=o,this.Ho=c,this.vt=u,this.$l=l,this.Al=new i.a,this.ql=50}Fl(t,e){return!t&&!e&&this.Ho.au()>=this.ql}Dl(t){let e=this.j.jh();if(t.length>0){const n=this.v.getUserId();for(const a of t){const t=!a.userId&&!n||a.userId===n;a.type===s.a.A._h&&t&&(e=!0)}}return e}Ll(t,e,n,i,r,o,l){null==n&&(n=!0),n&&this.Pl();const c=this.h.Ua(),u=this.h.Pa();let h=!1;const d=(t,e)=>{let s=!1;x.a.Hs({url:this.Wo+"/data/",data:t,headers:e,S:n=>{null!=t.respond_with&&t.respond_with.triggers&&(this.kl=Math.max(this.kl-1,0)),this.vt.Os(t,n,e)?(this.Ho.Qs(),this.gt.al(n),null!=t.respond_with&&t.respond_with.user_id!=this.v.getUserId()||(null!=t.device&&this.h.B(a.a.q.Yo,t.device),null!=t.sdk_metadata&&(this.h.B(a.a.q.ha,t.sdk_metadata),this.h.B(a.a.q.ca,this.j.la())),this.$l(n),"function"==typeof i&&i())):n.auth_error&&(s=!0)},error:()=>{null!=t.respond_with&&t.respond_with.triggers&&(this.kl=Math.max(this.kl-1,0)),this.vt.fa(t.events,t.attributes),"function"==typeof r&&r()},Ue:t=>{if("function"==typeof o&&o(t),n&&!h){if(t&&!s)this.Rl();else{let t=this.jl;(null==t||t<1e3*this.yl)&&(t=1e3*this.yl),this.Rl(Math.min(3e5,Object(y.a)(1e3*this.yl,3*t)))}h=!0}}})},b=this.Dl(c),p=e||b;if(this.Fl(l,b))return void s.a.D.info("Declining to flush data due to 50 consecutive authentication failures");if(n&&!this.vt.qa(c,u,t,p))return this.Rl(),void("function"==typeof o&&o(!0));const f=this.vt.Aa(t,p,c,u);p&&this.kl++;let g=!1;if(f)for(const t of f)this.vt.Gs(t.requestData,(()=>d(t.requestData,t.headers))),g=!0;this.Ho.Kn()&&n&&!g?this.Rl():b&&(s.a.D.info("Invoking new session subscriptions"),this.Al.St())}Ml(){return this.kl>0}Rl(t){this.Il||(null==t&&(t=1e3*this.yl),this.Pl(),this.Nl=setTimeout((()=>{if(document.hidden){const t="visibilitychange",e=()=>{document.hidden||(document.removeEventListener(t,e,!1),this.Ll())};document.addEventListener(t,e,!1)}else this.Ll()}),t),this.jl=t)}Pl(){null!=this.Nl&&(clearTimeout(this.Nl),this.Nl=null)}initialize(){this.Il=!1,this.Rl()}destroy(){this.Al.removeAllSubscriptions(),this.Ho.Yn(),this.Pl(),this.Il=!0,this.Ll(null,null,!1),this.Nl=null}cr(t){return this.Al.ut(t)}openSession(){const t=this.j.la()!==this.j.mo();t&&(this.h.ya(a.a.eu.Jo),this.h.ya(a.a.eu.su)),this.Ll(null,!1,null,null,null),this.Rn(),t&&Promise.resolve().then(n.bind(null,3238)).then((t=>{if(this.Il)return;const e=t.default.aa();if(null!=e&&(A.a.isPushPermissionGranted()||A.a.isPushBlocked())){const t=()=>{e.Jr()?s.a.D.info("Push token maintenance is disabled, not refreshing token for backend."):e.subscribe()},n=(e,n)=>{n&&t()},i=()=>{const e=this.h.I(a.a.q.Sn);(null==e||e)&&t()},r=s.a.xt.Ft;new s.a.qt(r,s.a.D).hr(r.$t.cu,n,i)}}))}changeUser(t,e,n){const i=this.v.getUserId();if(i!==t){this.j.Fh(),null!=i&&this.Ll(null,!1,null,null,null),this.v.uu(t),n?this.Ho.setSdkAuthenticationSignature(n):this.Ho.Wn();for(let t=0;t<e.length;t++)e[t].changeUser(null==i);null!=i&&this.h.Xs(a.a.q.P),this.h.Xs(a.a.q.Yo),this.openSession(),s.a.D.info('Changed user to "'+t+'".')}else{let e="Doing nothing.";n&&this.Ho.Mn()!==n&&(this.Ho.setSdkAuthenticationSignature(n),e="Updated SDK authentication signature"),s.a.D.info(`Current user is already ${t}. ${e}`)}}requestImmediateDataFlush(t){this.Pl(),this.j.mo(),this.Ll(null,null,null,null,(()=>{s.a.D.error("Failed to flush data, request will be retried automatically.")}),t,!0)}requestFeedRefresh(){this.j.mo(),this.Ll(!0)}zr(t,e){this.j.mo(),s.a.D.info("Requesting explicit trigger refresh."),this.Ll(null,!0,null,t,e)}Nn(t,e){const n=s.a.A.Ol,a={a:t,l:e},i=v.a.G(n,a);return i&&s.a.D.info(`Logged alias ${t} with label ${e}`),i}In(t,e,n){if(this.gt.hu(e))return s.a.D.info(`Custom Attribute "${e}" is blocklisted, ignoring.`),new S.a;const a={key:e,value:n},i=v.a.G(t,a);return i&&s.a.D.info(`Logged custom attribute: ${e} with value: ${n}`),i}setLastKnownLocation(t,e,n,a,i,r){const o={latitude:e,longitude:n};null!=a&&(o.altitude=a),null!=i&&(o.ll_accuracy=i),null!=r&&(o.alt_accuracy=r);const l=v.a.G(s.a.A.Ul,o,t);return l&&s.a.D.info(`Set user last known location as ${JSON.stringify(o,null,2)}`),l}kr(t,e){const n=this.j.mo();return new g.a(this.v.getUserId(),s.a.A.xl,t,n,{cid:e})}Rn(){const t=s.a.xt.Ft;new s.a.qt(t,s.a.D).setItem(t.$t.Kl,1,{baseUrl:this.Wo,data:{api_key:this._r,device_id:this.Ur.te().id},userId:this.v.getUserId(),sdkAuthEnabled:this.Ho.Kn()})}wr(t){for(const e of t)if(e.api_key===this._r)this.vt.fa(e.events,e.attributes);else{const t=s.a.xt.Ft;new s.a.qt(t,s.a.D).setItem(t.$t.$r,s.a.it.nt(),e)}}$n(t,e,n){if(this.gt.hu(t))return s.a.D.info(`Custom Attribute "${t}" is blocklisted, ignoring.`),new S.a;let a,i;return null===e&&null===n?(a=s.a.A.Wl,i={key:t}):(a=s.a.A.Bl,i={key:t,latitude:e,longitude:n}),v.a.G(a,i)}Bn(t,e){const n={group_id:t,status:e};return v.a.G(s.a.A.Gl,n)}}class O{constructor(t,e,n,a,i,s,r,o){this.ol=t||0,this.bl=e||[],this.dl=n||[],this.vl=a||[],this.Cl=i,null!=i&&""!==i||(this.Cl=null),this.gl=s||null,this.ml=r||{},this.cl=o||{}}ss(){return{s:"4.6.2",l:this.ol,e:this.bl,a:this.dl,p:this.vl,m:this.Cl,v:this.gl,c:this.ml,f:this.cl}}static jn(t){let e=t.l;return"4.6.2"!==t.s&&(e=0),new O(e,t.e,t.a,t.p,t.m,t.v,t.c,t.f)}}class E{constructor(t){this.h=t,this.tl=new i.a,this.el=new i.a,this.sl=new i.a,this.il=null}rl(){if(null==this.il){const t=this.h.I(a.a.q.hl);this.il=null!=t?O.jn(t):new O}return this.il}Zs(){return this.rl().ol}al(t){if(null!=t&&null!=t.config){const e=t.config;if(e.time>this.rl().ol){const t=new O(e.time,e.events_blacklist,e.attributes_blacklist,e.purchases_blacklist,e.messaging_session_timeout,e.vapid_public_key,e.content_cards,e.feature_flags);let n=!1;null!=t.gl&&this.vn()!==t.gl&&(n=!0);let i=!1;null!=t.ml.enabled&&this.Ys()!==t.ml.enabled&&(i=!0);let s=!1;null!=t.cl.enabled&&this._e()!==t.cl.enabled&&(s=!0),this.il=t,this.h.B(a.a.q.hl,t.ss()),n&&this.tl.St(),i&&this.el.St(),s&&this.sl.St()}}}kn(t){let e=this.tl.ut(t);return this.fl&&this.tl.removeSubscription(this.fl),this.fl=e,e}Ms(t){return this.el.ut(t)}qe(t){return this.sl.ut(t)}ge(t){return-1!==this.rl().bl.indexOf(t)}hu(t){return-1!==this.rl().dl.indexOf(t)}Dr(t){return-1!==this.rl().vl.indexOf(t)}wl(){return this.rl().Cl}vn(){return this.rl().gl}Ys(){return this.rl().ml.enabled||!1}_e(){return this.rl().cl.enabled&&null==this.Be()?(v.a.G(s.a.A.qs,{e:"Missing feature flag refresh_rate_limit."}),!1):this.rl().cl.enabled||!1}Be(){return this.rl().cl.refresh_rate_limit}}class D{constructor(t,e,n,a){this.h=t,this.v=e,this.gt=n,this.dh=1e3,a=parseFloat(a),isNaN(a)&&(a=1800),a<this.dh/1e3&&(s.a.D.info("Specified session timeout of "+a+"s is too small, using the minimum session timeout of "+this.dh/1e3+"s instead."),a=this.dh/1e3),this.fh=a}ph(t,e){return new g.a(this.v.getUserId(),s.a.A.gh,t,e.iu,{d:Object(m.a)(t-e.wh)})}la(){const t=this.h.tu(a.a.eu.Sh);return null==t?null:t.iu}jh(){const t=(new Date).valueOf(),e=this.gt.wl(),n=this.h.I(a.a.q.bh);if(null!=n&&null==e)return!1;const i=null==n||t-n>1e3*e;return i&&this.h.B(a.a.q.bh,t),i}xh(t,e){return null==e||!(t-e.wh<this.dh)&&e.Dh<t}mo(){const t=(new Date).valueOf(),e=t+1e3*this.fh,n=this.h.tu(a.a.eu.Sh);if(this.xh(t,n)){let i="Generating session start event with time "+t;if(null!=n){let t=n.Ch;t-n.wh<this.dh&&(t=n.wh+this.Gh),this.h.Nh(this.ph(t,n)),i+=" (old session ended "+t+")"}i+=". Will expire "+e.valueOf(),s.a.D.info(i);const r=new h.a(s.a.it.nt(),e);return this.h.Nh(new g.a(this.v.getUserId(),s.a.A._h,t,r.iu)),this.h.ru(a.a.eu.Sh,r),null==this.h.I(a.a.q.bh)&&this.h.B(a.a.q.bh,t),r.iu}return n.Ch=t,n.Dh=e,this.h.ru(a.a.eu.Sh,n),n.iu}Fh(){const t=this.h.tu(a.a.eu.Sh);null!=t&&(this.h.Hh(a.a.eu.Sh),this.h.Nh(this.ph((new Date).valueOf(),t)))}}const N={Vo:(t,e)=>{let n=!1;try{if(localStorage&&localStorage.getItem)try{localStorage.setItem(a.a.q.Sa,!0),localStorage.getItem(a.a.q.Sa)&&(localStorage.removeItem(a.a.q.Sa),n=!0)}catch(t){if("QuotaExceededError"!==t.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==t.name||!(localStorage.length>0))throw t;n=!0}}catch(t){s.a.D.info("Local Storage not supported!")}const i=N.Ea(),r=new a.b.wa(t,i&&!e,n);let o=null;return o=n?new a.b._a(t):new a.b.Oa,new a.b(r,o)},Ea:()=>navigator.cookieEnabled||"cookie"in document&&(document.cookie.length>0||(document.cookie="test").indexOf.call(document.cookie,"test")>-1)};var C=N,T=n(2771),_=n(2940),I=n(3188),j=n(3187);class P{constructor(t,e){this.gt=t,this.h=e}getUserId(){const t=this.h.tu(a.a.eu.su);if(null==t)return null;let e=t.iu,n=Object(_.b)(e);if(n>j.a.ee){for(;n>j.a.ee;)e=e.slice(0,e.length-1),n=Object(_.b)(e);t.iu=e,this.h.ru(a.a.eu.su,t)}return e}uu(t){const e=null==this.getUserId();this.h.ru(a.a.eu.su,new h.a(t)),e&&this.h.ou(t)}setCustomUserAttribute(t,e){if(this.gt.hu(t))return s.a.D.info('Custom Attribute "'+t+'" is blocklisted, ignoring.'),!1;const n={};return n[t]=e,this.nu(j.a.lu,n,!0)}nu(t,e,n,a){const i=this.h.mu(this.getUserId(),t,e);let r="",o=t,l=e;return n&&(r=" custom","object"==typeof e&&(o=Object.keys(e)[0],l=e[o])),!a&&i&&s.a.D.info(`Logged${r} attribute ${o} with value ${l}`),i}Zr(t,e,n,i,r){this.nu("push_token",t,!1,!0),this.nu("custom_push_public_key",n,!1,!0),this.nu("custom_push_user_auth",i,!1,!0),this.nu("custom_push_vapid_public_key",r,!1,!0);const o=s.a.xt.Ft,l=new s.a.qt(o,s.a.D),c=new I.a(t,e,n,i,r);this.h.B(a.a.q.Sn,c.ss()),l.setItem(o.$t.cu,o.se,!0)}fn(t){if(this.nu("push_token",null,!1,!0),this.nu("custom_push_public_key",null,!1,!0),this.nu("custom_push_user_auth",null,!1,!0),this.nu("custom_push_vapid_public_key",null,!1,!0),t){const t=s.a.xt.Ft,e=new s.a.qt(t,s.a.D);this.h.B(a.a.q.Sn,!1),e.setItem(t.$t.cu,t.se,!1)}}}var M=n(2937),R=n(2765);const z={ho:"allowCrawlerActivity",po:"baseUrl",Eo:"noCookies",_o:"devicePropertyAllowlist",ta:"disablePushTokenMaintenance",Io:"enableLogging",Ao:"enableSdkAuthentication",ia:"manageServiceWorkerExternally",So:"minimumIntervalBetweenTriggerActionsInSeconds",No:"sessionTimeoutInSeconds",wo:"appVersion",na:"serviceWorkerLocation",ra:"safariWebsitePushId",zn:"localization",ao:"contentSecurityNonce",To:"enableHtmlInAppMessages",Oo:"allowUserSuppliedJavascript",no:"inAppMessageZIndex",lo:"openInAppMessagesInNewTab",tn:"openCardsInNewTab",en:"openNewsFeedCardsInNewTab",eh:"requireExplicitInAppMessageDismissal",vo:"doNotLoadFontAwesome",Co:"sdkFlavor"};class U{constructor(){this.Lo=!1,this.Po=!1,this.Ro=new i.a,this.Mo=new i.a,this.jo={},this.yo=[],this.Do=[],this.ni=[],this.Uo="4.6.2"}zo(t){this.Ro.ut(t)}rh(t){this.Mo.ut(t)}initialize(t,e){if(this.Bo())return s.a.D.info("Braze has already been initialized with an API key."),!0;this.jo=e||{};let o=this.nn(z.Io);const u=Object(M.b)(R.b.yn());if(u&&"true"===u.brazeLogging&&(o=!0),s.a.D.init(o),s.a.D.info(`Initialization Options: ${JSON.stringify(this.jo,null,2)}`),null==t||""===t||"string"!=typeof t)return s.a.D.error("Braze requires a valid API key to be initialized."),!1;this._r=t;let h=this.nn(z.po);if(null==h||""===h||"string"!=typeof h)return s.a.D.error("Braze requires a valid baseUrl to be initialized."),!1;!1===/^https?:/.test(h)&&(h=`https://${h}`);let f=h;if(h=document.createElement("a"),h.href=f,"/"===h.pathname&&(h=`${h}api/v3`),this.Wo=h.toString(),l.a.Fo&&!this.nn(z.ho))return s.a.D.info("Ignoring activity from crawler bot "+navigator.userAgent),this.Po=!0,!1;const g=this.nn(U.Eo)||!1;if(this.h=C.Vo(t,g),new a.b.ne(null,!0).lr(a.a.ae))return s.a.D.info("Ignoring all activity due to previous opt out"),this.Po=!0,!1;for(const t of Object(d.f)(this.jo))-1===Object(d.h)(s.a.Go).indexOf(t)&&s.a.D.warn(`Ignoring unknown initialization option '${t}'.`);const m=["mparticle","wordpress","tealium"];if(null!=this.nn(z.Co)){const t=this.nn(z.Co);-1!==m.indexOf(t)?this.Ko=t:s.a.D.error("Invalid sdk flavor passed: "+t)}let v=this.nn(s.a.Go._o);if(null!=v)if(Object(d.b)(v)){const t=[];for(let e=0;e<v.length;e++)Object(d.g)(c.a,v[e],"devicePropertyAllowlist contained an invalid value.","DeviceProperties")&&t.push(v[e]);v=t}else s.a.D.error("devicePropertyAllowlist must be an array. Defaulting to all properties."),v=null;this.Ur=new b(this.h,v),this.gt=new E(this.h),this.v=new P(this.gt,this.h),this.j=new D(this.h,this.v,this.gt,this.nn(z.No));const x=new i.a;return this.Ho=new r(this.h,this.nn(z.Ao),x),this.jt(x),this.vt=new w(this.Ur,this.h,this.Ho,this.v,this.j,this.gt,this._r,this.Wo,this.Uo,this.Ko,this.nn(z.wo)),this.si=new k(this._r,this.Wo,this.j,this.Ur,this.v,this.gt,this.h,(t=>{if(this.Bo())for(const e of this.re())e.Rs(t)}),this.Ho,this.vt),this.si.initialize(),s.a.D.info(`Initialized for the Braze backend at "${this.nn(z.po)}" with API key "${this._r}".`),null!=this.nn(z.To)&&Object(p.a)("enableHtmlInAppMessages","initialization option","allowUserSuppliedJavascript"),T.a.init(),this.gt.qe((()=>{this.Lo&&this.gt._e()&&Promise.resolve().then(n.bind(null,3204)).then((t=>{this.Lo&&(0,t.default)()}))})),this.si.cr((()=>{this.Lo&&this.gt._e()&&Promise.resolve().then(n.bind(null,3204)).then((t=>{this.Lo&&(0,t.default)(null,null,!0)}))})),this.Ro.St(this.jo),this.Lo=!0,!0}destroy(t){if(s.a.D.destroy(),this.Bo()){this.Mo.St(),this.Mo.removeAllSubscriptions();for(const t of this.yo)t.destroy();this.yo=[];for(const t of this.Do)t.clearData(!1);this.Do=[],this.removeAllSubscriptions(),this.ni=[],this.si.destroy(),this.si=null,this.Ho=null,this.Ur=null,this.vt=null,this.gt=null,this.j=null,this.v=null,this.jo={},this.Ko=void 0,this.Lo=!1,this.Po=!1,t&&(this.h=null)}}rr(){if(this.$o())return!1;if(!this.Bo())throw new Error("Braze must be initialized before calling methods.");return!0}ea(){return this._r}ii(){return this.Ho}Ks(){return this.Wo}ce(){return this.Ur}nr(){return this.vt}nn(t){return this.jo[t]}re(){return this.Do}mr(){return this.si}ir(){return this.gt}g(){return this.j}l(){return this.h}gr(){if(this.v&&this.si)return new j.a(this.v,this.si)}p(){return this.v}tr(){return!0===this.nn(z.Oo)||!0===this.nn(z.To)}u(t){let e=!1;for(const n of this.yo)n===t&&(e=!0);e||this.yo.push(t)}ar(t){let e=!1;for(const n of this.Do)n.constructor===t.constructor&&(e=!0);t instanceof o.a&&!e&&this.Do.push(t)}jt(t){t instanceof i.a&&this.ni.push(t)}removeAllSubscriptions(){if(this.rr())for(const t of this.ni)t.removeAllSubscriptions()}removeSubscription(t){if(this.rr())for(const e of this.ni)e.removeSubscription(t)}le(t){this.Po=t}Bo(){return this.Lo}$o(){return this.Po}Ds(){return this.Uo}}const B=new U},2642:function(t,e,n){"use strict";const a={Pn:function(t){const e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(e),a=new Uint8Array(n.length);for(let t=0;t<n.length;++t)a[t]=n.charCodeAt(t);return a}};var i=a;var s={nt:()=>{const t=t=>{const e=(Math.random().toString(16)+"000000000").substr(2,8);return t?"-"+e.substr(0,4)+"-"+e.substr(4,4):e};return t()+t(!0)+t(!0)+t()}};class r{constructor(t,e){this.td="undefined"==typeof window?self:window,this.ed=t,this.nd=e}od(){if("indexedDB"in this.td)return this.td.indexedDB}rd(){try{if(null==this.od())return!1;{const t=this.od().open("Braze IndexedDB Support Test");if(t.onupgradeneeded=()=>t.result.close(),t.onsuccess=()=>t.result.close(),"undefined"!=typeof window){const t=window.chrome||window.browser||window.msBrowser;if(t&&t.runtime&&t.runtime.id)return this.nd.info("Not using IndexedDB for storage because we are running inside an extension"),!1}return!0}}catch(t){return this.nd.info("Not using IndexedDB for storage due to following error: "+t),!1}}sd(t,e){const n=this.od().open(this.ed.dd,this.ed.VERSION);if(null==n)return"function"==typeof e&&e(),!1;const a=this;return n.onupgradeneeded=t=>{a.nd.info("Upgrading indexedDB "+a.ed.dd+" to v"+a.ed.VERSION+"...");const e=t.target.result;for(const t in a.ed.$t)a.ed.$t.hasOwnProperty(t)&&!e.objectStoreNames.contains(a.ed.$t[t])&&e.createObjectStore(a.ed.$t[t])},n.onsuccess=n=>{const i=n.target.result;i.onversionchange=()=>{i.close(),"function"==typeof e&&e(),a.nd.error("Needed to close the database unexpectedly because of an upgrade in another tab")},t(i)},n.onerror=t=>(a.nd.info("Could not open indexedDB "+a.ed.dd+" v"+a.ed.VERSION+": "+t.target.errorCode),"function"==typeof e&&e(),!0),!0}setItem(t,e,n,a,i){if(!this.rd())return"function"==typeof i&&i(),!1;const s=this;return this.sd((r=>{if(!r.objectStoreNames.contains(t))return s.nd.error("Could not store object "+e+" in "+t+" on indexedDB "+s.ed.dd+" - "+t+" is not a valid objectStore"),"function"==typeof i&&i(),void r.close();const o=r.transaction([t],"readwrite");o.oncomplete=()=>r.close();const l=o.objectStore(t).put(n,e);l.onerror=()=>{s.nd.error("Could not store object "+e+" in "+t+" on indexedDB "+s.ed.dd),"function"==typeof i&&i()},l.onsuccess=()=>{"function"==typeof a&&a()}}),i)}getItem(t,e,n){if(!this.rd())return!1;const a=this;return this.sd((i=>{if(!i.objectStoreNames.contains(t))return a.nd.error("Could not retrieve object "+e+" in "+t+" on indexedDB "+a.ed.dd+" - "+t+" is not a valid objectStore"),void i.close();const s=i.transaction([t],"readonly");s.oncomplete=()=>i.close();const r=s.objectStore(t).get(e);r.onerror=()=>{a.nd.error("Could not retrieve object "+e+" in "+t+" on indexedDB "+a.ed.dd)},r.onsuccess=t=>{const e=t.target.result;null!=e&&n(e)}}))}hr(t,e,n){if(!this.rd())return"function"==typeof n&&n(),!1;const a=this;return this.sd((i=>{if(!i.objectStoreNames.contains(t))return a.nd.error("Could not retrieve last record from "+t+" on indexedDB "+a.ed.dd+" - "+t+" is not a valid objectStore"),"function"==typeof n&&n(),void i.close();const s=i.transaction([t],"readonly");s.oncomplete=()=>i.close();const r=s.objectStore(t).openCursor(null,"prev");r.onerror=()=>{a.nd.error("Could not open cursor for "+t+" on indexedDB "+a.ed.dd),"function"==typeof n&&n()},r.onsuccess=t=>{const a=t.target.result;null!=a&&null!=a.value&&null!=a.key?e(a.key,a.value):"function"==typeof n&&n()}}),n)}br(t,e){if(!this.rd())return!1;const n=this;return this.sd((a=>{if(!a.objectStoreNames.contains(t))return n.nd.error("Could not delete record "+e+" from "+t+" on indexedDB "+n.ed.dd+" - "+t+" is not a valid objectStore"),void a.close();const i=a.transaction([t],"readwrite");i.oncomplete=()=>a.close(),i.objectStore(t).delete(e).onerror=()=>{n.nd.error("Could not delete record "+e+" from "+t+" on indexedDB "+n.ed.dd)}}))}Jt(t,e){if(!this.rd())return!1;const n=this;return this.sd((a=>{if(!a.objectStoreNames.contains(t))return n.nd.error("Could not retrieve objects from "+t+" on indexedDB "+n.ed.dd+" - "+t+" is not a valid objectStore"),void a.close();const i=a.transaction([t],"readwrite");i.oncomplete=()=>a.close();const s=i.objectStore(t),r=s.openCursor(),o=[];r.onerror=()=>{o.length>0?(n.nd.info("Cursor closed midway through for "+t+" on indexedDB "+n.ed.dd),e(o)):n.nd.error("Could not open cursor for "+t+" on indexedDB "+n.ed.dd)},r.onsuccess=t=>{const n=t.target.result;null!=n?(null!=n.value&&null!=n.key&&(s.delete(n.key).onsuccess=()=>{o.push(n.value)}),n.continue()):o.length>0&&e(o)}}))}clearData(){if(!this.rd())return!1;const t=[];for(const e in this.ed.$t)this.ed.$t.hasOwnProperty(e)&&this.ed.$t[e]!==this.ed.$t.oe&&t.push(this.ed.$t[e]);const e=this;return this.sd((function(n){const a=n.transaction(t,"readwrite");a.oncomplete=()=>n.close();for(let n=0;n<t.length;n++){const i=t[n];a.objectStore(i).clear().onerror=function(){e.nd.error("Could not clear "+this.source.name+" on indexedDB "+e.ed.dd)}}a.onerror=function(){e.nd.error("Could not clear object stores on indexedDB "+e.ed.dd)}}))}}r.ep={Ft:{dd:"AppboyServiceWorkerAsyncStorage",VERSION:6,$t:{Kl:"data",jr:"pushClicks",cu:"pushSubscribed",ud:"fallbackDevice",Mt:"cardUpdates",oe:"optOut",$r:"pendingData",Vn:"sdkAuthenticationSignature"},se:1}};const o={init:function(t){void 0===t&&void 0!==o.zg||(o.zg=!!t),o.Eg||(o.Eg=!0)},destroy:function(){o.Eg=!1,o.zg=void 0,o.nd=void 0},setLogger:function(t){"function"==typeof t?(o.init(),o.nd=t):o.info("Ignoring setLogger call since logger is not a function")},toggleLogging:function(){o.init(),o.zg?(console.log("Disabling Braze logging"),o.zg=!1):(console.log("Enabled Braze logging"),o.zg=!0)},info:function(t){if(o.zg){const e="Braze: "+t;null!=o.nd?o.nd(e):console.log(e)}},warn:function(t){if(o.zg){const e="Braze SDK Warning: "+t+" (v4.6.2)";null!=o.nd?o.nd(e):console.warn(e)}},error:function(t){if(o.zg){const e="Braze SDK Error: "+t+" (v4.6.2)";null!=o.nd?o.nd(e):console.error(e)}}};var l=o;const c={Dn:i,A:{CustomEvent:"ce",Pr:"p",xl:"pc",cc:"ca",Ba:"i",qs:"ie",T:"cci",W:"ccic",_:"ccc",L:"ccd",_h:"ss",gh:"se",bi:"si",yi:"sc",ji:"sbc",vi:"sfe",ro:"iec",Ul:"lr",Ol:"uae",U:"ci",F:"cc",Bl:"lcaa",Wl:"lcar",Tn:"inc",En:"add",Fn:"rem",Un:"set",Gl:"sgu"},Ar:{qr:"feed_displayed",dc:"content_cards_displayed"},it:s,qt:r,xt:r.ep,D:l,Go:{ho:"allowCrawlerActivity",po:"baseUrl",Eo:"noCookies",_o:"devicePropertyAllowlist",ta:"disablePushTokenMaintenance",Io:"enableLogging",Ao:"enableSdkAuthentication",ia:"manageServiceWorkerExternally",So:"minimumIntervalBetweenTriggerActionsInSeconds",No:"sessionTimeoutInSeconds",wo:"appVersion",na:"serviceWorkerLocation",ra:"safariWebsitePushId",zn:"localization",ao:"contentSecurityNonce",To:"enableHtmlInAppMessages",Oo:"allowUserSuppliedJavascript",no:"inAppMessageZIndex",lo:"openInAppMessagesInNewTab",en:"openNewsFeedCardsInNewTab",eh:"requireExplicitInAppMessageDismissal",vo:"doNotLoadFontAwesome",Co:"sdkFlavor",tn:"openCardsInNewTab"}};e.a=c},2654:function(t,e,n){"use strict";n.d(e,"h",(function(){return i})),n.d(e,"g",(function(){return s})),n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return o})),n.d(e,"e",(function(){return l})),n.d(e,"a",(function(){return c})),n.d(e,"f",(function(){return u})),n.d(e,"d",(function(){return h}));var a=n(2642);function i(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&void 0!==t[n]&&e.push(t[n]);return e}function s(t,e,n,s){const r=i(t);return-1!==r.indexOf(e)||(a.a.D.error(`${n} Valid values from ${s} are "${r.join('"/"')}".`),!1)}function r(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)}function o(t){return"[object Date]"===Object.prototype.toString.call(t)}function l(t){return"[object Object]"===Object.prototype.toString.call(t)}function c(t){null==t&&(t=[]);const e=[],n=arguments.length;for(let a=0,i=t.length;a<i;a++){const i=t[a];if(-1!==e.indexOf(i))continue;let s=1;for(s=1;s<n&&-1!==arguments[s].indexOf(i);s++);s===n&&e.push(i)}return e}function u(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push(n);return e}function h(t,e){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;const n=t.toString();if(n!==e.toString())return!1;switch(n){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e}const a="[object Array]"===n;if(!a){if("object"!=typeof t||"object"!=typeof e)return!1;const n=t.constructor,a=e.constructor;if(n!==a&&!("function"==typeof n&&n instanceof n&&"function"==typeof a&&a instanceof a)&&"constructor"in t&&"constructor"in e)return!1}const i=[],s=[];let r=i.length;for(;r--;)if(i[r]===t)return s[r]===e;if(i.push(t),s.push(e),a){if(r=t.length,r!==e.length)return!1;for(;r--;)if(!h(t[r],e[r]))return!1}else{let n,a=u(t);if(r=a.length,u(e).length!==r)return!1;for(;r--;)if(n=a[r],!e.hasOwnProperty(n)||!h(t[n],e[n]))return!1}return i.pop(),s.pop(),!0}},2658:function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return u}));var a=n(2770),i=n(2811),s=n(2939),r=n(2654),o=n(2642),l=n(3187);const c={eu:{su:"ab.storage.userId",Jo:"ab.storage.deviceId",Sh:"ab.storage.sessionId"},q:{Sa:"ab.test",Ta:"ab.storage.events",Ia:"ab.storage.attributes",Ka:"ab.storage.attributes.anonymous_user",Yo:"ab.storage.device",ha:"ab.storage.sdk_metadata",ca:"ab.storage.session_id_for_cached_metadata",Sn:"ab.storage.pushToken",ei:"ab.storage.newsFeed",hi:"ab.storage.lastNewsFeedRefresh",P:"ab.storage.cardImpressions",hl:"ab.storage.serverConfig",Ya:"ab.storage.triggers",Da:"ab.storage.triggers.ts",bh:"ab.storage.messagingSessionStart",Yt:"ab.storage.cc",vs:"ab.storage.ccLastFullSync",ys:"ab.storage.ccLastCardUpdated",$:"ab.storage.ccClicks",O:"ab.storage.ccImpressions",K:"ab.storage.ccDismissals",Ga:"ab.storage.lastDisplayedTriggerTimesById",Na:"ab.storage.lastDisplayedTriggerTime",va:"ab.storage.triggerFireInstancesById",Qn:"ab.storage.signature",As:"ab.storage.brazeSyncRetryCount",_s:"ab.storage.sdkVersion",ze:"ab.storage.ff",Ce:"ab.storage.ffLastRefreshAt"},ae:"ab.optOut"};class u{constructor(t,e){this.Ma=t,this.Ca=e}ru(t,e){let n=e;null!=e&&e instanceof s.a&&(n=e.ss()),this.Ma.store(t,n)}ya(t){const e=this.tu(t);null!=e&&(e.Ch=(new Date).valueOf(),this.ru(t,e))}tu(t){return s.a.jn(this.Ma.lr(t))}Hh(t){this.Ma.remove(t)}bo(t){if(null==t||0===t.length)return!1;Object(r.b)(t)||(t=[t]);let e=this.Ca.lr(c.q.Ta);null!=e&&Object(r.b)(e)||(e=[]);for(let n=0;n<t.length;n++)e.push(t[n].ss());return this.Ca.store(c.q.Ta,e)}Nh(t){return null!=t&&this.bo([t])}Ua(){let t=this.Ca.lr(c.q.Ta);this.Ca.remove(c.q.Ta),null==t&&(t=[]);const e=[];let n=!1,a=null;if(Object(r.b)(t))for(let n=0;n<t.length;n++)i.a.Fa(t[n])?e.push(i.a.jn(t[n])):a=n;else n=!0;if(n||null!=a){let s="Stored events could not be deserialized as Events";n&&(s+=", was "+Object.prototype.toString.call(t)+" not an array"),null!=a&&(s+=", value at index "+a+" does not look like an event"),s+=", serialized values were of type "+typeof t+": "+JSON.stringify(t),e.push(new i.a(null,o.a.A.qs,(new Date).valueOf(),null,{e:s}))}return e}B(t,e){return!!Object(r.g)(c.q,t,"StorageManager cannot store object.","STORAGE_KEYS.OBJECTS")&&this.Ca.store(t,e)}I(t){return!!Object(r.g)(c.q,t,"StorageManager cannot retrieve object.","STORAGE_KEYS.OBJECTS")&&this.Ca.lr(t)}Xs(t){return!!Object(r.g)(c.q,t,"StorageManager cannot remove object.","STORAGE_KEYS.OBJECTS")&&(this.Ca.remove(t),!0)}clearData(){const t=Object(r.f)(c.eu),e=Object(r.f)(c.q);for(let e=0;e<t.length;e++){const n=t[e];this.Ma.remove(c.eu[n])}for(let t=0;t<e.length;t++){const n=e[t];this.Ca.remove(c.q[n])}}La(t){return t||c.q.Ka}za(t){let e=this.Ca.lr(c.q.Ia);null==e&&(e={});const n=this.La(t[l.a.On]);for(let a in t)a===l.a.On||null!=e[n]&&null!=e[n][a]||this.mu(t[l.a.On],a,t[a])}mu(t,e,n){let a=this.Ca.lr(c.q.Ia);null==a&&(a={});const i=this.La(t);let s=a[i];if(null==s&&(s={},null!=t&&(s[l.a.On]=t)),e===l.a.lu){null==s[e]&&(s[e]={});for(let t in n)s[e][t]=n[t]}else s[e]=n;return a[i]=s,this.Ca.store(c.q.Ia,a)}Pa(){const t=this.Ca.lr(c.q.Ia);this.Ca.remove(c.q.Ia);const e=[];for(let n in t)null!=t[n]&&e.push(t[n]);return e}ou(t){const e=this.Ca.lr(c.q.Ia);if(null!=e){const n=this.La(null),a=e[n];null!=a&&(e[n]=void 0,this.Ca.store(c.q.Ia,e),a[l.a.On]=t,this.za(a))}const n=this.tu(c.eu.Sh);let a=null;null!=n&&(a=n.iu);const i=this.Ua();if(null!=i)for(let e=0;e<i.length;e++){const n=i[e];null==n.userId&&n.sessionId==a&&(n.userId=t),this.Nh(n)}}xa(){return this.Ca.Ja}}u._a=class{constructor(t){this._r=t,this.Ja=a.a.ka()?3:10}Va(t){return t+"."+this._r}store(t,e){const n={v:e};try{return localStorage.setItem(this.Va(t),JSON.stringify(n)),!0}catch(t){return o.a.D.info("Storage failure: "+t.message),!1}}lr(t){try{const e=JSON.parse(localStorage.getItem(this.Va(t)));return null==e?null:e.v}catch(t){return o.a.D.info("Storage retrieval failure: "+t.message),null}}remove(t){try{localStorage.removeItem(this.Va(t))}catch(t){return o.a.D.info("Storage removal failure: "+t.message),!1}}},u.ne=class{constructor(t,e){this._r=t,this.Qa=this.Ha(),this.Wa=576e3,this.Xa=!!e}Va(t){return null!=this._r?t+"."+this._r:t}Ha(){let t=0,e=document.location.hostname;const n=e.split("."),a="ab._gd";for(;t<n.length-1&&-1===document.cookie.indexOf(a+"="+a);)t++,e="."+n.slice(-1-t).join("."),document.cookie=a+"="+a+";domain="+e+";";return document.cookie=a+"=;expires="+new Date(0).toGMTString()+";domain="+e+";",e}ie(){const t=new Date;return t.setTime(t.getTime()+60*this.Wa*1e3),t.getFullYear()}Za(){const t=Object(r.h)(c.eu),e=document.cookie.split(";");for(let n=0;n<e.length;n++){let a=e[n];for(;" "===a.charAt(0);)a=a.substring(1);let i=!1;for(let e=0;e<t.length;e++)if(0===a.indexOf(t[e])){i=!0;break}if(i){const t=a.split("=")[0];-1===t.indexOf("."+this._r)&&this.$a(t)}}}store(t,e){this.Za();const n=new Date;n.setTime(n.getTime()+60*this.Wa*1e3);const a="expires="+n.toUTCString(),i="domain="+this.Qa;let s;s=this.Xa?e:encodeURIComponent(JSON.stringify(e));const r=this.Va(t)+"="+s+";"+a+";"+i+";path=/";return r.length>=4093?(o.a.D.info("Storage failure: string is "+r.length+" chars which is too large to store as a cookie."),!1):(document.cookie=r,!0)}lr(t){const e=[],n=this.Va(t)+"=",a=document.cookie.split(";");for(let i=0;i<a.length;i++){let s=a[i];for(;" "===s.charAt(0);)s=s.substring(1);if(0===s.indexOf(n))try{let t;t=this.Xa?s.substring(n.length,s.length):JSON.parse(decodeURIComponent(s.substring(n.length,s.length))),e.push(t)}catch(e){return o.a.D.info("Storage retrieval failure: "+e.message),this.remove(t),null}}return e.length>0?e[e.length-1]:null}remove(t){this.$a(this.Va(t))}$a(t){const e=t+"=;expires="+new Date(0).toGMTString();document.cookie=e,document.cookie=e+";path=/";const n=e+";domain="+this.Qa;document.cookie=n,document.cookie=n+";path=/"}},u.Oa=class{constructor(){this.El={},this.Sl=5242880,this.Ja=3}store(t,e){const n={value:e},a=this._l(e);return a>this.Sl?(o.a.D.info("Storage failure: object is â‰ˆ"+a+" bytes which is greater than the max of "+this.Sl),!1):(this.El[t]=n,!0)}_l(t){const e=[],n=[t];let a=0;for(;n.length;){const t=n.pop();if("boolean"==typeof t)a+=4;else if("string"==typeof t)a+=2*t.length;else if("number"==typeof t)a+=8;else if("object"==typeof t&&-1===e.indexOf(t)){e.push(t);for(let e in t)n.push(t[e])}}return a}lr(t){const e=this.El[t];return null==e?null:e.value}remove(t){this.El[t]=null}},u.wa=class{constructor(t,e,n){this.Tl=[],e&&this.Tl.push(new u.ne(t)),n&&this.Tl.push(new u._a(t)),this.Tl.push(new u.Oa(t))}store(t,e){let n=!0;for(let a=0;a<this.Tl.length;a++)n=this.Tl[a].store(t,e)&&n;return n}lr(t){for(let e=0;e<this.Tl.length;e++){const n=this.Tl[e].lr(t);if(null!=n)return n}return null}remove(t){for(let e=0;e<this.Tl.length;e++)this.Tl[e].remove(t)}}},2667:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var a=n(2641),i=n(2770),s=n(2766),r=n(2885),o=n(2681);class l{constructor(t,e,n,a,i,s,r,c,u,h,d,b,p,f,g,m,v,w,x,y,S,A,k,O,E,D,N,C,T){this.message=t,this.messageAlignment=e||l.TextAlignment.CENTER,this.duration=h||5e3,this.slideFrom=n||l.SlideFrom.BOTTOM,this.extras=a||{},this.triggerId=i,this.clickAction=s||l.ClickAction.NONE,this.uri=r,this.openTarget=c||l.OpenTarget.NONE,this.dismissType=u||l.DismissType.AUTO_DISMISS,this.icon=d,this.imageUrl=b,this.imageStyle=p||l.ImageStyle.TOP,this.iconColor=f||l.Ji.Hi,this.iconBackgroundColor=g||l.Ji.Ci,this.backgroundColor=m||l.Ji.Hi,this.textColor=v||l.Ji.Li,this.closeButtonColor=w||l.Ji.Oi,this.animateIn=x,null==this.animateIn&&(this.animateIn=!0),this.animateOut=y,null==this.animateOut&&(this.animateOut=!0),this.header=S,this.headerAlignment=A||l.TextAlignment.CENTER,this.headerTextColor=k||l.Ji.Li,this.frameColor=O||l.Ji.Ri,this.buttons=E||[],this.cropType=D||l.CropType.FIT_CENTER,this.orientation=N,this.htmlId=C,this.css=T,this.isControl=!1,this.Pi=!1,this.nl=!1,this.Ui=!1,this.lt=new o.a,this.Wi=new o.a}subscribeToClickedEvent(t){return this.lt.ut(t)}subscribeToDismissedEvent(t){return this.Wi.ut(t)}removeSubscription(t){this.lt.removeSubscription(t),this.Wi.removeSubscription(t)}removeAllSubscriptions(){this.lt.removeAllSubscriptions(),this.Wi.removeAllSubscriptions()}closeMessage(){this.on(this.mn)}Ie(){return!0}ll(){return this.Ie()}an(){return null!=this.htmlId&&this.htmlId.length>4}sn(){return this.an()&&null!=this.css&&this.css.length>0}rn(){if(this.an()&&this.sn())return this.htmlId+"-css"}R(){return!this.Pi&&(this.Pi=!0,!0)}Cr(){return this.Pi}k(){return!this.nl&&(this.nl=!0,this.lt.St(),!0)}J(){return!this.Ui&&(this.Ui=!0,this.Wi.St(),!0)}Ki(t){if(t&&t.parentNode){let e=t.closest(".ab-iam-root");if(null==e&&(e=t),this.Ie()&&null!=e.parentNode){const t=e.parentNode.classList;t&&t.contains(l.Yi)&&t.remove(l.Yi),document.body.removeEventListener("touchmove",l.Xi)}e.className=e.className.replace(l.Vi,l.Qi)}return this.animateOut}on(t,e){if(null==t)return;let n;this.mn=null,n=-1===t.className.indexOf("ab-in-app-message")?t.getElementsByClassName("ab-in-app-message")[0]:t;let a=!1;n&&(a=this.Ki(n));const s=document.body;if(null!=s)var r=s.scrollTop;const o=()=>{if(t&&t.parentNode){let e=t.closest(".ab-iam-root");null==e&&(e=t),e.parentNode&&e.parentNode.removeChild(e)}if(null!=this.rn()){const t=document.getElementById(this.rn());t&&t.parentNode&&t.parentNode.removeChild(t)}null!=s&&"Safari"===i.a.browser&&(s.scrollTop=r),e?e():this.J()};a?setTimeout(o,l.Zi):o(),this.Le&&this.Le.focus()}Oe(){return document.createTextNode(this.message)}Je(t){let e="";this.message||this.header||!this.Ie()||(e="Modal Image"),t.setAttribute("alt",e)}static Xi(t){t.targetTouches&&t.targetTouches.length>1||t.target.classList&&t.target.classList.contains("ab-message-text")&&t.target.scrollHeight>t.target.clientHeight||document.querySelector(`.${l.Yi}`)&&t.preventDefault()}th(t){this.Ie()&&null!=t.parentNode&&this.orientation!==l.Orientation.LANDSCAPE&&(null!=t.parentNode.classList&&t.parentNode.classList.add(l.Yi),document.body.addEventListener("touchmove",l.Xi,!!Object(s.h)()&&{passive:!1})),t.className+=" "+l.Vi}static sh(t){if(t.keyCode===r.a.ih&&!a.b.nn(a.a.eh)&&document.querySelectorAll(".ab-modal-interactions").length>0){const t=document.getElementsByClassName("ab-html-message");let e=!1;for(let n=0;n<t.length;n++){const a=t[n].contentWindow.document.getElementsByClassName("ab-programmatic-close-button")[0];null!=a&&(Object(s.f)(a),e=!0)}if(!e){const t=document.querySelectorAll(".ab-modal-interactions > .ab-close-button")[0];null!=t&&Object(s.f)(t)}}}hh(){this.nh||a.b.nn(a.a.eh)||(document.addEventListener("keydown",l.sh,!1),a.b.rh((()=>{document.removeEventListener("keydown",l.sh)})),this.nh=!0)}}l.Ji={Li:4281545523,Hi:4294967295,Ci:4278219733,oh:4293914607,lh:4283782485,Ri:3224580915,Oi:4288387995},l.Ge={Eh:"hd",Ee:"ias",uh:"of",Th:"do",Gi:"umt",$i:"tf",ah:"te"},l.SlideFrom={TOP:"TOP",BOTTOM:"BOTTOM"},l.ClickAction={NEWS_FEED:"NEWS_FEED",URI:"URI",NONE:"NONE"},l.DismissType={AUTO_DISMISS:"AUTO_DISMISS",MANUAL:"SWIPE"},l.OpenTarget={NONE:"NONE",BLANK:"BLANK"},l.ImageStyle={TOP:"TOP",GRAPHIC:"GRAPHIC"},l.Orientation={PORTRAIT:"PORTRAIT",LANDSCAPE:"LANDSCAPE"},l.TextAlignment={START:"START",CENTER:"CENTER",END:"END"},l.CropType={CENTER_CROP:"CENTER_CROP",FIT_CENTER:"FIT_CENTER"},l.es={mh:"SLIDEUP",Ih:"MODAL",Ye:"MODAL_STYLED",Tr:"FULL",ul:"WEB_HTML",cn:"HTML"},l.Zi=500,l.Ah=200,l.Vi="ab-show",l.Qi="ab-hide",l.Yi="ab-pause-scrolling"},2676:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return r})),n.d(e,"h",(function(){return o})),n.d(e,"d",(function(){return l})),n.d(e,"g",(function(){return c})),n.d(e,"e",(function(){return u})),n.d(e,"f",(function(){return h}));var a=n(2654);function i(t,e){let n=t/1e3;return e&&(n=Math.floor(n)),n}function s(t){return 1e3*t}function r(t){const e=parseInt(t);return null==t||isNaN(e)?null:new Date(1e3*e)}function o(t){return null!=t&&Object(a.c)(t)?t.toISOString().replace(/\.[0-9]{3}Z$/,""):t}function l(t){return null==t||""===t?null:new Date(t)}function c(t){return null==t||""===t?(new Date).valueOf():t}function u(t){return((new Date).valueOf()-t.valueOf())/1e3}function h(t){return(t.valueOf()-(new Date).valueOf())/1e3}},2681:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var a=n(2642);class i{constructor(){this.ni={}}ut(t){if("function"!=typeof t)return null;const e=a.a.it.nt();return this.ni[e]=t,e}removeSubscription(t){delete this.ni[t]}removeAllSubscriptions(){this.ni={}}bu(){return Object.keys(this.ni).length}St(t){const e=[];for(let n in this.ni)e.push(this.ni[n](t));return e}}},2707:function(t,e,n){"use strict";n.d(e,"a",(function(){return u})),n.d(e,"g",(function(){return p})),n.d(e,"f",(function(){return f})),n.d(e,"e",(function(){return g})),n.d(e,"d",(function(){return m})),n.d(e,"b",(function(){return v})),n.d(e,"c",(function(){return w}));var a=n(2654),i=n(2940),s=n(2642),r=n(2676),o=n(2941);const l=/^[^\x00-\x1F\x22]+$/,c=new RegExp(/^.+@.+\..+$/),u=/^brazeActions:\/\/v\d+\//;function h(t){const e=typeof t;return null==t||"number"===e||"boolean"===e||Object(a.c)(t)||"string"===e}function d(t,e){if(Object(a.b)(t)&&Object(a.b)(e)){for(let n=0;n<t.length&&n<e.length;n++)if(Object(a.c)(t[n])&&(e[n]=Object(r.h)(t[n])),!d(t[n],e[n]))return!1}else{if(!Object(a.e)(t))return h(t);for(const n of Object(a.f)(t))if(Object(a.c)(t[n])&&(e[n]=Object(r.h)(t[n])),!d(t[n],e[n]))return!1}return!0}function b(t,e,n,i){let r;return r=Object(a.e)(t)||Object(a.b)(t)?d(t,e):h(t),r||s.a.D.error(`Cannot ${n} because ${i} "${t}" is invalid.`),r}function p(t,e,n,a){const i="string"==typeof t||null===t&&a;return i||s.a.D.error(`Cannot ${e} because ${n} "${t}" is invalid.`),i}function f(t,e,n){const a=null!=t&&"string"==typeof t&&(""===t||t.match(l));return a||s.a.D.error(`Cannot ${e} because ${n} "${t}" is invalid.`),a}function g(t,e,n,o,l){if(null==t&&(t={}),"object"!=typeof t||Object(a.b)(t))return s.a.D.error(`${e} requires that ${n} be an object. Ignoring ${l}.`),[!1,null];const c=JSON.stringify(t);if(Object(i.b)(c)>51200)return s.a.D.error(`Could not ${o} because ${n} was greater than the max size of 50KB.`),[!1,null];let u;try{u=JSON.parse(c)}catch(t){return s.a.D.error(`Could not ${o} because ${n} did not contain valid JSON.`),[!1,null]}for(let e in t){if(!f(e,o,`the ${l} property name`))return[!1,null];const n=t[e];if(null!=n){if(Object(a.c)(n)&&(u[e]=Object(r.h)(n)),!b(n,u[e],o,`the ${l} property "${e}"`))return[!1,null]}else delete t[e],delete u[e]}return[!0,u]}function m(t){return"string"==typeof t&&null!=t.toLowerCase().match(c)}function v(t){if(!(o.a.properties.type in t))return!1;switch(t[o.a.properties.type]){case o.a.types.ue:if(o.a.properties.me in t)return!0;break;case o.a.types.logCustomEvent:case o.a.types.setEmailNotificationSubscriptionType:case o.a.types.setPushNotificationSubscriptionType:case o.a.types.setCustomUserAttribute:case o.a.types.addToSubscriptionGroup:case o.a.types.removeFromSubscriptionGroup:case o.a.types.addToCustomAttributeArray:case o.a.types.removeFromCustomAttributeArray:case o.a.types.de:case o.a.types.pe:if(o.a.properties.fe in t)return!0;break;case o.a.types.requestPushPermission:return!0;default:return!1}return!1}function w(t){let e=!1;return Object.keys(o.a.types).forEach((n=>{o.a.types[n]!==t.toString()||(e=!0)})),e}},2730:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"d",(function(){return i})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return r}));const a=100,i="inAppMessage must be an InAppMessage object",s="must be a Card object",r=500},2731:function(t,e,n){"use strict";var a=n(2642),i=n(2641),s=n(2811),r=n(2942);const o={G:(t,e,n)=>{const o=new r.a,l=i.b.g();if(!l)return a.a.D.info(`Not logging event with type "${t}" because the current session ID could not be found.`),o;const c=l.mo();return o.ve.push(new s.a(n||i.b.p().getUserId(),t,(new Date).valueOf(),c,e)),o.S=i.b.l().bo(o.ve),o}};e.a=o},2732:function(t,e,n){"use strict";e.a={OPEN:"open",Rr:"purchase",vr:"push_click",be:"custom_event",Br:"iam_click",ks:"test"}},2733:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var a=n(2667);class i extends a.a{constructor(t,e,n,i,s,r,o,l,c,u,h){super(t,null,null,e,n,null,null,null,i=i||a.a.DismissType.MANUAL,s,null,null,null,null,null,null,null,null,r,o,null,null,null,l,void 0,void 0,void 0,c,u),this.messageFields=h}ll(){return!1}k(t){if(this.un===a.a.es.ul){if(this.nl)return!1;this.nl=!0}return this.lt.St(t),!0}}i.es=a.a.es.ul},2735:function(t,e,n){"use strict";n.d(e,"c",(function(){return a.c})),n.d(e,"a",(function(){return a.a})),n.d(e,"b",(function(){return a.b})),n.d(e,"d",(function(){return a.d})),n.d(e,"e",(function(){return a.e})),n.d(e,"f",(function(){return i.a})),n.d(e,"g",(function(){return s.a})),n.d(e,"h",(function(){return r.a})),n.d(e,"j",(function(){return o})),n.d(e,"i",(function(){return l}));var a=n(2809),i=n(3089),s=n(3192),r=n(3091);function o(t){return Object(r.a)(t,!0)}function l(t){return Object(i.a)(t,!0)}},2738:function(t,e,n){"use strict";var a=n(2943),i=n(2641),s=n(2813),r=n(2733),o=n(2667),l=n(2886),c=n(2731),u=n(3191),h=n(3090),d=n(2942),b=n(2642),p=n(2681),f=n(3220),g=n(2654),m=n(2707),v=n(2941),w=n(2812);class x{constructor(t,e,n,a){this.vt=t,this.j=e,this.h=n,this.v=a,this.ni=new p.a,i.b.jt(this.ni),this.li=1e3,this.ui=6e4}pi(){return this.ni}mi(t){return this.ni.ut(t)}gi(){return this.ci}fi(t){this.ci=t}di(t,e){if(!Object(g.g)(o.a.Ge,e,`${e} is not a valid in-app message display failure`,"InAppMessage.DisplayFailures"))return new d.a;const n={trigger_ids:[t],error_code:e};return c.a.G(b.a.A.vi,n)}G(t,e,n,a){const i=new d.a;let o;if(t instanceof s.a)o={trigger_ids:[t.triggerId]};else{if(e===b.a.A.yi||t instanceof r.a&&e===b.a.A.ji){if(!t.k(a))return b.a.D.info("This in-app message has already received a click. Ignoring analytics event."),i}else if(e===b.a.A.bi&&!t.R())return b.a.D.info("This in-app message has already received an impression. Ignoring analytics event."),i;o=this.Ii(t)}return null==o?i:(null!=n&&(o.bid=n),c.a.G(e,o))}Ai(t,e){const n=new d.a;if(!t.k())return b.a.D.info("This in-app message button has already received a click. Ignoring analytics event."),n;const a=this.Ii(e);return null==a?n:t.id===l.a.Mi?(b.a.D.info("This in-app message button does not have a tracking id. Not logging event to Braze servers."),n):(null!=t.id&&(a.bid=t.id),c.a.G(b.a.A.ji,a))}zi(t){if(!(t instanceof o.a))return;const e=t=>{const e=Object(v.e)(t);return Object(v.d)(e)?Object(v.f)(v.b.Di,"In-App Message"):Object(v.c)(e)&&!w.a.Ti()?Object(v.f)(v.b._i,"In-App Message"):void 0},n=t.buttons;let a;for(const t of n)if(t.clickAction===o.a.ClickAction.URI&&m.a.test(t.uri)&&(a=e(t.uri),a))return a;return t.clickAction===o.a.ClickAction.URI&&m.a.test(t.uri)?e(t.uri):void 0}ki(t,e,n,i){let s=this.vt.wi(!1,!1);s=this.vt.Ps(s),s.template={trigger_id:t.triggerId,trigger_event_type:e},null!=n&&(s.template.data=n.Si());const r=this.vt.Bs(s);this.vt.Gs(s,(()=>{a.a.Hs({url:`${this.vt.Ks()}/template/`,data:s,headers:r,S:async e=>{if(!this.vt.Os(s,e,r))return this.di(t.triggerId,o.a.Ge.$i),void("function"==typeof t.Bi&&t.Bi());if(this.vt.Qs(),null==e||null==e.templated_message)return void this.di(t.triggerId,o.a.Ge.$i);const n=e.templated_message;if(n.type!==f.a.Fi.Ei)return void this.di(t.triggerId,o.a.Ge.Gi);const a=Object(u.a)(n.data);if(null==a)return void this.di(t.triggerId,o.a.Ge.Gi);let i=this.zi(a);if(i)return b.a.D.error(i),void("function"==typeof t.Bi&&t.Bi());"function"==typeof t.Ni?t.Ni(a):this.di(t.triggerId,o.a.Ge.$i)},error:a=>{let s=`getting user personalization for message ${t.triggerId}`;if((new Date).valueOf()-t.qi>t.xi)this.di(t.triggerId,o.a.Ge.$i);else{const a=Math.min(t.xi,this.ui),r=this.li;null==i&&(i=r);const o=Math.min(a,Object(h.a)(r,3*i));s+=`. Retrying in ${o} ms`,setTimeout((()=>{this.ki(t,e,n,o)}),o)}this.vt.Vs(a,s)}})}))}Ii(t){if(null==t.triggerId)return b.a.D.info("The in-app message has no analytics id. Not logging event to Braze servers."),null;const e={};return null!=t.triggerId&&(e.trigger_ids=[t.triggerId]),e}}const y={Ze:null,t:!1,m:()=>(y.o(),y.Ze||(y.Ze=new x(i.b.nr(),i.b.g(),i.b.l(),i.b.p())),y.Ze),o:()=>{y.t||(i.b.u(y),y.t=!0)},destroy:()=>{y.Ze=null,y.t=!1}};e.a=y},2765:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return i}));const a={PORTRAIT:0,LANDSCAPE:1};const i={openUri:function(t,e,n){e||null!=n&&n.metaKey?window.open(t):window.location=t},so:function(){return screen.width<=600},io:function(){if("orientation"in window)return 90===Math.abs(window.orientation)||270===window.orientation?a.LANDSCAPE:a.PORTRAIT;if("screen"in window){let t=window.screen.orientation||screen.mozOrientation||screen.msOrientation;return null!=t&&"object"==typeof t&&(t=t.type),"landscape-primary"===t||"landscape-secondary"===t?a.LANDSCAPE:a.PORTRAIT}return a.PORTRAIT},yn:function(){return window.location.href}}},2766:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return i})),n.d(e,"h",(function(){return s})),n.d(e,"c",(function(){return r})),n.d(e,"i",(function(){return o})),n.d(e,"d",(function(){return l})),n.d(e,"f",(function(){return c})),n.d(e,"g",(function(){return u})),n.d(e,"e",(function(){return h}));const a={vu:null,eo:function(t,e,n,a){if(null==t)return!1;e=e||!1,n=n||!1;const i=t.getBoundingClientRect();return null!=i&&(i.top>=0&&i.top<=(window.innerHeight||document.documentElement.clientHeight)||!e)&&(i.left>=0||!a)&&(i.bottom>=0&&i.bottom<=(window.innerHeight||document.documentElement.clientHeight)||!n)&&(i.right<=(window.innerWidth||document.documentElement.clientWidth)||!a)}},i={We:"up",Xe:"down",ot:"left",et:"right"};function s(){if(null==a.vu){a.vu=!1;try{const t=Object.defineProperty({},"passive",{get:()=>{a.vu=!0}});window.addEventListener("testPassive",null,t),window.removeEventListener("testPassive",null,t)}catch(t){}}return a.vu}function r(t,e,n){t.addEventListener(e,n,!!s()&&{passive:!0})}function o(t){return a.eo(t,!0,!1,!1)}function l(t){return a.eo(t,!1,!0,!1)}function c(t){if(t.onclick){const e=document.createEvent("MouseEvents");e.initEvent("click",!0,!0),t.onclick.apply(t,[e])}}function u(t,e,n){let a=null,s=null;r(t,"touchstart",(t=>{a=t.touches[0].clientX,s=t.touches[0].clientY})),r(t,"touchmove",(r=>{if(null==a||null==s)return;const o=a-r.touches[0].clientX,l=s-r.touches[0].clientY;Math.abs(o)>Math.abs(l)&&Math.abs(o)>=25?((o>0&&e===i.ot||o<0&&e===i.et)&&n(r),a=null,s=null):Math.abs(l)>=25&&((l>0&&e===i.We&&t.scrollTop===t.scrollHeight-t.offsetHeight||l<0&&e===i.Xe&&0===t.scrollTop)&&n(r),a=null,s=null)}))}function h(t,e,n){const a="http://www.w3.org/2000/svg",i=document.createElementNS(a,"svg");i.setAttribute("viewBox",t),i.setAttribute("xmlns",a);const s=document.createElementNS(a,"path");return s.setAttribute("d",e),null!=n&&s.setAttribute("fill",n),i.appendChild(s),i}},2767:function(t,e,n){"use strict";var a=n(3187);n.d(e,"a",(function(){return a.a}))},2770:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var a=n(2654);class i{constructor(){}tf(){}ef(){}Zo(t){}static rf(t,e){if(t&&e)if(t=t.toLowerCase(),Object(a.b)(e.if)){for(let n=0;n<e.if.length;n++)if(-1!==t.indexOf(e.if[n].toLowerCase()))return e.identity}else if(-1!==t.indexOf(e.if.toLowerCase()))return e.identity}}var s=n(2938);class r extends i{constructor(){if(super(),this.userAgentData=navigator.userAgentData,this.userAgentData){const t=this.ic();this.browser=t.browser||"Unknown Browser",this.version=t.version||"Unknown Version"}}tf(){return this.browser}ef(){return this.version}Zo(t){if(this.OS)return Promise.resolve(this.OS);const e=e=>{for(let n=0;n<t.length;n++){const a=r.rf(e,t[n]);if(a)return this.OS=a,this.OS}return e};return this.userAgentData.platform?Promise.resolve(e(this.userAgentData.platform)):this.nc().then((t=>e(t.platform))).catch((()=>navigator.platform))}ic(){const t={},e=this.userAgentData.brands;if(e&&e.length)for(const n of e){const e=this.oc(s.a),a=n.brand.match(e);if(a&&a.length>0){t.browser=a[0],t.version=n.version;break}}return t}oc(t){const e=[];for(const n in t)t[n]!==s.a.Pg&&e.push(t[n]);return new RegExp("("+e.join("|")+")","i")}nc(){return this.userAgentData.getHighEntropyValues?this.userAgentData.getHighEntropyValues(["platform"]):Promise.reject()}}class o extends i{constructor(){super(),this.Su=o.Vu(navigator.userAgent||"")}tf(){return this.Su[0]||"Unknown Browser"}ef(){return this.Su[1]||"Unknown Version"}Zo(t){for(let e=0;e<t.length;e++){let n=t[e].string,a=o.rf(n,t[e]);if(a)return a===s.b.jg&&navigator.maxTouchPoints>1&&(a=s.b.ln),Promise.resolve(a)}return Promise.resolve(navigator.platform)}static Vu(t){let e,n=t.match(/(samsungbrowser|tizen|roku|konqueror|icab|crios|opera|ucbrowser|chrome|safari|firefox|camino|msie|trident(?=\/))\/?\s*(\.?\d+(\.\d+)*)/i)||[];if(/trident/i.test(n[1]))return e=/\brv[ :]+(\.?\d+(\.\d+)*)/g.exec(t)||[],[s.a.Pg,e[1]||""];if(-1!==t.indexOf("(Web0S; Linux/SmartTV)"))return["LG Smart TV",null];if(-1!==t.indexOf("CrKey"))return["Chromecast",null];if(-1!==t.indexOf("BRAVIA")||-1!==t.indexOf("SonyCEBrowser")||-1!==t.indexOf("SonyDTV"))return["Sony Smart TV",null];if(-1!==t.indexOf("PhilipsTV"))return["Philips Smart TV",null];if(t.match(/\b(Roku)\b/))return["Roku",null];if(t.match(/\bAFTM\b/))return["Amazon Fire Stick",null];if(n[1]===s.a.rE&&(e=t.match(/\b(OPR|Edge|EdgA|Edg|UCBrowser)\/(\.?\d+(\.\d+)*)/),null!=e))return e=e.slice(1),e[0]=e[0].replace("OPR",s.a.EE),e[0]=e[0].replace("EdgA",s.a.eE),"Edg"===e[0]&&(e[0]=s.a.eE),[e[0],e[1]];if(n[1]===s.a.kg&&(e=t.match(/\b(EdgiOS)\/(\.?\d+(\.\d+)*)/),null!=e))return e=e.slice(1),e[0]=e[0].replace("EdgiOS",s.a.eE),[e[0],e[1]];if(n=n[2]?[n[1],n[2]]:[null,null],n[0]===s.a.kg&&null!=(e=t.match(/version\/(\.?\d+(\.\d+)*)/i))&&n.splice(1,1,e[1]),null!=(e=t.match(/\b(UCBrowser)\/(\.?\d+(\.\d+)*)/))&&n.splice(1,1,e[2]),n[0]===s.a.EE&&null!=(e=t.match(/mini\/(\.?\d+(\.\d+)*)/i)))return["Opera Mini",e[1]||""];if(n[0]){const t=n[0].toLowerCase();"msie"===t&&(n[0]=s.a.Pg),"crios"===t&&(n[0]=s.a.rE),"tizen"===t&&(n[0]="Samsung Smart TV",n[1]=null),"samsungbrowser"===t&&(n[0]="Samsung Browser")}return n}}class l{constructor(){const t=navigator.userAgentData?r:o;this.Sg=new t,this.userAgent=navigator.userAgent,this.browser=this.Sg.tf(),this.version=this.Sg.ef(),this.Zo().then((t=>this.OS=t)),this.language=(navigator.userLanguage||navigator.language||navigator.browserLanguage||navigator.systemLanguage||"").toLowerCase(),this.Fo=l.Bg(this.userAgent)}Og(){return this.browser!==s.a.Pg||this.version>8}ka(){return this.browser===s.a.kg}Xo(){return this.OS||null}Zo(){return this.OS?Promise.resolve(this.OS):this.Sg.Zo(l.xg).then((t=>(this.OS=t,t)))}static Bg(t){t=t.toLowerCase();const e=["googlebot","bingbot","slurp","duckduckbot","baiduspider","yandex","facebookexternalhit","sogou","ia_archiver","https://github.com/prerender/prerender","aolbuild","bingpreview","msnbot","adsbot","mediapartners-google","teoma"];for(let n=0;n<e.length;n++)if(-1!==t.indexOf(e[n]))return!0;return!1}}l.xg=[{string:navigator.platform,if:"Win",identity:s.b.Dg},{string:navigator.platform,if:"Mac",identity:s.b.jg},{string:navigator.platform,if:"BlackBerry",identity:"BlackBerry"},{string:navigator.platform,if:"FreeBSD",identity:"FreeBSD"},{string:navigator.platform,if:"OpenBSD",identity:"OpenBSD"},{string:navigator.platform,if:"Nintendo",identity:"Nintendo"},{string:navigator.platform,if:"SunOS",identity:"SunOS"},{string:navigator.platform,if:"PlayStation",identity:"PlayStation"},{string:navigator.platform,if:"X11",identity:"X11"},{string:navigator.userAgent,if:["iPhone","iPad","iPod"],identity:s.b.ln},{string:navigator.platform,if:"Pike v",identity:s.b.ln},{string:navigator.userAgent,if:["Web0S"],identity:"WebOS"},{string:navigator.platform,if:["Linux armv7l","Android"],identity:s.b.Fg},{string:navigator.userAgent,if:["Android"],identity:s.b.Fg},{string:navigator.platform,if:"Linux",identity:"Linux"}];const c=new l},2771:function(t,e,n){"use strict";n.d(e,"a",(function(){return g}));var a=n(2738),i=n(2641),s=n(2884),r=n(3191),o=n(2811),l=n(2667),c=n(2654),u=n(2658);class h{constructor(t,e,n,a,i){this.triggerId=t,this.Ni=e,this.Bi=n,this.qi=a,this.xi=i}static fromJson(t,e,n,a,i){return null==t||null==t.trigger_id?null:new h(t.trigger_id,e,n,a,i)}}var d=n(3220),b=n(2732),p=n(2642);class f extends s.a{constructor(t,e,n,a,i){super(),this.tg=t,this.yt=e,this.h=n,this.si=a,this.ig=i,this.sg=[],this.eg=[],this.hg=null,this.og={},this.ng={},this.ag(),this.lg()}gg(){this.hg=this.h.I(u.a.q.Na)||this.hg,this.og=this.h.I(u.a.q.va)||this.og,this.ng=this.h.I(u.a.q.Ga)||this.ng;for(let t=0;t<this.cg.length;t++){const e=this.cg[t];null!=this.ng[e.id]&&e.ju(this.ng[e.id])}}ag(){this.fg=this.h.I(u.a.q.Da)||0;const t=this.h.I(u.a.q.Ya)||[],e=[];for(let n=0;n<t.length;n++)e.push(d.a.jn(t[n]));this.cg=e,this.gg()}lg(){const t=this,e=function(e,n,a,i,s){return function(){t.ug(e,n,a,i,s)}},n={};for(let t=0;t<this.cg.length;t++)n[this.cg[t].id]=this.cg[t];let a=!1;for(let t=0;t<this.cg.length;t++){const i=this.cg[t];if(null!=this.og[i.id]){const t=this.og[i.id],s=[];for(let a=0;a<t.length;a++){const r=t[a],l=i.wu(r.qi);if(l>0){let t,a;s.push(r),null!=r.dg&&(t=r.dg),null!=r.mg&&o.a.Fa(r.mg)&&(a=o.a.jn(r.mg));const u=[];if(Object(c.b)(r.pg))for(let t=0;t<r.pg.length;t++){const e=n[r.pg[t]];null!=e&&u.push(e)}this.eg.push(setTimeout(e(i,r.qi,t,a,u),l))}}this.og[i.id].length>s.length&&(this.og[i.id]=s,a=!0,0===this.og[i.id].length&&delete this.og[i.id])}}a&&this.h.B(u.a.q.va,this.og)}bg(){const t=[];for(let e=0;e<this.cg.length;e++)t.push(this.cg[e].ss());this.fg=(new Date).valueOf(),this.h.B(u.a.q.Ya,t),this.h.B(u.a.q.Da,this.fg)}Tg(){(this.h.I(u.a.q.Da)||0)>this.fg?this.ag():this.gg()}Rs(t){let e=!1;if(null!=t&&t.triggers){this.gg();const n={},a={};this.cg=[];for(let i=0;i<t.triggers.length;i++){const s=d.a.fromJson(t.triggers[i]);null!=this.ng[s.id]&&(s.ju(this.ng[s.id]),n[s.id]=this.ng[s.id]),null!=this.og[s.id]&&(a[s.id]=this.og[s.id]);for(let t=0;t<s.$h.length;t++)if(s.$h[t].ec(b.a.ks,null)){e=!0;break}null!=s&&this.cg.push(s)}Object(c.d)(this.ng,n)||(this.ng=n,this.h.B(u.a.q.Ga,this.ng)),Object(c.d)(this.og,a)||(this.og=a,this.h.B(u.a.q.va,this.og)),this.bg(),e&&(p.a.D.info("Trigger with test condition found, firing test."),this.je(b.a.ks)),this.je(b.a.OPEN);const i=this.sg;this.sg=[];for(let t=0;t<i.length;t++)this.je.apply(this,i[t])}}async ug(t,e,n,a,i){const s=a=>{this.gg();const i=(new Date).valueOf();if(!t.Eu(e))return!1===navigator.onLine&&t.type===d.a.Fi.Ei&&a.imageUrl?(p.a.D.info(`Not showing ${t.type} trigger action ${t.id} due to offline state.`),void this.ig.di(t.id,l.a.Ge.Th)):void(t.yu(i)&&this.yg(t,i,n)?0===this.yt.bu()?p.a.D.info(`Not displaying trigger ${t.id} because neither automaticallyShowInAppMessages() nor subscribeToInAppMessage() were called.`):(this.yt.St([a]),this.vg(t,i)):p.a.D.info(`Not displaying trigger ${t.id} because display time fell outside of the acceptable time window.`));t.type===d.a.Fi.Nu?this.ig.di(t.id,l.a.Ge.$i):this.ig.di(t.id,l.a.Ge.ah)},o=()=>{this.gg();const s=i.pop();if(null!=s)if(this.wg(s,e,n,a,i),s.Eu(e)){let t=`Server aborted in-app message display, but the timeout on fallback trigger ${s.id} has already elapsed.`;i.length>0&&(t+=" Continuing to fall back."),p.a.D.info(t),this.ig.di(s.id,l.a.Ge.ah),o()}else{p.a.D.info(`Server aborted in-app message display. Falling back to lower priority ${s.type} trigger action ${t.id}.`);const r=1e3*s.Zh-((new Date).valueOf()-e);r>0?this.eg.push(setTimeout((()=>{this.ug(s,e,n,a,i)}),r)):this.ug(s,e,n,a,i)}};switch(t.type){case d.a.Fi.Ei:const i=Object(r.a)(t.data);if(null==i){p.a.D.error(`Could not parse trigger data for trigger ${t.id}, ignoring.`),this.ig.di(t.id,l.a.Ge.Gi);break}let c=this.ig.zi(i);if(c){p.a.D.error(c),o();break}s(i);break;case d.a.Fi.Nu:const u=h.fromJson(t.data,s,o,e,t.xi);if(null==u){p.a.D.error(`Could not parse trigger data for trigger ${t.id}, ignoring.`),this.ig.di(t.id,l.a.Ge.Gi);break}this.ig.ki(u,n,a);break;default:p.a.D.error(`Trigger ${t.id} was of unexpected type ${t.type}, ignoring.`),this.ig.di(t.id,l.a.Ge.Gi)}}je(t,e,n){if(!Object(c.g)(b.a,t,"Cannot fire trigger action.","TriggerEvents"))return;if(this.si.Ml())return p.a.D.info("Trigger sync is currently in progress, awaiting sync completion before firing trigger event."),void this.sg.push(arguments);this.Tg();const a=(new Date).valueOf(),i=a-this.hg;let s=!0,r=!0;const o=[];for(let n=0;n<this.cg.length;n++){const i=this.cg[n],l=a+1e3*i.Zh;if(i.yu(l)&&(null==i.startTime||i.startTime<=a)&&(null==i.endTime||i.endTime>=a)){let n=!1;for(let a=0;a<i.$h.length;a++)if(i.$h[a].ec(t,e)){n=!0;break}n&&(s=!1,this.yg(i,l,t)&&(r=!1,o.push(i)))}}if(s)return void p.a.D.info(`Trigger event ${t} did not match any trigger conditions.`);if(r)return void p.a.D.info(`Ignoring ${t} trigger event because a trigger was displayed ${i/1e3}s ago.`);o.sort(((t,e)=>t.priority-e.priority));const l=o.pop();null!=l&&(p.a.D.info(`Firing ${l.type} trigger action ${l.id} from trigger event ${t}.`),this.wg(l,a,t,n,o),0===l.Zh?this.ug(l,a,t,n,o):this.eg.push(setTimeout((()=>{this.ug(l,a,t,n,o)}),1e3*l.Zh)))}changeUser(t){if(this.cg=[],this.h.Xs(u.a.q.Ya),!t){this.sg=[],this.hg=null,this.ng={},this.og={};for(let t=0;t<this.eg.length;t++)clearTimeout(this.eg[t]);this.eg=[],this.h.Xs(u.a.q.Na),this.h.Xs(u.a.q.Ga),this.h.Xs(u.a.q.va)}}clearData(){this.cg=[],this.hg=null,this.ng={},this.og={};for(let t=0;t<this.eg.length;t++)clearTimeout(this.eg[t]);this.eg=[]}yg(t,e,n){if(null==this.hg)return!0;if(n===b.a.ks)return p.a.D.info("Ignoring minimum interval between trigger because it is a test type."),!0;let a=t.Du;return null==a&&(a=this.tg),e-this.hg>=1e3*a}wg(t,e,n,a,i){this.gg(),this.og[t.id]=this.og[t.id]||[];const s={};let r;s.qi=e,s.dg=n,null!=a&&(r=a.ss()),s.mg=r;const o=[];for(let t=0;t<i.length;t++)o.push(i[t].id);s.pg=o,this.og[t.id].push(s),this.h.B(u.a.q.va,this.og)}vg(t,e){this.gg(),t.ju(e),this.hg=e,this.h.B(u.a.q.Na,e),this.ng[t.id]=e,this.h.B(u.a.q.Ga,this.ng)}}const g={t:!1,provider:null,er:()=>(g.init(),g.provider),rg:()=>{if(!g.provider){const t=i.b.nn(i.a.So);g.provider=new f(null!=t?t:30,a.a.m().pi(),i.b.l(),i.b.mr(),a.a.m()),i.b.ar(g.provider)}},init:()=>{g.t||(g.rg(),i.b.u(g),g.t=!0)},destroy:()=>{g.provider=null,g.t=!1}}},2809:function(t,e,n){"use strict";var a=n(2810);n.d(e,"c",(function(){return a.a}));var i=n(3183);n.d(e,"a",(function(){return i.a}));var s=n(3184);n.d(e,"b",(function(){return s.a}));var r=n(3185);n.d(e,"d",(function(){return r.a}));var o=n(3186);n.d(e,"e",(function(){return o.a}))},2810:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var a=n(2676),i=n(2730),s=n(2681);class r{constructor(t,e,n,a,i,s,r,o,l,c,u,h,d,b,p,f){this.id=t,this.viewed=e||!1,this.title=n||"",this.imageUrl=a,this.description=i||"",this.created=s||null,this.updated=r||null,this.categories=o||[],this.expiresAt=l||null,this.url=c,this.linkText=u,h=parseFloat(h),this.aspectRatio=isNaN(h)?null:h,this.extras=d,this.pinned=b||!1,this.dismissible=p||!1,this.dismissed=!1,this.clicked=f||!1,this.isControl=!1,this.test=!1,this.lt=null,this.Et=null}subscribeToClickedEvent(t){return this.Tt().ut(t)}subscribeToDismissedEvent(t){return this.It().ut(t)}removeSubscription(t){this.Tt().removeSubscription(t),this.It().removeSubscription(t)}removeAllSubscriptions(){this.Tt().removeAllSubscriptions(),this.It().removeAllSubscriptions()}dismissCard(){if(this.dismissible&&!this.dismissed){this.tt&&this.tt(this);var t=this.X;t&&(t.style.height=t.offsetHeight+"px",t.className=t.className+" ab-hide",setTimeout((function(){t&&t.parentNode&&(t.style.height="0",t.style.margin="0",setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),r.Nt))}),i.a))}}Tt(){return null==this.lt&&(this.lt=new s.a),this.lt}It(){return null==this.Et&&(this.Et=new s.a),this.Et}R(){this.viewed=!0}k(){this.viewed=!0,this.clicked=!0,this.Tt().St()}J(){return!(!this.dismissible||this.dismissed||(this.dismissed=!0,this.It().St(),0))}ct(t){if(null==t||t[r.At.ns]!==this.id)return!0;if(t[r.At.Dt])return!1;if(null!=t[r.At.us]&&null!=this.updated&&t[r.At.us]<Object(a.a)(this.updated.valueOf()))return!0;if(t[r.At.ls]&&!this.viewed&&(this.viewed=!0),t[r.At.gs]&&!this.clicked&&(this.clicked=t[r.At.gs]),null!=t[r.At.ht]&&(this.title=t[r.At.ht]),null!=t[r.At.os]&&(this.imageUrl=t[r.At.os]),null!=t[r.At.rt]&&(this.description=t[r.At.rt]),null!=t[r.At.us]){const e=Object(a.c)(t[r.At.us]);null!=e&&(this.updated=e)}if(null!=t[r.At.ps]){let e;e=t[r.At.ps]===r.Ct?null:Object(a.c)(t[r.At.ps]),this.expiresAt=e}if(null!=t[r.At.URL]&&(this.url=t[r.At.URL]),null!=t[r.At.bs]&&(this.linkText=t[r.At.bs]),null!=t[r.At.fs]){const e=parseFloat(t[r.At.fs]);this.aspectRatio=isNaN(e)?null:e}return null!=t[r.At.xs]&&(this.extras=t[r.At.xs]),null!=t[r.At.js]&&(this.pinned=t[r.At.js]),null!=t[r.At.zs]&&(this.dismissible=t[r.At.zs]),null!=t[r.At.ks]&&(this.test=t[r.At.ks]),!0}}r.Ct=-1,r.es={st:"captioned_image",dt:"text_announcement",Rt:"short_news",rs:"banner_image",_t:"control"},r.At={ns:"id",ls:"v",zs:"db",Dt:"r",us:"ca",js:"p",ps:"ea",xs:"e",ts:"tp",os:"i",ht:"tt",rt:"ds",URL:"u",bs:"dm",fs:"ar",gs:"cl",ks:"t"},r.hs={ns:"id",ls:"v",zs:"db",cs:"cr",us:"ca",js:"p",ds:"t",ps:"ea",xs:"e",ts:"tp",os:"i",ht:"tt",rt:"ds",URL:"u",bs:"dm",fs:"ar",gs:"cl",ks:"s"},r.Lt={Ot:"ADVERTISING",bt:"ANNOUNCEMENTS",ft:"NEWS",Pt:"SOCIAL"},r.Nt=400},2811:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var a=n(2654),i=n(2676);class s{constructor(t,e,n,a,s){this.userId=t,this.type=e,this.time=Object(i.g)(n),this.sessionId=a,this.data=s}Si(){const t={name:this.type,time:Object(i.a)(this.time),data:this.data||{},session_id:this.sessionId};return null!=this.userId&&(t.user_id=this.userId),t}ss(){return{u:this.userId,t:this.type,ts:this.time,s:this.sessionId,d:this.data}}static fromJson(t){return new s(t.user_id,t.name,t.time,t.session_id,t.data)}static Fa(t){return null!=t&&Object(a.e)(t)&&null!=t.t&&""!==t.t}static jn(t){return new s(t.u,t.t,t.ts,t.s,t.d)}}},2812:function(t,e,n){"use strict";const a={Yr:()=>"serviceWorker"in navigator&&"undefined"!=typeof ServiceWorkerRegistration&&"showNotification"in ServiceWorkerRegistration.prototype&&"PushManager"in window,Hr:()=>"safari"in window&&"pushNotification"in window.safari&&"function"==typeof window.safari.pushNotification.permission&&"function"==typeof window.safari.pushNotification.requestPermission,isPushSupported:()=>a.Yr()||a.Hr(),isPushBlocked:()=>{const t=a.isPushSupported()&&"Notification"in window&&null!=window.Notification&&null!=window.Notification.permission&&"denied"===window.Notification.permission,e=a.isPushSupported()&&(!("Notification"in window)||null==window.Notification);return t||e},isPushPermissionGranted:()=>a.isPushSupported()&&"Notification"in window&&null!=window.Notification&&null!=window.Notification.permission&&"granted"===window.Notification.permission,Ti:()=>!a.isPushBlocked()&&a.isPushSupported()&&!a.isPushPermissionGranted()};e.a=a},2813:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));class a{constructor(t){this.triggerId=t,this.extras={},this.isControl=!0}static fromJson(t){return new a(t.trigger_id)}}},2814:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var a=n(2667),i=n(2766);class s extends a.a{constructor(t,e,n,i,s,r,o,l,c,u,h,d,b,p,f,g,m,v,w,x,y){g=g||a.a.Ji.lh,f=f||a.a.Ji.oh,super(t,e=e||a.a.TextAlignment.START,n,i,s,r,o,l,c,u,h,d,null,b,p,f,g,m,v,w,void 0,void 0,void 0,void 0,void 0,void 0,void 0,x,y)}Ie(){return!1}get He(){return a.a.TextAlignment.START}Oe(){const t=document.createElement("span");return t.appendChild(document.createTextNode(this.message)),t}th(t){const e=t.getElementsByClassName("ab-in-app-message")[0];i.b.eo(e,!0,!0)||(this.slideFrom===a.a.SlideFrom.TOP?e.style.top="0px":e.style.bottom="0px"),super.th(t)}}s.es=a.a.es.mh},2883:function(t,e,n){"use strict";e.a={BROWSER:"browser",BROWSER_VERSION:"browserVersion",OS:"os",RESOLUTION:"resolution",LANGUAGE:"language",TIME_ZONE:"timeZone",USER_AGENT:"userAgent"}},2884:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));class a{constructor(){}Rs(){}changeUser(t){}clearData(){}}},2885:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));const a={fo:32,oo:9,co:13,ih:27}},2886:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var a=n(2667),i=n(2681);class s{constructor(t,e,n,r,o,l,c){this.text=t||"",this.backgroundColor=e||a.a.Ji.Ci,this.textColor=n||a.a.Ji.Hi,this.borderColor=r||this.backgroundColor,this.clickAction=o||a.a.ClickAction.NONE,this.uri=l,null==c&&(c=s.Mi),this.id=c,this.nl=!1,this.lt=new i.a}subscribeToClickedEvent(t){return this.lt.ut(t)}removeSubscription(t){this.lt.removeSubscription(t)}removeAllSubscriptions(){this.lt.removeAllSubscriptions()}k(){return!this.nl&&(this.nl=!0,this.lt.St(),!0)}static fromJson(t){return new s(t.text,t.bg_color,t.text_color,t.border_color,t.click_action,t.uri,t.id)}}s.Mi=-1},2887:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var a=n(2667);class i extends a.a{constructor(t,e,n,i,s,r,o,l,c,u,h,d,b,p,f,g,m,v,w,x,y,S,A,k,O,E,D){super(t,e,null,n,i,s,r,o,l=l||a.a.DismissType.MANUAL,c,u,h,d,b,p,f,g,m,v,w,x,y,S,A,k,O=O||a.a.CropType.FIT_CENTER,void 0,E,D)}get He(){return a.a.TextAlignment.CENTER}}i.es=a.a.es.Ih},2888:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var a=n(2667);class i extends a.a{constructor(t,e,n,i,s,r,o,l,c,u,h,d,b,p,f,g,m,v,w,x,y,S,A,k,O,E,D,N){l=l||a.a.DismissType.MANUAL,E=E||a.a.Orientation.PORTRAIT,super(t,e,null,n,i,s,r,o,l,c,u,h,d,b,p,f,g,m,v,w,x,y,S,A,k,O=O||a.a.CropType.CENTER_CROP,E,D,N)}get He(){return a.a.TextAlignment.CENTER}}i.es=a.a.es.Tr},2889:function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return u}));var a=n(2642),i=n(2641),s=n(2941),r=n(2707),o=n(2765),l=n(2945);function c(t,e,c){if(i.b.rr())if(r.a.test(t)){const e=Object(s.e)(t);if(!e)return;const i=async t=>{if(!Object(r.b)(t))return void a.a.D.error(`Decoded Braze Action json is invalid: ${JSON.stringify(t,null,2)}`);const e=t[s.a.properties.type];if(e===s.a.types.ue)for(const e of t[s.a.properties.me])i(e);else{const i=t[s.a.properties.fe];let r,c;switch(e){case s.a.types.logCustomEvent:r=await Promise.resolve().then(n.bind(null,3094)),r.logCustomEvent.apply(null,Array.prototype.slice.call(i));break;case s.a.types.requestPushPermission:r=await Promise.resolve().then(n.bind(null,3097)),r.requestPushPermission();break;case s.a.types.setEmailNotificationSubscriptionType:case s.a.types.setPushNotificationSubscriptionType:case s.a.types.setCustomUserAttribute:case s.a.types.addToSubscriptionGroup:case s.a.types.removeFromSubscriptionGroup:case s.a.types.addToCustomAttributeArray:case s.a.types.removeFromCustomAttributeArray:c=Object(l.a)(),c[e].apply(c,Array.prototype.slice.call(i));break;case s.a.types.de:case s.a.types.pe:o.b.openUri.apply(null,Array.prototype.slice.call(i));break;default:a.a.D.info(`Ignoring unknown Braze Action: ${e}`)}}};i(e)}else o.b.openUri(t,c,e)}function u(t,e){c(t,e)}},2937:function(t,e,n){"use strict";function a(t){null==t&&(t="");const e=t.split("?").slice(1).join("?"),n={};if(null!=e){const t=e.split("&");for(let e=0;e<t.length;e++){const a=t[e].split("=");""!==a[0]&&(n[a[0]]=a[1])}}return n}function i(t){return!(!t||0!==(t=t.toString().toLowerCase()).lastIndexOf("javascript:",0)&&0!==t.lastIndexOf("data:",0))}n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return i}))},2938:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return i}));const a={rE:"Chrome",eE:"Edge",Pg:"Internet Explorer",EE:"Opera",kg:"Safari",oE:"Firefox"},i={Fg:"Android",ln:"iOS",jg:"Mac",Dg:"Windows"}},2939:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var a=n(2642);class i{constructor(t,e,n){null==t&&(t=a.a.it.nt()),n=parseInt(n),(isNaN(n)||0===n)&&(n=(new Date).valueOf()),this.iu=t,this.wh=n,this.Ch=(new Date).valueOf(),this.Dh=e}ss(){return{g:this.iu,e:this.Dh,c:this.wh,l:this.Ch}}static jn(t){if(null==t||null==t.g)return null;const e=new i(t.g,t.e,t.c);return e.Ch=t.l,e}}},2940:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return s}));var a=n(2642);function i(t){let e=t.length;for(let n=t.length-1;n>=0;n--){const a=t.charCodeAt(n);a>127&&a<=2047?e++:a>2047&&a<=65535&&(e+=2),a>=56320&&a<=57343&&n--}return e}function s(t){try{t=t.replace(/-/g,"+").replace(/_/g,"/");let e=window.atob(t),n=new Uint8Array(e.length);for(let t=0;t<e.length;t++)n[t]=e.charCodeAt(t);let a=new Uint16Array(n.buffer);return String.fromCharCode(...a)}catch(t){return a.a.D.error("Unable to decode Base64: "+t),null}}},2941:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return o})),n.d(e,"f",(function(){return l})),n.d(e,"e",(function(){return c})),n.d(e,"d",(function(){return h})),n.d(e,"c",(function(){return d}));var a=n(2642),i=n(2940),s=n(2707);const r={types:{ue:"container",logCustomEvent:"logCustomEvent",setEmailNotificationSubscriptionType:"setEmailNotificationSubscriptionType",setPushNotificationSubscriptionType:"setPushNotificationSubscriptionType",setCustomUserAttribute:"setCustomUserAttribute",requestPushPermission:"requestPushPermission",addToSubscriptionGroup:"addToSubscriptionGroup",removeFromSubscriptionGroup:"removeFromSubscriptionGroup",addToCustomAttributeArray:"addToCustomAttributeArray",removeFromCustomAttributeArray:"removeFromCustomAttributeArray",de:"openLink",pe:"openLinkInWebView"},properties:{type:"type",me:"steps",fe:"args"}},o={Di:"unknownBrazeAction",_i:"noPushPrompt"},l=(t,e)=>{switch(t){case o.Di:return`${e} contains an unknown braze action type and will not be displayed.`;case o._i:return`${e} contains a push prompt braze action, but is not eligible for a push prompt. Ignoring.`;default:return""}};function c(t){try{let e=t.match(s.a)[0].length;const n=t.substring(e);if(e>t.length-1||!n)return void a.a.D.error(`Did not find base64 encoded brazeAction in url to process : ${t}`);const r=Object(i.a)(n);return r?JSON.parse(r):void a.a.D.error(`Failed to decode base64 encoded brazeAction: ${n}`)}catch(e){return void a.a.D.error(`Failed to process brazeAction URL ${t} : ${e.message}`)}}function u(t,e){let n=!1;for(const a of e)if(n=n||t(a),n)return!0;return!1}function h(t){try{const e=t[r.properties.type];return e===r.types.ue?u(h,t[r.properties.me]):!Object(s.c)(e)}catch(t){return!0}}function d(t){if(!Object(s.b)(t))return!1;const e=t[r.properties.type];return e===r.types.ue?u(d,t[r.properties.me]):e===r.types.requestPushPermission}},2942:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));class a{constructor(t,e){this.S=!!t,this.ve=e||[]}V(t){this.S=this.S&&t.S,this.ve.push(...t.ve)}}},2943:function(t,e,n){"use strict";n.d(e,"b",(function(){return r}));var a=n(2642),i=n(3189);const s={Hs:t=>{let e,n;try{const s=()=>{a.a.D.error("This browser does not have any supported ajax options!")};if(window.XMLHttpRequest?(e=new XMLHttpRequest,e||s()):s(),null!=e){const a=()=>{"function"==typeof t.error&&t.error(e.status),"function"==typeof t.Ue&&t.Ue(!1)};e.onload=()=>{let n=!1;if(4===e.readyState)if(n=e.status>=200&&e.status<300||304===e.status,n){if("function"==typeof t.S){let a,s;try{a=JSON.parse(e.responseText),s=e.getAllResponseHeaders()}catch(n){const a={error:""===e.responseText?i.a.ma:i.a.pa,response:e.responseText};t.S(a,s)}a&&t.S(a,s)}"function"==typeof t.Ue&&t.Ue(!0)}else a()},e.onerror=()=>{a()},e.ontimeout=()=>{a()},n=JSON.stringify(t.data),e.open("POST",t.url,!0),e.setRequestHeader("Content-type","application/json"),e.setRequestHeader("X-Requested-With","XMLHttpRequest");const s=t.headers||[];for(const t of s)e.setRequestHeader(t[0],t[1]);e.send(n)}}catch(t){a.a.D.error(`Network request error: ${t.message}`)}}},r=t=>{let e={};const n=t.toString().split("\r\n");if(!n)return e;let a,i;for(const t of n)t&&(a=t.slice(0,t.indexOf(":")).toLowerCase().trim(),i=t.slice(t.indexOf(":")+1).trim(),e[a]=i);return e};e.a=s},2944:function(t,e,n){"use strict";n.d(e,"h",(function(){return l})),n.d(e,"e",(function(){return c})),n.d(e,"a",(function(){return u})),n.d(e,"d",(function(){return h})),n.d(e,"f",(function(){return d})),n.d(e,"c",(function(){return b})),n.d(e,"g",(function(){return p})),n.d(e,"b",(function(){return f}));var a=n(3194),i=n(2766),s=n(2889),r=n(3192),o=n(2642);function l(t){return null!=t&&!!t.getAttribute("data-ab-had-top-impression")}function c(t){null!=t&&t.setAttribute("data-ab-had-top-impression",!0)}function u(t){return null!=t&&!!t.getAttribute("data-ab-had-bottom-impression")}function h(t){null!=t&&t.setAttribute("data-ab-had-bottom-impression",!0)}function d(t){if(null!=t){const e=t.querySelectorAll(".ab-unread-indicator")[0];null!=e&&(e.className+=" read")}}function b(t){return t.getAttribute("data-ab-card-id")}function p(t,e){const n=e.querySelectorAll(".ab-image-area");let a,i=0;n.length>0&&(i=n[0].offsetWidth);for(const e of t)if(a=e.X,a&&e.imageUrl&&!isNaN(e.aspectRatio)){const t=i/e.aspectRatio;t&&(a.style.height=`${t}px`)}}function f(t,e,n){const l=document.createElement("div");l.className="ab-card ab-effect-card "+t.Y,l.setAttribute("data-ab-card-id",t.id),l.setAttribute("role","article"),l.setAttribute("tabindex","0");const c=t.url&&""!==t.url,u=a=>(d(l),c&&(e(t),Object(s.a)(t.url,a,n)),!1);if(t.pinned){const t=document.createElement("div");t.className="ab-pinned-indicator";const e=document.createElement("i");e.className="fa fa-star",t.appendChild(e),l.appendChild(t)}if(t.imageUrl&&""!==t.imageUrl){const e=document.createElement("div");e.className="ab-image-area";const n=document.createElement("img");if(n.setAttribute("src",t.imageUrl),n.onload=()=>{l.style.height="auto"},function(t,e){let n="";t.title||t.description||(n="Feed Image"),e.setAttribute("alt",n)}(t,n),e.appendChild(n),l.className+=" with-image",c&&!t.Z){const n=document.createElement("a");n.setAttribute("href",t.url),n.onclick=u,n.appendChild(e),l.appendChild(n)}else l.appendChild(e)}const h=document.createElement("div");if(h.className="ab-card-body",t.dismissible){t.tt=()=>Object(r.a)(t);const e=Object(a.a)("Dismiss Card",void 0,t.dismissCard.bind(t));l.appendChild(e),Object(i.g)(h,i.a.ot,(t=>{l.className+=" ab-swiped-left",e.onclick(t)})),Object(i.g)(h,i.a.et,(t=>{l.className+=" ab-swiped-right",e.onclick(t)}))}const b=t.title&&""!==t.title;if(b){const e=document.createElement("h1");if(e.className="ab-title",e.id=o.a.it.nt(),l.setAttribute("aria-labelledby",e.id),c){const n=document.createElement("a");n.setAttribute("href",t.url),n.onclick=u,n.appendChild(document.createTextNode(t.title)),e.appendChild(n)}else e.appendChild(document.createTextNode(t.title));h.appendChild(e)}const p=document.createElement("div");if(p.className=b?"ab-description":"ab-description ab-no-title",p.id=o.a.it.nt(),l.setAttribute("aria-describedby",p.id),p.appendChild(document.createTextNode(t.description)),c){const e=document.createElement("div");e.className="ab-url-area";const n=document.createElement("a");n.setAttribute("href",t.url),n.appendChild(document.createTextNode(t.linkText)),n.onclick=u,e.appendChild(n),p.appendChild(e)}h.appendChild(p),l.appendChild(h);const f=document.createElement("div");return f.className="ab-unread-indicator",t.viewed&&(f.className+=" read"),l.appendChild(f),t.X=l,l}},2945:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var a=n(2641);function i(){if(a.b.rr())return a.b.gr()}},2946:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var a=n(2642);class i{constructor(t,e=!1,n={}){this.id=t,this.enabled=e,this.properties=n}getStringProperty(t){if(!this.yr(t))return null;const e=this.properties[t];return this.Er(e,"string")?e.value:null}getNumberProperty(t){if(!this.yr(t))return null;const e=this.properties[t];return this.Er(e,"number")?e.value:null}getBooleanProperty(t){if(!this.yr(t))return null;const e=this.properties[t];return this.Er(e,"boolean")?e.value:null}ss(){const t={};return t[i.hs.ns]=this.id,t[i.hs.Fe]=this.enabled,t[i.hs.we]=this.properties,t}yr(t){return!(!this.properties||!this.properties[t])||(a.a.D.info(`${t} not found in feature flag properties.`),!1)}Er(t,e){return t.type===e&&typeof t.value===e||(a.a.D.info(`Property is not of type ${e}.`),!1)}}i.hs={ns:"id",Fe:"e",we:"pr"},i.At={ns:"id",Fe:"enabled",we:"properties"}},2957:function(t,e,n){"use strict";n.d(e,"a",(function(){return x})),n.d(e,"b",(function(){return y})),n.d(e,"c",(function(){return A})),n.d(e,"e",(function(){return k})),n.d(e,"d",(function(){return O})),n.d(e,"g",(function(){return E})),n.d(e,"f",(function(){return D}));var a=n(3092),i=n(2944),s=n(2766),r=n(3186),o=n(2810),l=n(2654),c=n(2885),u=n(2641),h=n(2770),d=n(2642),b={en:{NO_CARDS_MESSAGE:"We have no updates for you at this time.<br/>Please check again later.",FEED_TIMEOUT_MESSAGE:"Sorry, this refresh timed out.<br/>Please try again later."},ar:{NO_CARDS_MESSAGE:"Ù„ÙŠØ³ Ù„Ø¯ÙŠÙ†Ø§ Ø£ÙŠ ØªØ­Ø¯ÙŠØ«. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ù„Ø§Ø­Ù‚Ø§Ù‹",FEED_TIMEOUT_MESSAGE:"ÙŠØ±Ø¬Ù‰ ØªÙƒØ±Ø§Ø± Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ø§Ø­Ù‚Ø§"},cs:{NO_CARDS_MESSAGE:"V tuto chvÃ­li pro vÃ¡s nemÃ¡me Å¾Ã¡dnÃ© aktualizace.<br/>Zkontrolujte prosÃ­m znovu pozdÄ›ji.",FEED_TIMEOUT_MESSAGE:"ProsÃ­m zkuste to znovu pozdÄ›ji."},da:{NO_CARDS_MESSAGE:"Vi har ingen updates.<br/>PrÃ¸v venligst senere.",FEED_TIMEOUT_MESSAGE:"PrÃ¸v venligst senere."},de:{NO_CARDS_MESSAGE:"Derzeit sind keine Updates verfÃ¼gbar.<br/>Bitte spÃ¤ter noch einmal versuchen.",FEED_TIMEOUT_MESSAGE:"Bitte spÃ¤ter noch einmal versuchen."},es:{NO_CARDS_MESSAGE:"No tenemos actualizaciones.<br/>Por favor compruÃ©belo mÃ¡s tarde.",FEED_TIMEOUT_MESSAGE:"Por favor intÃ©ntelo mÃ¡s tarde."},"es-mx":{NO_CARDS_MESSAGE:"No tenemos ninguna actualizaciÃ³n.<br/>Vuelva a verificar mÃ¡s tarde.",FEED_TIMEOUT_MESSAGE:"Por favor, vuelva a intentarlo mÃ¡s tarde."},et:{NO_CARDS_MESSAGE:"Uuendusi pole praegu saadaval.<br/>Proovige hiljem uuesti.",FEED_TIMEOUT_MESSAGE:"Palun proovige hiljem uuesti."},fi:{NO_CARDS_MESSAGE:"PÃ¤ivityksiÃ¤ ei ole saatavilla.<br/>Tarkista myÃ¶hemmin uudelleen.",FEED_TIMEOUT_MESSAGE:"YritÃ¤ myÃ¶hemmin uudelleen."},fr:{NO_CARDS_MESSAGE:"Aucune mise Ã  jour disponible.<br/>Veuillez vÃ©rifier ultÃ©rieurement.",FEED_TIMEOUT_MESSAGE:"Veuillez rÃ©essayer ultÃ©rieurement."},he:{NO_CARDS_MESSAGE:".××™×Ÿ ×œ× ×• ×¢×“×›×•× ×™×. ×‘×‘×§×©×” ×‘×“×•×§ ×©×•×‘ ×‘×§×¨×•×‘",FEED_TIMEOUT_MESSAGE:".×‘×‘×§×©×” × ×¡×” ×©×•×‘ ×‘×§×¨×•×‘"},hi:{NO_CARDS_MESSAGE:"à¤¹à¤®à¤¾à¤°à¥‡ à¤ªà¤¾à¤¸ à¤•à¥‹à¤ˆ à¤…à¤ªà¤¡à¥‡à¤Ÿ à¤¨à¤¹à¥€à¤‚ à¤¹à¥ˆà¤‚à¥¤ à¤•à¥ƒà¤ªà¤¯à¤¾ à¤¬à¤¾à¤¦ à¤®à¥‡à¤‚ à¤«à¤¿à¤° à¤¸à¥‡ à¤œà¤¾à¤à¤š à¤•à¤°à¥‡à¤‚.à¥¤",FEED_TIMEOUT_MESSAGE:"à¤•à¥ƒà¤ªà¤¯à¤¾ à¤¬à¤¾à¤¦ à¤®à¥‡à¤‚ à¤¦à¥‹à¤¬à¤¾à¤°à¤¾ à¤ªà¥à¤°à¤¯à¤¾à¤¸ à¤•à¤°à¥‡à¤‚à¥¤."},id:{NO_CARDS_MESSAGE:"Kami tidak memiliki pembaruan. Coba lagi nanti.",FEED_TIMEOUT_MESSAGE:"Coba lagi nanti."},it:{NO_CARDS_MESSAGE:"Non ci sono aggiornamenti.<br/>Ricontrollare piÃ¹ tardi.",FEED_TIMEOUT_MESSAGE:"Riprovare piÃ¹ tardi."},ja:{NO_CARDS_MESSAGE:"ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã¯ã‚ã‚Šã¾ã›ã‚“ã€‚<br/>å¾Œã§ã‚‚ã†ä¸€åº¦ç¢ºèªã—ã¦ãã ã•ã„ã€‚",FEED_TIMEOUT_MESSAGE:"å¾Œã§ã‚‚ã†ä¸€åº¦è©¦ã—ã¦ãã ã•ã„ã€‚"},ko:{NO_CARDS_MESSAGE:"ì—…ë°ì´íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤. ë‹¤ìŒì— ë‹¤ì‹œ í™•ì¸í•´ ì£¼ì‹­ì‹œì˜¤.",FEED_TIMEOUT_MESSAGE:"ë‚˜ì¤‘ì— ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì‹­ì‹œì˜¤."},ms:{NO_CARDS_MESSAGE:"Tiada kemas kini. Sila periksa kemudian.",FEED_TIMEOUT_MESSAGE:"Sila cuba kemudian."},nl:{NO_CARDS_MESSAGE:"Er zijn geen updates.<br/>Probeer het later opnieuw.",FEED_TIMEOUT_MESSAGE:"Probeer het later opnieuw."},no:{NO_CARDS_MESSAGE:"Vi har ingen oppdateringer.<br/>Vennligst sjekk igjen senere.",FEED_TIMEOUT_MESSAGE:"Vennligst prÃ¸v igjen senere."},pl:{NO_CARDS_MESSAGE:"Brak aktualizacji.<br/>ProszÄ™ sprawdziÄ‡ ponownie pÃ³Åºniej.",FEED_TIMEOUT_MESSAGE:"ProszÄ™ sprÃ³bowaÄ‡ ponownie pÃ³Åºniej."},pt:{NO_CARDS_MESSAGE:"NÃ£o temos atualizaÃ§Ãµes.<br/>Por favor, verifique mais tarde.",FEED_TIMEOUT_MESSAGE:"Por favor, tente mais tarde."},"pt-br":{NO_CARDS_MESSAGE:"NÃ£o temos nenhuma atualizaÃ§Ã£o.<br/>Verifique novamente mais tarde.",FEED_TIMEOUT_MESSAGE:"Tente novamente mais tarde."},ru:{NO_CARDS_MESSAGE:"ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ Ð½ÐµÐ´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ñ‹.<br/>ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ ÑÐ½Ð¾Ð²Ð° Ð¿Ð¾Ð·Ð¶Ðµ.",FEED_TIMEOUT_MESSAGE:"ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, Ð¿Ð¾Ð²Ñ‚Ð¾Ñ€Ð¸Ñ‚Ðµ Ð¿Ð¾Ð¿Ñ‹Ñ‚ÐºÑƒ Ð¿Ð¾Ð·Ð¶Ðµ."},sv:{NO_CARDS_MESSAGE:"Det finns inga uppdateringar.<br/>FÃ¶rsÃ¶k igen senare.",FEED_TIMEOUT_MESSAGE:"FÃ¶rsÃ¶k igen senare."},th:{NO_CARDS_MESSAGE:"à¹€à¸£à¸²à¹„à¸¡à¹ˆà¸¡à¸µà¸à¸²à¸£à¸­à¸±à¸žà¹€à¸”à¸• à¸à¸£à¸¸à¸“à¸²à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸ à¸²à¸¢à¸«à¸¥à¸±à¸‡.",FEED_TIMEOUT_MESSAGE:"à¸à¸£à¸¸à¸“à¸²à¸¥à¸­à¸‡à¹ƒà¸«à¸¡à¹ˆà¸ à¸²à¸¢à¸«à¸¥à¸±à¸‡."},uk:{NO_CARDS_MESSAGE:"ÐžÐ½Ð¾Ð²Ð»ÐµÐ½Ð½Ñ Ð½ÐµÐ´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ñ–.<br/>Ð»Ð°ÑÐºÐ°, Ð¿ÐµÑ€ÐµÐ²Ñ–Ñ€Ñ‚Ðµ Ð·Ð½Ð¾Ð²Ñƒ Ð¿Ñ–Ð·Ð½Ñ–ÑˆÐµ.",FEED_TIMEOUT_MESSAGE:"Ð‘ÑƒÐ´ÑŒ Ð»Ð°ÑÐºÐ°, ÑÐ¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ Ñ‰Ðµ Ñ€Ð°Ð· Ð¿Ñ–Ð·Ð½Ñ–ÑˆÐµ."},vi:{NO_CARDS_MESSAGE:"ChÃºng tÃ´i khÃ´ng cÃ³ cáº­p nháº­t nÃ o.<br/>Vui lÃ²ng kiá»ƒm tra láº¡i sau.",FEED_TIMEOUT_MESSAGE:"Vui lÃ²ng thá»­ láº¡i sau."},"zh-hk":{NO_CARDS_MESSAGE:"æš«æ™‚æ²’æœ‰æ›´æ–°.<br/>è«‹ç¨å€™å†è©¦.",FEED_TIMEOUT_MESSAGE:"è«‹ç¨å€™å†è©¦."},"zh-hans":{NO_CARDS_MESSAGE:"æš‚æ—¶æ²¡æœ‰æ›´æ–°.<br/>è¯·ç¨åŽå†è¯•.",FEED_TIMEOUT_MESSAGE:"è¯·ç¨å€™å†è¯•."},"zh-hant":{NO_CARDS_MESSAGE:"æš«æ™‚æ²’æœ‰æ›´æ–°.<br/>è«‹ç¨å€™å†è©¦.",FEED_TIMEOUT_MESSAGE:"è«‹ç¨å€™å†è©¦."},"zh-tw":{NO_CARDS_MESSAGE:"æš«æ™‚æ²’æœ‰æ›´æ–°.<br/>è«‹ç¨å€™å†è©¦.",FEED_TIMEOUT_MESSAGE:"è«‹ç¨å€™å†è©¦."},zh:{NO_CARDS_MESSAGE:"æš‚æ—¶æ²¡æœ‰æ›´æ–°.<br/>è¯·ç¨åŽå†è¯•.",FEED_TIMEOUT_MESSAGE:"è¯·ç¨å€™å†è¯•."}};class p{constructor(t,e){if(null!=t&&(t=t.toLowerCase()),null!=t&&null==b[t]){const e=t.indexOf("-");e>0&&(t=t.substring(0,e))}if(null==b[t]){const n="Braze does not yet have a localization for language "+t+", defaulting to English. Please contact us if you are willing and able to help us translate our SDK into this language.";e?d.a.D.error(n):d.a.D.info(n),t="en"}this.language=t}get(t){return b[this.language][t]}}const f={t:!1,i:null,m:()=>{if(f.o(),!f.i){let t=h.a.language,e=!1;u.b.nn(u.a.zn)&&(t=u.b.nn(u.a.zn),e=!0),f.i=new p(t,e)}return f.i},o:()=>{f.t||(u.b.u(f),f.t=!0)},destroy:()=>{f.i=null,f.t=!1}};var g=f,m=n(3093),v=n(2707),w=n(2941);const x="data-last-requested-refresh";function y(t){t&&(t.className=t.className.replace("ab-show","ab-hide"),setTimeout((()=>{t&&t.parentNode&&t.parentNode.removeChild(t)}),a.a.Zi));const e=t.getAttribute("data-update-subscription-id");null!=e&&Object(m.a)(e)}function S(t,e){const n=document.createElement("div");if(n.className="ab-feed-body",n.setAttribute("aria-label","Feed"),n.setAttribute("role","feed"),null==t.lastUpdated){const t=document.createElement("div");t.className="ab-no-cards-message";const e=document.createElement("i");e.className="fa fa-spinner fa-spin fa-4x ab-initial-spinner",t.appendChild(e),n.appendChild(t)}else{let a=!1;const s=e=>{t.logCardClick(e)};for(const o of t.cards){const l=o instanceof r.a;!l||t.dr()?(n.appendChild(Object(i.b)(o,s,e)),a=a||!l):d.a.D.error("Received a control card for a legacy news feed. Control cards are only supported with content cards.")}if(!a){const t=document.createElement("div");t.className="ab-no-cards-message",t.innerHTML=g.m().get("NO_CARDS_MESSAGE"),t.setAttribute("role","article"),n.appendChild(t)}}return n}function A(t,e){if(null!=e){const n=[],a=e.querySelectorAll(".ab-card");t.do||(t.do={});for(let e=0;e<a.length;e++){const r=Object(i.c)(a[e]);if(t.do[r])continue;let o=Object(i.h)(a[e]),l=Object(i.a)(a[e]);const c=o,u=l,h=Object(s.i)(a[e]),d=Object(s.d)(a[e]);if(!o&&h&&(o=!0,Object(i.e)(a[e])),!l&&d&&(l=!0,Object(i.d)(a[e])),o&&l){if(h||d||Object(i.f)(a[e]),c&&u)continue;for(const e of t.cards)if(e.id===r){t.do[e.id]=!0,n.push(e);break}}}n.length>0&&t.logCardImpressions(n)}}function k(t,e){e.setAttribute("aria-busy","true");const n=e.querySelectorAll(".ab-refresh-button")[0];null!=n&&(n.className+=" fa-spin");const i=(new Date).valueOf().toString();e.setAttribute("data-last-requested-refresh",i),setTimeout((()=>{if(e.getAttribute("data-last-requested-refresh")===i){const t=e.querySelectorAll(".fa-spin");for(let e=0;e<t.length;e++)t[e].className=t[e].className.replace(/fa-spin/g,"");const n=e.querySelectorAll(".ab-initial-spinner")[0];if(null!=n){const t=document.createElement("span");t.innerHTML=g.m().get("FEED_TIMEOUT_MESSAGE"),n.parentNode.appendChild(t),n.parentNode.removeChild(n)}"true"===e.getAttribute("aria-busy")&&e.setAttribute("aria-busy","false")}}),a.a.uo),t.sr()}function O(t,e){const n=document.createElement("div");n.className="ab-feed ab-hide ab-effect-slide",n.setAttribute("role","dialog"),n.setAttribute("aria-label","Feed"),n.setAttribute("tabindex","-1");const a=document.createElement("div");a.className="ab-feed-buttons-wrapper",a.setAttribute("role","group"),n.appendChild(a);const i=document.createElement("i");i.className="fa fa-times ab-close-button",i.setAttribute("aria-label","Close Feed"),i.setAttribute("tabindex","0"),i.setAttribute("role","button");const s=t=>{y(n),t.stopPropagation()};i.addEventListener("keydown",(t=>{t.keyCode!==c.a.fo&&t.keyCode!==c.a.co||s(t)})),i.onclick=s;const r=document.createElement("i");r.className="fa fa-refresh ab-refresh-button",null==t.lastUpdated&&(r.className+=" fa-spin"),r.setAttribute("aria-label","Refresh Feed"),r.setAttribute("tabindex","0"),r.setAttribute("role","button");const o=e=>{k(t,n),e.stopPropagation()};return r.addEventListener("keydown",(t=>{t.keyCode!==c.a.fo&&t.keyCode!==c.a.co||o(t)})),r.onclick=o,a.appendChild(r),a.appendChild(i),n.appendChild(S(t,e)),n.onscroll=()=>{A(t,n)},n}function E(t,e,n,a,i){if(!Object(l.b)(e))return;const s=[];for(const t of e)if(t instanceof o.a){if(t.url&&v.a.test(t.url)){let e=Object(w.e)(t.url);if(Object(w.d)(e)){d.a.D.error(Object(w.f)(w.b.Di,"Content Card"));continue}}s.push(t)}if(t.cards=s,t.lastUpdated=n,null!=a)if(a.setAttribute("aria-busy","false"),null==t.lastUpdated)y(a);else{const e=a.querySelectorAll(".ab-feed-body")[0];if(null!=e){const n=S(t,i);e.parentNode.replaceChild(n,e),A(t,n.parentNode)}}}function D(t,e){e.setAttribute("data-update-subscription-id",t)}},2963:function(t,e,n){"use strict";var a=n(2641),i=n(2884),s=n(3095),r=n(3193),o=n(2676),l=n(2658),c=n(2681);class u extends i.a{constructor(t,e){super(),this.h=t,this.si=e,this.yt=new c.a,a.b.jt(this.yt),this.zt()}zt(){const t=this.h.I(l.a.q.ei)||[],e=[];for(let n=0;n<t.length;n++){const a=Object(r.c)(t[n]);null!=a&&e.push(a)}this.Zt=e,this.ri=Object(o.d)(this.h.I(l.a.q.hi))}oi(t){const e=[];let n=null;const a=this.h.I(l.a.q.P)||{},i={};for(let s=0;s<t.length;s++){n=t[s];const o=Object(r.b)(n);null!=o&&(a[o.id]&&(o.viewed=!0,i[o.id]=!0),e.push(o))}this.h.B(l.a.q.P,i),this.Zt=e,this.Ss(),this.ri=new Date,this.h.B(l.a.q.hi,this.ri)}Ss(){const t=[];for(let e=0;e<this.Zt.length;e++)t.push(this.Zt[e].ss());this.h.B(l.a.q.ei,t)}Rs(t){null!=t&&t.feed&&(this.zt(),this.oi(t.feed),this.yt.St(new s.a(this.Zt.slice(),this.ri)))}ai(){this.zt();const t=[],e=new Date;for(let n=0;n<this.Zt.length;n++)(null==this.Zt[n].expiresAt||this.Zt[n].expiresAt>=e)&&t.push(this.Zt[n]);return new s.a(t,this.ri)}Is(){this.si.requestFeedRefresh()}Ws(t){return this.yt.ut(t)}clearData(t){null==t&&(t=!1),this.Zt=[],this.ri=null,t&&(this.h.Xs(l.a.q.ei),this.h.Xs(l.a.q.hi)),this.yt.St(new s.a(this.Zt.slice(),this.ri))}}const h={t:!1,provider:null,er:()=>(h.o(),h.provider||(h.provider=new u(a.b.l(),a.b.mr()),a.b.ar(h.provider)),h.provider),o:()=>{h.t||(a.b.u(h),h.t=!0)},destroy:()=>{h.provider=null,h.t=!1}};e.a=h},2964:function(t,e,n){"use strict";var a=n(2641),i=n(2642),s=n(2884),r=n(2658),o=n(2681),l=n(3090),c=n(2943),u=n(3098);class h extends s.a{constructor(t,e,n){super(),this.gt=t,this.vt=e,this.h=n,this.he=new o.a,this.ye=10,this.Te=null,a.b.jt(this.he)}Rs(t){if(this.gt._e()&&null!=t&&t.feature_flags){this.Re=[];for(const e of t.feature_flags){let t=Object(u.a)(e);t&&this.Re.push(t)}this.De=(new Date).getTime(),this.Ne(),this.he.St(this.Re)}}xe(){const t=this.h.I(r.a.q.ze)||{};let e={};for(let n in t){let a=Object(u.b)(t[n]);a&&(e[a.id]=a)}return e}Ws(t){return this.he.ut(t)}refreshFeatureFlags(t,e,n,a){if(!this.Se(n))return this.$e||(this.$e=this.gt.qe((()=>{this.refreshFeatureFlags(t,e)}))),void("function"==typeof e&&e());null==a&&(a=!0),a&&this.Me();const i=this.vt.Ps({},!0),s=this.vt.Bs(i,!1,!0);let r=!1;this.vt.Gs(i,(()=>{c.a.Hs({url:`${this.vt.Ks()}/feature_flags/sync`,headers:s,data:i,S:n=>{if(!this.vt.Os(i,n))return r=!0,void("function"==typeof e&&e());this.vt.Qs(),this.Rs(n),"function"==typeof t&&t()},error:t=>{this.vt.Vs(t,"retrieving feature flags"),r=!0,"function"==typeof e&&e()},Ue:()=>{if(a&&r&&!this.ke){let a=this.Te;(null==a||a<1e3*this.ye)&&(a=1e3*this.ye),this.Ae(Math.min(3e5,Object(l.a)(1e3*this.ye,3*a)),t,e,n)}}})}))}Me(){null!=this.ke&&(clearTimeout(this.ke),this.ke=null)}Ae(t,e,n,a){null==t&&(t=1e3*this.ye),this.Me(),this.ke=setTimeout((()=>{this.refreshFeatureFlags(e,n,a)}),t),this.Te=t}Se(t){if(!t){const t=parseFloat(this.gt.Be());let e=!1;if(!isNaN(t)){if(-1===t)return i.a.D.info("Feature flag refreshes not allowed"),!1;e=(new Date).getTime()>=(this.De||0)+1e3*t}if(!e)return i.a.D.info(`Feature flag refreshes were rate limited to ${t} seconds`),!1}return this.gt._e()}Ne(){const t={};for(let e=0;e<this.Re.length;e++){let n=this.Re[e],a=n.ss();t[n.id]=a}this.h.B(r.a.q.ze,t),this.h.B(r.a.q.Ce,this.De)}}const d={t:!1,provider:null,er:()=>(d.o(),d.provider||(d.provider=new h(a.b.ir(),a.b.nr(),a.b.l()),a.b.ar(d.provider)),d.provider),o:()=>{d.t||(a.b.u(d),d.t=!0)},destroy:()=>{d.provider=null,d.t=!1}};e.a=d},3089:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var a=n(2810),i=n(3120),s=n(2730),r=n(2641),o=n(2642);function l(t,e){return!!r.b.rr()&&(t instanceof a.a?i.a.m().C(t,e).S:(o.a.D.error("card "+s.c),!1))}},3090:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));const a=(t,e)=>(t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t)},3091:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var a=n(2810),i=n(3120),s=n(2641),r=n(2654),o=n(2730),l=n(2642);function c(t,e){if(!s.b.rr())return!1;if(!Object(r.b)(t))return l.a.D.error("cards must be an array"),!1;for(const e of t)if(!(e instanceof a.a))return l.a.D.error(`Each card in cards ${o.c}`),!1;return i.a.m().M(t,e).S}},3092:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var a=n(3186);class i{constructor(t,e){this.cards=t,this.lastUpdated=e}getUnreadCardCount(){let t=0;for(const e of this.cards)e.viewed||e instanceof a.a||t++;return t}dr(){throw new Error("Must be implemented in a subclass")}logCardImpressions(){throw new Error("Must be implemented in subclass")}logCardClick(){throw new Error("Must be implemented in subclass")}sr(){throw new Error("Must be implemented in subclass")}}i.ur=6e4,i.Zi=500,i.uo=1e4},3093:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var a=n(2641);function i(t){a.b.rr()&&a.b.removeSubscription(t)}},3094:function(t,e,n){"use strict";n.r(e),n.d(e,"logCustomEvent",(function(){return c}));var a=n(2641),i=n(2731),s=n(2642),r=n(2732),o=n(2771),l=n(2707);function c(t,e){if(!a.b.rr())return!1;if(null==t||t.length<=0)return s.a.D.error(`logCustomEvent requires a non-empty eventName, got "${t}". Ignoring event.`),!1;if(!Object(l.f)(t,"log custom event","the event name"))return!1;const[n,c]=Object(l.e)(e,"logCustomEvent","eventProperties",`log custom event "${t}"`,"event");if(!n)return!1;if(a.b.ir().ge(t))return s.a.D.info(`Custom Event "${t}" is blocklisted, ignoring.`),!1;const u=i.a.G(s.a.A.CustomEvent,{n:t,p:c});if(u.S){s.a.D.info(`Logged custom event "${t}".`);for(const n of u.ve)o.a.er().je(r.a.be,[t,e],n)}return u.S}},3095:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var a=n(3092),i=n(3091),s=n(3089),r=n(3096);class o extends a.a{constructor(t,e){super(t,e)}logCardImpressions(t){Object(i.a)(t,!1)}logCardClick(t){Object(s.a)(t,!1)}sr(){Object(r.a)()}dr(){return!1}}},3096:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var a=n(2641),i=n(2963);function s(){if(a.b.rr())return i.a.er().Is()}},3097:function(t,e,n){"use strict";n.r(e),n.d(e,"requestPushPermission",(function(){return s}));var a=n(2641),i=n(3238);function s(t,e){if(a.b.rr())return i.default.aa().subscribe(((e,n,i)=>{a.b.mr().requestImmediateDataFlush(),"function"==typeof t&&t(e,n,i)}),e)}},3098:function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return r}));var a=n(2642),i=n(2946);function s(t){if(t[i.a.At.ns]&&"boolean"==typeof t[i.a.At.Fe])return new i.a(t[i.a.At.ns],t[i.a.At.Fe],t[i.a.At.we]);a.a.D.info(`Unable to create feature flag from ${JSON.stringify(t,null,2)}`)}function r(t){if(t[i.a.hs.ns]&&"boolean"==typeof t[i.a.hs.Fe])return new i.a(t[i.a.hs.ns],t[i.a.hs.Fe],t[i.a.hs.we]);a.a.D.info(`Unable to deserialize feature flag from ${JSON.stringify(t,null,2)}`)}},3100:function(t,e,n){"use strict";n.d(e,"d",(function(){return a.a})),n.d(e,"e",(function(){return i.a})),n.d(e,"a",(function(){return s.a})),n.d(e,"b",(function(){return r.a})),n.d(e,"c",(function(){return o.a})),n.d(e,"f",(function(){return l.a})),n.d(e,"g",(function(){return c.a})),n.d(e,"h",(function(){return B})),n.d(e,"i",(function(){return j})),n.d(e,"j",(function(){return O})),n.d(e,"k",(function(){return D})),n.d(e,"l",(function(){return S})),n.d(e,"m",(function(){return z})),n.d(e,"n",(function(){return U}));var a=n(2667),i=n(2886),s=n(2813),r=n(2888),o=n(2733),l=n(2887),c=n(2814),u=n(2738),h=n(2641),d=n(3195),b=n(3196);function p(t){Object(d.a)(t,"iam",".ab-pause-scrolling,body.ab-pause-scrolling,html.ab-pause-scrolling{overflow:hidden;touch-action:none}.ab-iam-root.v3{position:fixed;top:0;right:0;bottom:0;left:0;pointer-events:none;z-index:9011;-webkit-tap-highlight-color:transparent}.ab-iam-root.v3:focus{outline:0}.ab-iam-root.v3.ab-effect-fullscreen,.ab-iam-root.v3.ab-effect-html,.ab-iam-root.v3.ab-effect-modal{opacity:0}.ab-iam-root.v3.ab-effect-fullscreen.ab-show,.ab-iam-root.v3.ab-effect-html.ab-show,.ab-iam-root.v3.ab-effect-modal.ab-show{opacity:1}.ab-iam-root.v3.ab-effect-fullscreen.ab-show.ab-animate-in,.ab-iam-root.v3.ab-effect-html.ab-show.ab-animate-in,.ab-iam-root.v3.ab-effect-modal.ab-show.ab-animate-in{-webkit-transition:opacity .5s;-moz-transition:opacity .5s;-o-transition:opacity .5s;transition:opacity .5s}.ab-iam-root.v3.ab-effect-fullscreen.ab-hide,.ab-iam-root.v3.ab-effect-html.ab-hide,.ab-iam-root.v3.ab-effect-modal.ab-hide{opacity:0}.ab-iam-root.v3.ab-effect-fullscreen.ab-hide.ab-animate-out,.ab-iam-root.v3.ab-effect-html.ab-hide.ab-animate-out,.ab-iam-root.v3.ab-effect-modal.ab-hide.ab-animate-out{-webkit-transition:opacity .5s;-moz-transition:opacity .5s;-o-transition:opacity .5s;transition:opacity .5s}.ab-iam-root.v3.ab-effect-slide .ab-in-app-message{-webkit-transform:translateX(535px);-moz-transform:translateX(535px);-ms-transform:translateX(535px);transform:translateX(535px)}.ab-iam-root.v3.ab-effect-slide.ab-show .ab-in-app-message{-webkit-transform:translateX(0);-moz-transform:translateX(0);-ms-transform:translateX(0);transform:translateX(0)}.ab-iam-root.v3.ab-effect-slide.ab-show.ab-animate-in .ab-in-app-message{-webkit-transition:transform .5s ease-in-out;-moz-transition:transform .5s ease-in-out;-o-transition:transform .5s ease-in-out;transition:transform .5s ease-in-out}.ab-iam-root.v3.ab-effect-slide.ab-hide .ab-in-app-message{-webkit-transform:translateX(535px);-moz-transform:translateX(535px);-ms-transform:translateX(535px);transform:translateX(535px)}.ab-iam-root.v3.ab-effect-slide.ab-hide .ab-in-app-message.ab-swiped-left{-webkit-transform:translateX(-535px);-moz-transform:translateX(-535px);-ms-transform:translateX(-535px);transform:translateX(-535px)}.ab-iam-root.v3.ab-effect-slide.ab-hide .ab-in-app-message.ab-swiped-up{-webkit-transform:translateY(-535px);-moz-transform:translateY(-535px);-ms-transform:translateY(-535px);transform:translateY(-535px)}.ab-iam-root.v3.ab-effect-slide.ab-hide .ab-in-app-message.ab-swiped-down{-webkit-transform:translateY(535px);-moz-transform:translateY(535px);-ms-transform:translateY(535px);transform:translateY(535px)}.ab-iam-root.v3.ab-effect-slide.ab-hide.ab-animate-out .ab-in-app-message{-webkit-transition:transform .5s ease-in-out;-moz-transition:transform .5s ease-in-out;-o-transition:transform .5s ease-in-out;transition:transform .5s ease-in-out}.ab-iam-root.v3 .ab-ios-scroll-wrapper{position:fixed;top:0;right:0;bottom:0;left:0;overflow:auto;pointer-events:all;touch-action:auto;-webkit-overflow-scrolling:touch}.ab-iam-root.v3 .ab-in-app-message{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:fixed;text-align:center;-webkit-box-shadow:0 0 4px rgba(0,0,0,.3);-moz-box-shadow:0 0 4px rgba(0,0,0,.3);box-shadow:0 0 4px rgba(0,0,0,.3);line-height:normal;letter-spacing:normal;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif;z-index:9011;max-width:100%;overflow:hidden;display:inline-block;pointer-events:all;color:#333}.ab-iam-root.v3 .ab-in-app-message.ab-no-shadow{-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none}.ab-iam-root.v3 .ab-in-app-message :focus,.ab-iam-root.v3 .ab-in-app-message:focus{outline:0}.ab-iam-root.v3 .ab-in-app-message.ab-clickable{cursor:pointer}.ab-iam-root.v3 .ab-in-app-message.ab-background{background-color:#fff}.ab-iam-root.v3 .ab-in-app-message .ab-close-button{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;background-color:transparent;background-size:15px;border:none;width:15px;min-width:15px;height:15px;cursor:pointer;display:block;font-size:15px;line-height:0;padding-top:15px;padding-right:15px;padding-left:15px;padding-bottom:15px;position:absolute;right:0;top:0;z-index:9021}.ab-iam-root.v3 .ab-in-app-message .ab-close-button svg{-webkit-transition:.2s ease;-moz-transition:.2s ease;-o-transition:.2s ease;transition:.2s ease;fill:#9b9b9b;height:auto;width:100%}.ab-iam-root.v3 .ab-in-app-message .ab-close-button svg.ab-chevron{display:none}.ab-iam-root.v3 .ab-in-app-message .ab-close-button:active{background-color:transparent}.ab-iam-root.v3 .ab-in-app-message .ab-close-button:focus{background-color:transparent}.ab-iam-root.v3 .ab-in-app-message .ab-close-button:hover{background-color:transparent}.ab-iam-root.v3 .ab-in-app-message .ab-close-button:hover svg{fill-opacity:.8}.ab-iam-root.v3 .ab-in-app-message .ab-message-text{float:none;line-height:1.5;margin:20px 25px;max-width:100%;overflow:hidden;overflow-y:auto;vertical-align:text-bottom;word-wrap:break-word;white-space:pre-wrap;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif}.ab-iam-root.v3 .ab-in-app-message .ab-message-text.start-aligned{text-align:start}.ab-iam-root.v3 .ab-in-app-message .ab-message-text.end-aligned{text-align:end}.ab-iam-root.v3 .ab-in-app-message .ab-message-text.center-aligned{text-align:center}.ab-iam-root.v3 .ab-in-app-message .ab-message-text::-webkit-scrollbar{-webkit-appearance:none;width:14px}.ab-iam-root.v3 .ab-in-app-message .ab-message-text::-webkit-scrollbar-thumb{-webkit-appearance:none;border:4px solid transparent;background-clip:padding-box;-webkit-border-radius:7px;-moz-border-radius:7px;border-radius:7px;background-color:rgba(0,0,0,.2)}.ab-iam-root.v3 .ab-in-app-message .ab-message-text::-webkit-scrollbar-button{width:0;height:0;display:none}.ab-iam-root.v3 .ab-in-app-message .ab-message-text::-webkit-scrollbar-corner{background-color:transparent}.ab-iam-root.v3 .ab-in-app-message .ab-message-header{float:none;letter-spacing:0;margin:0;font-weight:700;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif;display:block;font-size:20px;margin-bottom:10px;line-height:1.3}.ab-iam-root.v3 .ab-in-app-message .ab-message-header.start-aligned{text-align:start}.ab-iam-root.v3 .ab-in-app-message .ab-message-header.end-aligned{text-align:end}.ab-iam-root.v3 .ab-in-app-message .ab-message-header.center-aligned{text-align:center}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen,.ab-iam-root.v3 .ab-in-app-message.ab-modal,.ab-iam-root.v3 .ab-in-app-message.ab-slideup{-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;cursor:pointer;overflow:hidden;word-wrap:break-word;text-overflow:ellipsis;font-size:14px;font-weight:700;margin:20px;margin-top:calc(constant(safe-area-inset-top,0) + 20px);margin-right:calc(constant(safe-area-inset-right,0) + 20px);margin-bottom:calc(constant(safe-area-inset-bottom,0) + 20px);margin-left:calc(constant(safe-area-inset-left,0) + 20px);margin-top:calc(env(safe-area-inset-top,0) + 20px);margin-right:calc(env(safe-area-inset-right,0) + 20px);margin-bottom:calc(env(safe-area-inset-bottom,0) + 20px);margin-left:calc(env(safe-area-inset-left,0) + 20px);max-height:150px;padding:10px;right:0;background-color:#efefef}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone{max-height:66px;margin:10px;margin-top:calc(constant(safe-area-inset-top,0) + 10px);margin-right:calc(constant(safe-area-inset-right,0) + 10px);margin-bottom:calc(constant(safe-area-inset-bottom,0) + 10px);margin-left:calc(constant(safe-area-inset-left,0) + 10px);margin-top:calc(env(safe-area-inset-top,0) + 10px);margin-right:calc(env(safe-area-inset-right,0) + 10px);margin-bottom:calc(env(safe-area-inset-bottom,0) + 10px);margin-left:calc(env(safe-area-inset-left,0) + 10px);max-width:90%;max-width:calc(100% - 40px);min-width:90%;min-width:calc(100% - 40px)}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-close-button{display:none}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-close-button svg:not(.ab-chevron){display:none}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone.ab-clickable .ab-close-button{display:block;height:20px;padding:0 20px 0 18px;pointer-events:none;top:50%;-webkit-transform:translateY(-50%);-moz-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);width:12px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone.ab-clickable .ab-close-button svg.ab-chevron{display:inline}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone.ab-clickable .ab-message-text{border-right-width:40px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-message-text{max-width:100%;border-right-width:10px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-message-text span{max-height:66px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-message-text.ab-with-icon,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-message-text.ab-with-image{max-width:80%;max-width:calc(100% - 50px - 5px - 10px - 25px)}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-image-area{width:50px;height:50px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.simulate-phone .ab-image-area img{max-width:100%;max-height:100%;width:auto;height:auto}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable:active .ab-message-text,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable:focus .ab-message-text,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable:hover .ab-message-text{opacity:.8}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable:active .ab-close-button svg.ab-chevron,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable:focus .ab-close-button svg.ab-chevron,.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable:hover .ab-close-button svg.ab-chevron{fill-opacity:.8}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:table-cell;border-color:transparent;border-style:solid;border-width:5px 25px 5px 10px;max-width:430px;vertical-align:middle;margin:0}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text span{display:block;max-height:150px;overflow:auto}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text.ab-with-icon,.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text.ab-with-image{max-width:365px;border-top:0;border-bottom:0}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;background-color:transparent;background-size:15px;border:none;width:15px;min-width:15px;height:15px;cursor:pointer;display:block;font-size:15px;line-height:0;padding-top:15px;padding-right:15px;padding-left:15px;padding-bottom:15px;position:absolute;right:0;top:0;z-index:9021}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button svg{-webkit-transition:.2s ease;-moz-transition:.2s ease;-o-transition:.2s ease;transition:.2s ease;fill:#9b9b9b;height:auto;width:100%}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button svg.ab-chevron{display:none}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button:active{background-color:transparent}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button:focus{background-color:transparent}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button:hover{background-color:transparent}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button:hover svg{fill-opacity:.8}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-image-area{float:none;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:table-cell;border-color:transparent;border-style:solid;border-width:5px 0 5px 5px;vertical-align:top;width:60px;margin:0}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-image-area.ab-icon-area{width:auto}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-image-area img{float:none;width:100%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen,.ab-iam-root.v3 .ab-in-app-message.ab-modal{font-size:14px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-image-area{float:none;position:relative;display:block;overflow:hidden}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-image-area .ab-center-cropped-img,.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-image-area .ab-center-cropped-img{background-size:cover;background-repeat:no-repeat;background-position:50% 50%;position:absolute;top:0;right:0;bottom:0;left:0}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-icon,.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-icon{margin-top:20px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.graphic,.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic{padding:0}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.graphic .ab-message-text,.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic .ab-message-text{display:none}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.graphic .ab-message-buttons,.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic .ab-message-buttons{bottom:0;left:0}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.graphic .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic .ab-image-area{float:none;height:auto;margin:0}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.graphic .ab-image-area img,.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic .ab-image-area img{display:block;top:0;-webkit-transform:none;-moz-transform:none;-ms-transform:none;transform:none}.ab-iam-root.v3 .ab-in-app-message.ab-modal{padding-top:20px;width:450px;max-width:450px;max-height:720px}.ab-iam-root.v3 .ab-in-app-message.ab-modal.simulate-phone{max-width:91%;max-width:calc(100% - 30px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal.simulate-phone.graphic .ab-image-area img{max-width:91vw;max-width:calc(100vw - 30px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-message-text{max-height:660px}.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-message-text.ab-with-image{max-height:524.82758621px}.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-message-text.ab-with-icon{max-height:610px}.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-message-text.ab-with-buttons{margin-bottom:93px;max-height:587px}.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-message-text.ab-with-buttons.ab-with-image{max-height:451.82758621px}.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-message-text.ab-with-buttons.ab-with-icon{max-height:537px}.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-image-area{margin-top:-20px;max-height:155.17241379px}.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-image-area img{max-width:100%;max-height:155.17241379px}.ab-iam-root.v3 .ab-in-app-message.ab-modal .ab-image-area.ab-icon-area{height:auto}.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic{width:auto;overflow:hidden}.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic .ab-image-area{display:inline}.ab-iam-root.v3 .ab-in-app-message.ab-modal.graphic .ab-image-area img{width:auto;max-height:720px;max-width:450px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen{width:450px;max-height:720px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape{width:720px;max-height:450px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape .ab-image-area{height:225px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape.graphic .ab-image-area{height:450px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape .ab-message-text{max-height:112px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-message-text{max-height:247px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-message-text.ab-with-buttons{margin-bottom:93px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-image-area{height:360px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.graphic .ab-image-area{height:720px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone{-webkit-transition:top none;-moz-transition:top none;-o-transition:top none;transition:top none;top:0;right:0;bottom:0;left:0;height:100%;width:100%;max-height:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;-webkit-transform:none;-moz-transform:none;-ms-transform:none;transform:none;height:auto!important}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone.landscape .ab-close-button{margin-right:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-right:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0));margin-left:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-left:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0))}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone.landscape .ab-image-area{height:50%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone .ab-message-text{max-height:48%;max-height:calc(50% - 20px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone .ab-message-text.ab-with-buttons{margin-bottom:20px;max-height:30%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone.landscape .ab-message-text.ab-with-buttons{max-height:20%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone:not(.graphic){padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom,0);padding-bottom:env(safe-area-inset-bottom,0)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone:not(.graphic) .ab-message-buttons{padding-top:0;position:relative}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone.graphic{display:block}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone.graphic .ab-image-area{height:100%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.simulate-phone.graphic .ab-message-button{margin-bottom:0;margin-bottom:constant(safe-area-inset-bottom,0);margin-bottom:env(safe-area-inset-bottom,0)}.ab-iam-root.v3 .ab-in-app-message.ab-html-message{background-color:transparent;border:none;height:100%;overflow:auto;position:relative;touch-action:auto;width:100%}.ab-iam-root.v3 .ab-in-app-message .ab-message-buttons{position:absolute;bottom:0;width:100%;padding:17px 25px 30px 25px;z-index:inherit;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.ab-iam-root.v3 .ab-in-app-message .ab-message-button{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-border-radius:5px;-moz-border-radius:5px;border-radius:5px;-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none;cursor:pointer;display:inline-block;font-size:14px;font-weight:700;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif;height:44px;line-height:normal;letter-spacing:normal;margin:0;max-width:100%;min-width:80px;padding:0 12px;position:relative;text-transform:none;width:48%;width:calc(50% - 5px);border:1px solid #1b78cf;-webkit-transition:.2s ease;-moz-transition:.2s ease;-o-transition:.2s ease;transition:.2s ease;overflow:hidden;word-wrap:break-word;text-overflow:ellipsis;word-wrap:normal;white-space:nowrap}.ab-iam-root.v3 .ab-in-app-message .ab-message-button:first-of-type{float:left;background-color:#fff;color:#1b78cf}.ab-iam-root.v3 .ab-in-app-message .ab-message-button:last-of-type{float:right;background-color:#1b78cf;color:#fff}.ab-iam-root.v3 .ab-in-app-message .ab-message-button:first-of-type:last-of-type{float:none;width:auto}.ab-iam-root.v3 .ab-in-app-message .ab-message-button:after{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background-color:transparent}.ab-iam-root.v3 .ab-in-app-message .ab-message-button:after{-webkit-transition:.2s ease;-moz-transition:.2s ease;-o-transition:.2s ease;transition:.2s ease}.ab-iam-root.v3 .ab-in-app-message .ab-message-button:hover{opacity:.8}.ab-iam-root.v3 .ab-in-app-message .ab-message-button:active:after{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.08)}.ab-iam-root.v3 .ab-in-app-message .ab-message-button:focus:after{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.15)}.ab-iam-root.v3 .ab-in-app-message .ab-message-button a{color:inherit;text-decoration:inherit}.ab-iam-root.v3 .ab-in-app-message img{float:none;display:inline-block}.ab-iam-root.v3 .ab-in-app-message .ab-icon{float:none;display:inline-block;padding:10px;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px}.ab-iam-root.v3 .ab-in-app-message .ab-icon .fa{float:none;font-size:30px;width:30px}.ab-iam-root.v3 .ab-start-hidden{visibility:hidden}.ab-iam-root.v3 .ab-centered{margin:auto;position:absolute;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-moz-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.ab-iam-root.v3{-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.ab-iam-root.v3 .ab-page-blocker{position:fixed;top:0;left:0;width:100%;height:100%;z-index:9001;pointer-events:all;background-color:rgba(51,51,51,.75)}@media (max-width:600px){.ab-iam-root.v3 .ab-in-app-message.ab-slideup{max-height:66px;margin:10px;margin-top:calc(constant(safe-area-inset-top,0) + 10px);margin-right:calc(constant(safe-area-inset-right,0) + 10px);margin-bottom:calc(constant(safe-area-inset-bottom,0) + 10px);margin-left:calc(constant(safe-area-inset-left,0) + 10px);margin-top:calc(env(safe-area-inset-top,0) + 10px);margin-right:calc(env(safe-area-inset-right,0) + 10px);margin-bottom:calc(env(safe-area-inset-bottom,0) + 10px);margin-left:calc(env(safe-area-inset-left,0) + 10px);max-width:90%;max-width:calc(100% - 40px);min-width:90%;min-width:calc(100% - 40px)}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button{display:none}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-close-button svg:not(.ab-chevron){display:none}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable .ab-close-button{display:block;height:20px;padding:0 20px 0 18px;pointer-events:none;top:50%;-webkit-transform:translateY(-50%);-moz-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);width:12px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable .ab-close-button svg.ab-chevron{display:inline}.ab-iam-root.v3 .ab-in-app-message.ab-slideup.ab-clickable .ab-message-text{border-right-width:40px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text{max-width:100%;border-right-width:10px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text span{max-height:66px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text.ab-with-icon,.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-message-text.ab-with-image{max-width:80%;max-width:calc(100% - 50px - 5px - 10px - 25px)}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-image-area{width:50px;height:50px}.ab-iam-root.v3 .ab-in-app-message.ab-slideup .ab-image-area img{max-width:100%;max-height:100%;width:auto;height:auto}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape{-webkit-transition:top none;-moz-transition:top none;-o-transition:top none;transition:top none;top:0;right:0;bottom:0;left:0;height:100%;width:100%;max-height:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;-webkit-transform:none;-moz-transform:none;-ms-transform:none;transform:none;height:auto!important}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape .ab-close-button,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape.landscape .ab-close-button{margin-right:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-right:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0));margin-left:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-left:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0))}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen .ab-image-area,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape .ab-image-area,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape.landscape .ab-image-area{height:50%}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen .ab-message-text,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape .ab-message-text{max-height:48%;max-height:calc(50% - 20px - 20px)}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen .ab-message-text.ab-with-buttons,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape .ab-message-text.ab-with-buttons{margin-bottom:20px;max-height:30%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape .ab-message-text.ab-with-buttons,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape.landscape .ab-message-text.ab-with-buttons{max-height:20%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape:not(.graphic),.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen:not(.graphic){padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom,0);padding-bottom:env(safe-area-inset-bottom,0)}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape:not(.graphic) .ab-message-buttons,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen:not(.graphic) .ab-message-buttons{padding-top:0;position:relative}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.graphic,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape.graphic{display:block}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.graphic .ab-image-area,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape.graphic .ab-image-area{height:100%}.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.graphic .ab-message-button,.ab-iam-root.v3 .ab-in-app-message:not(.force-desktop).ab-fullscreen.landscape.graphic .ab-message-button{margin-bottom:0;margin-bottom:constant(safe-area-inset-bottom,0);margin-bottom:env(safe-area-inset-bottom,0)}}@media (max-width:480px){.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop){max-width:91%;max-width:calc(100% - 30px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop).graphic .ab-image-area img{max-width:91vw;max-width:calc(100vw - 30px)}}@media (max-height:750px){.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop){max-height:91%;max-height:calc(100% - 30px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop).graphic .ab-image-area img{max-height:91vh;max-height:calc(100vh - 30px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text{max-height:65vh;max-height:calc(100vh - 30px - 60px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text.ab-with-image{max-height:45vh;max-height:calc(100vh - 30px - 155.17241379310346px - 40px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text.ab-with-icon{max-height:45vh;max-height:calc(100vh - 30px - 70px - 40px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text.ab-with-buttons{max-height:50vh;max-height:calc(100vh - 30px - 93px - 40px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text.ab-with-buttons.ab-with-image{max-height:30vh;max-height:calc(100vh - 30px - 155.17241379310346px - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-modal:not(.force-desktop) .ab-message-text.ab-with-buttons.ab-with-icon{max-height:30vh;max-height:calc(100vh - 30px - 70px - 93px - 20px)}}@media (min-width:601px){.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen .ab-image-area img{max-height:100%;max-width:100%}}@media (max-height:750px) and (min-width:601px){.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop){-webkit-transition:top none;-moz-transition:top none;-o-transition:top none;transition:top none;top:0;right:0;bottom:0;left:0;height:100%;width:100%;max-height:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;-webkit-transform:none;-moz-transform:none;-ms-transform:none;transform:none;height:auto!important;width:450px}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop).landscape .ab-close-button{margin-right:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-right:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0));margin-left:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-left:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0))}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop) .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop).landscape .ab-image-area{height:50%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop) .ab-message-text{max-height:48%;max-height:calc(50% - 20px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop) .ab-message-text.ab-with-buttons{margin-bottom:20px;max-height:30%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop).landscape .ab-message-text.ab-with-buttons{max-height:20%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop):not(.graphic){padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom,0);padding-bottom:env(safe-area-inset-bottom,0)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop):not(.graphic) .ab-message-buttons{padding-top:0;position:relative}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop).graphic{display:block}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop).graphic .ab-image-area{height:100%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen:not(.landscape):not(.force-desktop).graphic .ab-message-button{margin-bottom:0;margin-bottom:constant(safe-area-inset-bottom,0);margin-bottom:env(safe-area-inset-bottom,0)}}@media (max-height:480px){.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop){-webkit-transition:top none;-moz-transition:top none;-o-transition:top none;transition:top none;top:0;right:0;bottom:0;left:0;height:100%;width:100%;max-height:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;-webkit-transform:none;-moz-transform:none;-ms-transform:none;transform:none;height:auto!important}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).landscape .ab-close-button{margin-right:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-right:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0));margin-left:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-left:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0))}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop) .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).landscape .ab-image-area{height:50%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop) .ab-message-text{max-height:48%;max-height:calc(50% - 20px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop) .ab-message-text.ab-with-buttons{margin-bottom:20px;max-height:30%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).landscape .ab-message-text.ab-with-buttons{max-height:20%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop):not(.graphic){padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom,0);padding-bottom:env(safe-area-inset-bottom,0)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop):not(.graphic) .ab-message-buttons{padding-top:0;position:relative}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).graphic{display:block}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).graphic .ab-image-area{height:100%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).graphic .ab-message-button{margin-bottom:0;margin-bottom:constant(safe-area-inset-bottom,0);margin-bottom:env(safe-area-inset-bottom,0)}}@media (max-width:750px){.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop){-webkit-transition:top none;-moz-transition:top none;-o-transition:top none;transition:top none;top:0;right:0;bottom:0;left:0;height:100%;width:100%;max-height:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;-webkit-transform:none;-moz-transform:none;-ms-transform:none;transform:none;height:auto!important}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).landscape .ab-close-button{margin-right:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-right:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0));margin-left:calc(constant(safe-area-inset-bottom,0) + constant(safe-area-inset-top,0));margin-left:calc(env(safe-area-inset-bottom,0) + env(safe-area-inset-top,0))}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop) .ab-image-area,.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).landscape .ab-image-area{height:50%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop) .ab-message-text{max-height:48%;max-height:calc(50% - 20px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop) .ab-message-text.ab-with-buttons{margin-bottom:20px;max-height:30%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).landscape .ab-message-text.ab-with-buttons{max-height:20%;max-height:calc(50% - 93px - 20px)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop):not(.graphic){padding-bottom:0;padding-bottom:constant(safe-area-inset-bottom,0);padding-bottom:env(safe-area-inset-bottom,0)}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop):not(.graphic) .ab-message-buttons{padding-top:0;position:relative}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).graphic{display:block}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).graphic .ab-image-area{height:100%}.ab-iam-root.v3 .ab-in-app-message.ab-fullscreen.landscape:not(.force-desktop).graphic .ab-message-button{margin-bottom:0;margin-bottom:constant(safe-area-inset-bottom,0);margin-bottom:env(safe-area-inset-bottom,0)}}")}function f(){p(),Object(b.a)()}var g=n(2766),m=n(3194),v=n(2770);function w(t,e){if(t=parseInt(t),isNaN(t))return"";e=parseFloat(e),isNaN(e)&&(e=1);const n=255&(t>>>=0),a=(65280&t)>>>8,i=(16711680&t)>>>16,s=((4278190080&t)>>>24)/255;return v.a.Og()?"rgba("+[i,a,n,s*e].join(",")+")":"rgb("+[i,a,n].join(",")+")"}var x=n(2730),y=n(2642);function S(t){if(!h.b.rr())return!1;if(!(t instanceof a.a||t instanceof s.a))return y.a.D.error(x.d),!1;const e=t instanceof s.a?y.a.A.ro:y.a.A.bi;return u.a.m().G(t,e).S}var A=n(2732),k=n(2771);function O(t){if(!h.b.rr())return!1;if(!(t instanceof a.a))return y.a.D.error(x.d),!1;const e=u.a.m().G(t,y.a.A.yi);if(e){t.Cr()||S(t);for(let n=0;n<e.ve.length;n++)k.a.er().je(A.a.Br,[t.triggerId],e.ve[n])}return e.S}var E=n(2889);function D(t,e,n){if(!h.b.rr())return!1;if(!(t instanceof o.a))return y.a.D.error("inAppMessage argument to logInAppMessageHtmlClick must be an HtmlMessage object."),!1;let a=y.a.A.yi;null!=e&&(a=y.a.A.ji);const i=u.a.m().G(t,a,e,n);if(i.S)for(let n=0;n<i.ve.length;n++)k.a.er().je(A.a.Br,[t.triggerId,e],i.ve[n]);return i.S}var N=n(2945),C=n(2654),T=n(2938),_=n(2937),I=n(2765);function j(t,e){if(!h.b.rr())return!1;if(!(t instanceof i.a))return y.a.D.error("button must be an InAppMessageButton object"),!1;if(!(e instanceof a.a))return y.a.D.error(x.d),!1;const n=u.a.m().Ai(t,e);if(n.S)for(let a=0;a<n.ve.length;a++)k.a.er().je(A.a.Br,[e.triggerId,t.id],n.ve[a]);return n.S}var P=n(2885);var M={Qe:t=>{const e=t.querySelectorAll(".ab-close-button, .ab-message-text, .ab-message-button");for(let t=0;t<e.length;t++)e[t].tabIndex=0;if(e.length>0){const n=e[0],a=e[e.length-1];t.addEventListener("keydown",(e=>{var i=document.activeElement;e.keyCode===P.a.oo&&(e.shiftKey||i!==a&&i!==t?!e.shiftKey||i!==n&&i!==t||(e.preventDefault(),a.focus()):(e.preventDefault(),n.focus()))}))}},Ve:(t,e)=>{e.setAttribute("role","dialog"),e.setAttribute("aria-modal",!0),e.setAttribute("aria-label","Modal Message"),t&&e.setAttribute("aria-labelledby",t)},Pe:(t,e,n,i)=>{if(t.buttons.length>0){const s=document.createElement("div");s.className="ab-message-buttons",n.appendChild(s);const r=n.getElementsByClassName("ab-message-text")[0];null!=r&&(r.className+=" ab-with-buttons");const o=s=>r=>(t.on(n,(()=>{j(s,t),s.clickAction===a.a.ClickAction.URI?Object(E.a)(s.uri,r,i||t.openTarget===a.a.OpenTarget.BLANK):s.clickAction===a.a.ClickAction.NEWS_FEED&&e()})),r.stopPropagation(),!1);for(let e=0;e<t.buttons.length;e++){const n=t.buttons[e],a=document.createElement("button");a.className="ab-message-button",a.setAttribute("type","button"),Object(g.c)(a,"touchstart",(function(){}));let i=n.text;""===n.text&&(i="Â "),a.appendChild(document.createTextNode(i)),t.sn()||(a.style.backgroundColor=w(n.backgroundColor),a.style.color=w(n.textColor),a.style.borderColor=w(n.borderColor)),a.onclick=o(n),s.appendChild(a)}}}};function R(t,e,i,s,u,h,d){if(t.Le=document.activeElement,t instanceof o.a)return function(t,e,i,s,r,o){const l=document.createElement("iframe");l.setAttribute("title","Modal Message"),r&&(l.style.zIndex=r+1);const c=e=>{const n=e.getAttribute("href"),i=e.onclick;return r=>{if(null!=i&&"function"==typeof i&&!1===i())return;let o=Object(_.b)(n).abButtonId;if(null!=o&&""!==o||(o=e.getAttribute("id")),null!=n&&""!==n&&0!==n.indexOf("#")){const i="blank"===(e.getAttribute("target")||"").toLowerCase().replace("_",""),c=s||t.openTarget===a.a.OpenTarget.BLANK||i,u=()=>{D(t,o,n),I.b.openUri(n,c,r)};c?u():t.on(l,u)}else D(t,o,n);return r.stopPropagation(),!1}},u=(t,e,n)=>{const a=`([\\w]+)\\s*=\\s*document.createElement\\(['"]${n}['"]\\)`,i=t.match(new RegExp(a));if(i){const n=`${i[1]}.setAttribute("nonce", "${e}")`;return`${t.slice(0,i.index+i[0].length)};${n};${t.slice(i.index+i[0].length)}`}return null};if(l.onload=()=>{let s=null;if(null!=o){s=document.createElement("html"),s.innerHTML=t.message;const e=s.getElementsByTagName("style");for(let t=0;t<e.length;t++)e[t].setAttribute("nonce",o);const n=s.getElementsByTagName("script");for(let t=0;t<n.length;t++){n[t].setAttribute("nonce",o),n[t].innerHTML=n[t].innerHTML.replace(/<style>/g,`<style nonce='${o}'>`);const e=u(n[t].innerHTML,o,"script");e&&(n[t].innerHTML=e);const a=u(n[t].innerHTML,o,"style");a&&(n[t].innerHTML=a)}}l.contentWindow.focus(),l.contentWindow.document.write(s?s.innerHTML:t.message);const r=l.contentWindow.document.getElementsByTagName("head")[0];if(null!=r){if(p(r),t.sn()){const e=document.createElement("style");e.innerHTML=t.css,e.id=t.rn(),null!=o&&e.setAttribute("nonce",o),r.appendChild(e)}const e=l.contentWindow.document.createElement("base");e.setAttribute("target","_parent"),r.appendChild(e)}const h=l.contentWindow.document.getElementsByTagName("title");h.length>0&&l.setAttribute("title",h[0].textContent);const d={closeMessage:function(){t.on(l)},logClick:function(){const e=[t,...arguments];D.apply(t,Array.prototype.slice.call(e))},display:{},web:{}},b=function(){return function(){const t=arguments;Promise.resolve().then(n.bind(null,3097)).then((e=>{e.requestPushPermission.apply(null,Array.prototype.slice.call(t))}))}},f={requestImmediateDataFlush:async function(){const t=arguments;(await Promise.resolve().then(n.bind(null,3199))).requestImmediateDataFlush.apply(null,Array.prototype.slice.call(t))},logCustomEvent:async function(){const t=arguments;(await Promise.resolve().then(n.bind(null,3094))).logCustomEvent.apply(null,Array.prototype.slice.call(t))},logPurchase:async function(){const t=arguments;(await Promise.resolve().then(n.bind(null,3198))).logPurchase.apply(null,Array.prototype.slice.call(t))},unregisterPush:async function(){const t=arguments;(await Promise.resolve().then(n.bind(null,3203))).unregisterPush.apply(null,Array.prototype.slice.call(t))},requestPushPermission:b(),changeUser:async function(){const t=arguments;(await Promise.resolve().then(n.bind(null,3197))).changeUser.apply(null,Array.prototype.slice.call(t))}},g=function(t){return function(){f[t].apply(null,Array.prototype.slice.call(arguments))}};for(const t of Object(C.f)(f))d[t]=g(t);const m=["setFirstName","setLastName","setEmail","setGender","setDateOfBirth","setCountry","setHomeCity","setEmailNotificationSubscriptionType","setLanguage","addAlias","setPushNotificationSubscriptionType","setPhoneNumber","setCustomUserAttribute","addToCustomAttributeArray","removeFromCustomAttributeArray","incrementCustomUserAttribute","setCustomLocationAttribute","addToSubscriptionGroup","removeFromSubscriptionGroup"],v=function(t){return function(){const e=Object(N.a)();e[t].apply(e,Array.prototype.slice.call(arguments))}},w={};for(let t=0;t<m.length;t++)w[m[t]]=v(m[t]);d.getUser=function(){return w};const x={showFeed:e},y=function(e){return function(){const n=arguments;t.on(l,(function(){x[e].apply(null,Array.prototype.slice.call(n))}))}};for(const t of Object(C.f)(x))d.display[t]=y(t);const S={registerAppboyPushMessages:b()},A=function(t){return function(){S[t].apply(null,Array.prototype.slice.call(arguments))}};for(const t of Object(C.f)(S))d.web[t]=A(t);if(l.contentWindow.appboyBridge=d,l.contentWindow.brazeBridge=d,t.un!==a.a.es.cn){const t=l.contentWindow.document.getElementsByTagName("a");for(let e=0;e<t.length;e++)t[e].onclick=c(t[e]);const e=l.contentWindow.document.getElementsByTagName("button");for(let t=0;t<e.length;t++)e[t].onclick=c(e[t])}const k=l.contentWindow.document.body;if(null!=k){t.an()&&(k.id=t.htmlId);const e=document.createElement("hidden");e.onclick=d.closeMessage,e.className="ab-programmatic-close-button",k.appendChild(e)}l.contentWindow.dispatchEvent(new CustomEvent("ab.BridgeReady")),-1!==l.className.indexOf("ab-start-hidden")&&(l.className=l.className.replace("ab-start-hidden",""),i(l)),document.activeElement!==l&&l.focus()},l.className="ab-in-app-message ab-start-hidden ab-html-message ab-modal-interactions",v.a.OS===T.b.ln){const e=document.createElement("div");return e.className="ab-ios-scroll-wrapper",e.appendChild(l),t.mn=e,e}return t.mn=l,l}(t,e,i,u,h,d);const b=function(t,e,n,i,s,r){const o=document.createElement("div");var l;o.className="ab-in-app-message ab-start-hidden ab-background",r&&(o.style.zIndex=r+1),t.Ie()&&(o.className+=" ab-modal-interactions",o.setAttribute("tabindex","-1")),t.sn()||(o.style.color=w(t.textColor),o.style.backgroundColor=w(t.backgroundColor),l=t.backgroundColor,l=parseInt(l),!isNaN(l)&&(4278190080&l)>>>24==0&&(o.className+=" ab-no-shadow"));const c=()=>{-1!==o.className.indexOf("ab-start-hidden")&&(o.className=o.className.replace("ab-start-hidden",""),document.querySelectorAll(".ab-iam-img-loading").length>0?i(`Cannot show in-app message ${t.message} because another message is being shown.`,a.a.Ge.Ee):n(o))},u=()=>{const t=document.querySelectorAll(".ab-iam-root");t&&t.length>0&&(t[0].classList.remove("ab-iam-img-loading"),c())};t.imageStyle===a.a.ImageStyle.GRAPHIC&&(o.className+=" graphic"),t.orientation===a.a.Orientation.LANDSCAPE&&(o.className+=" landscape"),0===t.buttons.length&&(t.clickAction!==a.a.ClickAction.NONE&&(o.className+=" ab-clickable"),o.onclick=n=>(t.on(o,(()=>{O(t),t.clickAction===a.a.ClickAction.URI?Object(E.a)(t.uri,n,s||t.openTarget===a.a.OpenTarget.BLANK):t.clickAction===a.a.ClickAction.NEWS_FEED&&e()})),n.stopPropagation(),!1));const h=Object(m.a)("Close Message",t.sn()?void 0:w(t.closeButtonColor),(()=>{t.on(o)}));o.appendChild(h),r&&(h.style.zIndex=r+2);const d=document.createElement("div");d.className="ab-message-text";const b=(t.messageAlignment||t.He).toLowerCase();d.className+=" "+b+"-aligned";let p=!1;const f=document.createElement("div");if(f.className="ab-image-area",t.imageUrl){if(t.cropType===a.a.CropType.CENTER_CROP){const e=document.createElement("span");e.className="ab-center-cropped-img",e.style.backgroundImage="url("+t.imageUrl+")",e.setAttribute("role","img"),e.setAttribute("aria-label","Modal Image"),t.Je(e),f.appendChild(e)}else{const e=document.createElement("img");if(e.setAttribute("src",t.imageUrl),t.Je(e),0===document.querySelectorAll(".ab-iam-img-loading").length){p=!0;const t=document.querySelectorAll(".ab-iam-root");t&&t.length>0&&t[0].classList.add("ab-iam-img-loading"),e.onload=u}setTimeout(c,1e3),f.appendChild(e)}o.appendChild(f),d.className+=" ab-with-image"}else if(t.icon){f.className+=" ab-icon-area";const e=document.createElement("span");e.className="ab-icon",t.sn()||(e.style.backgroundColor=w(t.iconBackgroundColor),e.style.color=w(t.iconColor));const n=document.createElement("i");n.className="fa",n.appendChild(document.createTextNode(t.icon)),n.setAttribute("aria-hidden",!0),e.appendChild(n),f.appendChild(e),o.appendChild(f),d.className+=" ab-with-icon"}if(Object(g.c)(d,"touchstart",(function(){})),t.header&&t.header.length>0){const e=document.createElement("h1");e.className="ab-message-header",t.Ke=y.a.it.nt(),e.id=t.Ke;const n=(t.headerAlignment||a.a.TextAlignment.CENTER).toLowerCase();e.className+=" "+n+"-aligned",t.sn()||(e.style.color=w(t.headerTextColor)),e.appendChild(document.createTextNode(t.header)),d.appendChild(e)}return d.appendChild(t.Oe()),o.appendChild(d),p||c(),t.mn=o,o}(t,e,i,s,u,h);if(t instanceof r.a||t instanceof l.a){const n=t instanceof r.a?"ab-fullscreen":"ab-modal";b.className+=` ${n} ab-centered`,M.Pe(t,e,b,u),M.Qe(b),M.Ve(t.Ke,b)}else if(t instanceof c.a){b.className+=" ab-slideup";const e=b.getElementsByClassName("ab-close-button")[0];if(null!=e){const n=Object(g.e)("0 0 11.38 19.44","M11.38 9.72l-9.33 9.72L0 17.3l7.27-7.58L0 2.14 2.05 0l9.33 9.72z",t.sn()?void 0:w(t.closeButtonColor));n.setAttribute("class","ab-chevron"),e.appendChild(n)}let n,i;Object(g.g)(b,g.a.ot,(t=>{b.className+=" ab-swiped-left",e.onclick(t)})),Object(g.g)(b,g.a.et,(t=>{b.className+=" ab-swiped-right",e.onclick(t)})),t.slideFrom===a.a.SlideFrom.TOP?(n=g.a.We,i=" ab-swiped-up"):(n=g.a.Xe,i=" ab-swiped-down"),Object(g.g)(b,n,(t=>{b.className+=i,e.onclick(t)}))}return b}function z(t,e,i){if(!h.b.rr())return;if(f(),null==t)return!1;if(t instanceof s.a)return y.a.D.info("User received control for a multivariate test, logging to Braze servers."),S(t),!0;if(!(t instanceof a.a))return!1;const d=u.a.m();t.hh();const b=t instanceof o.a;if(b&&!t.trusted&&!h.b.tr())return y.a.D.error('HTML in-app messages are disabled. Use the "allowUserSuppliedJavascript" option for braze.initialize to enable these messages.'),d.di(t.triggerId,a.a.Ge.Eh),!1;if(null==e&&(e=document.body),t.Ie()&&e.querySelectorAll(".ab-modal-interactions").length>0)return y.a.D.info(`Cannot show in-app message ${t.message} because another message is being shown.`),d.di(t.triggerId,a.a.Ge.Ee),!1;if(I.b.so()){const e=I.b.io();if(e===I.a.PORTRAIT&&t.orientation===a.a.Orientation.LANDSCAPE||e===I.a.LANDSCAPE&&t.orientation===a.a.Orientation.PORTRAIT){const n=e===I.a.PORTRAIT?"portrait":"landscape",i=t.orientation===a.a.Orientation.PORTRAIT?"portrait":"landscape";return y.a.D.info(`Not showing ${i} in-app message ${t.message} because the screen is currently ${n}`),d.di(t.triggerId,a.a.Ge.uh),!1}}if(!h.b.tr()){let e=!1;if(t.buttons&&t.buttons.length>0){const n=t.buttons;for(let t=0;t<n.length;t++)if(n[t].clickAction===a.a.ClickAction.URI){const a=n[t].uri;e=Object(_.a)(a)}}else t.clickAction===a.a.ClickAction.URI&&(e=Object(_.a)(t.uri));if(e)return y.a.D.error('Javascript click actions are disabled. Use the "allowUserSuppliedJavascript" option for braze.initialize to enable these actions.'),d.di(t.triggerId,a.a.Ge.Eh),!1}const p=document.createElement("div");if(p.className="ab-iam-root v3",p.className+=function(t){let e="";return t.animateIn&&(e+=" ab-animate-in"),t.animateOut&&(e+=" ab-animate-out"),t instanceof r.a?e+=" ab-effect-fullscreen":t instanceof o.a?e+=" ab-effect-html":t instanceof l.a?e+=" ab-effect-modal":t instanceof c.a&&(e+=" ab-effect-slide"),e}(t),p.setAttribute("role","complementary"),t.an()&&(p.id=t.htmlId),h.b.nn(h.a.no)&&(p.style.zIndex=h.b.nn(h.a.no)+1),e.appendChild(p),t.sn()){const e=document.createElement("style");e.innerHTML=t.css,e.id=t.rn(),null!=h.b.nn(h.a.ao)&&e.setAttribute("nonce",h.b.nn(h.a.ao)),document.getElementsByTagName("head")[0].appendChild(e)}const g=t instanceof c.a,m=R(t,(()=>{Promise.resolve().then(n.bind(null,3201)).then((t=>t.showFeed()))}),(e=>{if(t.Ie()&&t.ll()){const n=document.createElement("div");if(n.className="ab-page-blocker",t.sn()||(n.style.backgroundColor=w(t.frameColor)),h.b.nn(h.a.no)&&(n.style.zIndex=h.b.nn(h.a.no)),p.appendChild(n),!h.b.nn(h.a.eh)){const i=(new Date).valueOf();n.onclick=n=>{(new Date).valueOf()-i>a.a.Ah&&(t.on(e),n.stopPropagation())}}p.appendChild(e),e.focus(),t.th(p)}else if(g){const n=document.querySelectorAll(".ab-slideup");let i=null;for(let t=n.length-1;t>=0;t--)if(n[t]!==e){i=n[t];break}if(t.slideFrom===a.a.SlideFrom.TOP){let t=0;null!=i&&(t=i.offsetTop+i.offsetHeight),e.style.top=Math.max(t,0)+"px"}else{let t=0;null!=i&&(t=(window.innerHeight||document.documentElement.clientHeight)-i.offsetTop),e.style.bottom=Math.max(t,0)+"px"}}else if(b&&!h.b.nn(h.a.eh)){const n=t;e.contentWindow.addEventListener("keydown",(function(t){t.keyCode===P.a.ih&&n.closeMessage()}))}S(t),t.dismissType===a.a.DismissType.AUTO_DISMISS&&setTimeout((()=>{p.contains(e)&&t.on(e)}),t.duration),"function"==typeof i&&i()}),((e,n)=>{y.a.D.info(e),d.di(t.triggerId,n)}),h.b.nn(h.a.lo),h.b.nn(h.a.no),h.b.nn(h.a.ao));return(b||g)&&(p.appendChild(m),t.th(p)),!0}function U(t){if(h.b.rr())return"function"!=typeof t?null:u.a.m().mi((function(e){return t(e[0]),e.slice(1)}))}function B(){if(!h.b.rr())return;f();const t=u.a.m();if(null==t.gi()){const e=U((t=>z(t)));t.fi(e)}return t.gi()}},3109:function(t,e,n){"use strict";n.d(e,"a",(function(){return a.a})),n.d(e,"c",(function(){return r})),n.d(e,"b",(function(){return l})),n.d(e,"d",(function(){return c.a})),n.d(e,"e",(function(){return u.a})),n.d(e,"f",(function(){return h.showFeed})),n.d(e,"g",(function(){return d.a})),n.d(e,"h",(function(){return b}));var a=n(3095),i=n(2641),s=n(2963);function r(){if(i.b.rr())return s.a.er().ai()}var o=n(2957);function l(){if(!i.b.rr())return;const t=document.querySelectorAll(".ab-feed");for(let e=0;e<t.length;e++)Object(o.b)(t[e])}var c=n(3200),u=n(3096),h=n(3201),d=n(3202);function b(t,e,n){i.b.rr()&&(document.querySelectorAll(".ab-feed").length>0?l():Object(h.showFeed)(t,e,n))}},3120:function(t,e,n){"use strict";var a=n(3186),i=n(2731),s=n(2942),r=n(2642),o=n(2658);class l{constructor(t,e,n){this.h=t,this.j=e,this.v=n}C(t,e){const n=new s.a;if(t.k(),null==t.url||""===t.url)return r.a.D.info(`Card ${t.id} has no url. Not logging click to Braze servers.`),n;if(e){const e=this.h.I(o.a.q.$)||{};e[t.id]=!0,this.h.B(o.a.q.$,e)}const a=this.N([t]);if(null==a)return n;const l=e?r.a.A._:r.a.A.F;return i.a.G(l,a)}H(t){const e=new s.a;if(!t.J())return r.a.D.info(`Card ${t.id} refused this dismissal. Ignoring analytics event.`),e;const n=this.h.I(o.a.q.K)||{};n[t.id]=!0,this.h.B(o.a.q.K,n);const a=this.N([t]);return null==a?e:i.a.G(r.a.A.L,a)}M(t,e){const n=new s.a(!0),l=[],c=[];let u;u=e?this.h.I(o.a.q.O)||{}:this.h.I(o.a.q.P)||{};for(const e of t)e.R(),e instanceof a.a?c.push(e):l.push(e),u[e.id]=!0;const h=this.N(l),d=this.N(c);if(null==h&&null==d)return n.S=!1,n;if(e?this.h.B(o.a.q.O,u):this.h.B(o.a.q.P,u),null!=h){const t=e?r.a.A.T:r.a.A.U,a=i.a.G(t,h);n.V(a)}if(null!=d&&e){const t=i.a.G(r.a.A.W,d);n.V(t)}return n}N(t){let e=null;for(let n=0;n<t.length;n++)null!=t[n].id&&""!==t[n].id&&(e=e||{},e.ids=e.ids||[],e.ids.push(t[n].id));return e}}var c=n(2641);const u={t:!1,i:null,m:()=>(u.o(),u.i||(u.i=new l(c.b.l(),c.b.g(),c.b.p())),u.i),o:()=>{u.t||(c.b.u(u),u.t=!0)},destroy:()=>{u.i=null,u.t=!1}};e.a=u},3183:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var a=n(2810);class i extends a.a{constructor(t,e,n,a,i,s,r,o,l,c,u,h,d,b){super(t,e,null,n,null,a,i,s,r,o,l,c,u,h,d,b),this.Y="ab-banner",this.Z=!1}ss(){const t={};return t[a.a.hs.ts]=a.a.es.rs,t[a.a.hs.ns]=this.id,t[a.a.hs.ls]=this.viewed,t[a.a.hs.os]=this.imageUrl,t[a.a.hs.us]=this.updated,t[a.a.hs.cs]=this.created,t[a.a.hs.ds]=this.categories,t[a.a.hs.ps]=this.expiresAt,t[a.a.hs.URL]=this.url,t[a.a.hs.bs]=this.linkText,t[a.a.hs.fs]=this.aspectRatio,t[a.a.hs.xs]=this.extras,t[a.a.hs.js]=this.pinned,t[a.a.hs.zs]=this.dismissible,t[a.a.hs.gs]=this.clicked,t[a.a.hs.ks]=this.test,t}}},3184:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var a=n(2810);class i extends a.a{constructor(t,e,n,a,i,s,r,o,l,c,u,h,d,b,p,f){super(t,e,n,a,i,s,r,o,l,c,u,h,d,b,p,f),this.Y="ab-captioned-image",this.Z=!0}ss(){const t={};return t[a.a.hs.ts]=a.a.es.st,t[a.a.hs.ns]=this.id,t[a.a.hs.ls]=this.viewed,t[a.a.hs.ht]=this.title,t[a.a.hs.os]=this.imageUrl,t[a.a.hs.rt]=this.description,t[a.a.hs.us]=this.updated,t[a.a.hs.cs]=this.created,t[a.a.hs.ds]=this.categories,t[a.a.hs.ps]=this.expiresAt,t[a.a.hs.URL]=this.url,t[a.a.hs.bs]=this.linkText,t[a.a.hs.fs]=this.aspectRatio,t[a.a.hs.xs]=this.extras,t[a.a.hs.js]=this.pinned,t[a.a.hs.zs]=this.dismissible,t[a.a.hs.gs]=this.clicked,t[a.a.hs.ks]=this.test,t}}},3185:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var a=n(2810);class i extends a.a{constructor(t,e,n,a,i,s,r,o,l,c,u,h,d,b,p,f){super(t,e,n,a,i,s,r,o,l,c,u,h,d,b,p,f),this.Y="ab-classic-card",this.Z=!0}ss(){const t={};return t[a.a.hs.ts]=a.a.es.Rt,t[a.a.hs.ns]=this.id,t[a.a.hs.ls]=this.viewed,t[a.a.hs.ht]=this.title,t[a.a.hs.os]=this.imageUrl,t[a.a.hs.rt]=this.description,t[a.a.hs.us]=this.updated,t[a.a.hs.cs]=this.created,t[a.a.hs.ds]=this.categories,t[a.a.hs.ps]=this.expiresAt,t[a.a.hs.URL]=this.url,t[a.a.hs.bs]=this.linkText,t[a.a.hs.fs]=this.aspectRatio,t[a.a.hs.xs]=this.extras,t[a.a.hs.js]=this.pinned,t[a.a.hs.zs]=this.dismissible,t[a.a.hs.gs]=this.clicked,t[a.a.hs.ks]=this.test,t}}},3186:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var a=n(2810);class i extends a.a{constructor(t,e,n,a,i,s){super(t,e,null,null,null,null,n,null,a,null,null,null,i,s,null),this.isControl=!0,this.Y="ab-control-card",this.Z=!1}ss(){const t={};return t[a.a.hs.ts]=a.a.es._t,t[a.a.hs.ns]=this.id,t[a.a.hs.ls]=this.viewed,t[a.a.hs.us]=this.updated,t[a.a.hs.ps]=this.expiresAt,t[a.a.hs.xs]=this.extras,t[a.a.hs.js]=this.pinned,t[a.a.hs.ks]=this.test,t}}},3187:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var a=n(2654),i=n(2642),s=n(2676),r=n(2707);class o{constructor(t,e){this.v=t,this.si=e}getUserId(t){null==t&&i.a.D.error("getUserId must be supplied with a callback. e.g., braze.getUser().getUserId(function(userId) {console.log('the user id is ' + userId)})"),"function"==typeof t&&t(this.v.getUserId())}addAlias(t,e){return!Object(r.g)(t,"add alias","the alias",!1)||t.length<=0?(i.a.D.error("addAlias requires a non-empty alias"),!1):!Object(r.g)(e,"add alias","the label",!1)||e.length<=0?(i.a.D.error("addAlias requires a non-empty label"),!1):this.si.Nn(t,e).S}setFirstName(t){return!!Object(r.g)(t,"set first name","the firstName",!0)&&this.v.nu("first_name",t)}setLastName(t){return!!Object(r.g)(t,"set last name","the lastName",!0)&&this.v.nu("last_name",t)}setEmail(t){return null===t||Object(r.d)(t)?this.v.nu("email",t):(i.a.D.error(`Cannot set email address - "${t}" did not pass RFC-5322 validation.`),!1)}setGender(t){return"string"==typeof t&&(t=t.toLowerCase()),!(null!==t&&!Object(a.g)(o.Genders,t,`Gender "${t}" is not a valid gender.`,"User.Genders"))&&this.v.nu("gender",t)}setDateOfBirth(t,e,n){return null===t&&null===e&&null===n?this.v.nu("dob",null):(t=parseInt(t),e=parseInt(e),n=parseInt(n),isNaN(t)||isNaN(e)||isNaN(n)||e>12||e<1||n>31||n<1?(i.a.D.error("Cannot set date of birth - parameters should comprise a valid date e.g. setDateOfBirth(1776, 7, 4);"),!1):this.v.nu("dob",`${t}-${e}-${n}`))}setCountry(t){return!!Object(r.g)(t,"set country","the country",!0)&&this.v.nu("country",t)}setHomeCity(t){return!!Object(r.g)(t,"set home city","the homeCity",!0)&&this.v.nu("home_city",t)}setLanguage(t){return!!Object(r.g)(t,"set language","the language",!0)&&this.v.nu("language",t)}setEmailNotificationSubscriptionType(t){return!!Object(a.g)(o.NotificationSubscriptionTypes,t,`Email notification setting "${t}" is not a valid subscription type.`,"User.NotificationSubscriptionTypes")&&this.v.nu("email_subscribe",t)}setPushNotificationSubscriptionType(t){return!!Object(a.g)(o.NotificationSubscriptionTypes,t,`Push notification setting "${t}" is not a valid subscription type.`,"User.NotificationSubscriptionTypes")&&this.v.nu("push_subscribe",t)}setPhoneNumber(t){return!!Object(r.g)(t,"set phone number","the phoneNumber",!0)&&(null===t||t.match(o.Cn)?this.v.nu("phone",t):(i.a.D.error(`Cannot set phone number - "${t}" did not pass validation.`),!1))}setLastKnownLocation(t,e,n,a,s){return null==t||null==e?(i.a.D.error("Cannot set last-known location - latitude and longitude are required."),!1):(t=parseFloat(t),e=parseFloat(e),null!=n&&(n=parseFloat(n)),null!=a&&(a=parseFloat(a)),null!=s&&(s=parseFloat(s)),isNaN(t)||isNaN(e)||null!=n&&isNaN(n)||null!=a&&isNaN(a)||null!=s&&isNaN(s)?(i.a.D.error("Cannot set last-known location - all supplied parameters must be numeric."),!1):t>90||t<-90||e>180||e<-180?(i.a.D.error("Cannot set last-known location - latitude and longitude are bounded by Â±90 and Â±180 respectively."),!1):null!=n&&n<0||null!=s&&s<0?(i.a.D.error("Cannot set last-known location - accuracy and altitudeAccuracy may not be negative."),!1):this.si.setLastKnownLocation(this.v.getUserId(),t,e,a,n,s).S)}setCustomUserAttribute(t,e){if(!Object(r.f)(t,"set custom user attribute","the given key"))return!1;const n=typeof e,o=Object(a.c)(e),l=Object(a.b)(e);if("number"!==n&&"boolean"!==n&&!o&&!l&&null!==e&&!Object(r.f)(e,`set custom user attribute "${t}"`,"the given value"))return!1;if(o&&(e=Object(s.h)(e)),l){for(let n=0;n<e.length;n++){const a=e[n];if(!Object(r.f)(a,`set custom user attribute "${t}"`,"the element in the given array"))return!1}return this.si.In(i.a.A.Un,t,e).S}return this.v.setCustomUserAttribute(t,e)}addToCustomAttributeArray(t,e){return!!Object(r.f)(t,"add to custom user attribute array","the given key")&&!(null!=e&&!Object(r.f)(e,"add to custom user attribute array","the given value"))&&this.si.In(i.a.A.En,t,e).S}removeFromCustomAttributeArray(t,e){return!!Object(r.f)(t,"remove from custom user attribute array","the given key")&&!(null!=e&&!Object(r.f)(e,"remove from custom user attribute array","the given value"))&&this.si.In(i.a.A.Fn,t,e).S}incrementCustomUserAttribute(t,e){if(!Object(r.f)(t,"increment custom user attribute","the given key"))return!1;null==e&&(e=1);const n=parseInt(e);return isNaN(n)||n!==parseFloat(e)?(i.a.D.error(`Cannot increment custom user attribute because the given incrementValue "${e}" is not an integer.`),!1):this.si.In(i.a.A.Tn,t,n).S}setCustomLocationAttribute(t,e,n){return!!Object(r.f)(t,"set custom location attribute","the given key")&&((null!==e||null!==n)&&(e=parseFloat(e),n=parseFloat(n),isNaN(e)||e>90||e<-90||isNaN(n)||n>180||n<-180)?(i.a.D.error("Received invalid values for latitude and/or longitude. Latitude and longitude are bounded by Â±90 and Â±180 respectively, or must both be null for removal."),!1):this.si.$n(t,e,n).S)}addToSubscriptionGroup(t){return!Object(r.g)(t,"add user to subscription group","subscription group ID",!1)||t.length<=0?(i.a.D.error("addToSubscriptionGroup requires a non-empty subscription group ID"),!1):this.si.Bn(t,o.Ln.SUBSCRIBED).S}removeFromSubscriptionGroup(t){return!Object(r.g)(t,"remove user from subscription group","subscription group ID",!1)||t.length<=0?(i.a.D.error("removeFromSubscriptionGroup requires a non-empty subscription group ID"),!1):this.si.Bn(t,o.Ln.UNSUBSCRIBED).S}Zr(t,e,n,a,i){this.v.Zr(t,e,n,a,i),this.si.Rn()}fn(t){this.v.fn(t)}}o.Cn=/^[0-9 .\\(\\)\\+\\-]+$/,o.Genders={MALE:"m",FEMALE:"f",OTHER:"o",UNKNOWN:"u",NOT_APPLICABLE:"n",PREFER_NOT_TO_SAY:"p"},o.NotificationSubscriptionTypes={OPTED_IN:"opted_in",SUBSCRIBED:"subscribed",UNSUBSCRIBED:"unsubscribed"},o.Ln={SUBSCRIBED:"subscribed",UNSUBSCRIBED:"unsubscribed"},o.On="user_id",o.lu="custom",o.ee=997},3188:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var a=n(2676);class i{constructor(t,e,n,a,i){this.endpoint=t||null,this._n=e||null,this.publicKey=n||null,this.zl=a||null,this.gl=i||null}ss(){return{e:this.endpoint,c:this._n,p:this.publicKey,u:this.zl,v:this.gl}}static jn(t){return new i(t.e,Object(a.d)(t.c),t.p,t.u,t.v)}}},3189:function(t,e,n){"use strict";e.a={Ra:"invalid_api_key",ba:"blacklisted",ga:"no_device_identifier",pa:"invalid_json_response",ma:"empty_response",__:"sdk_auth_error"}},3190:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var a=n(2642);function i(t,e,n){let i=`The '${t}' ${e} is deprecated.`;n&&(i+=` Please use '${n}' instead.`),a.a.D.warn(i)}},3191:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var a=n(2667),i=n(2813),s=n(2888),r=n(2733),o=n(2886),l=n(2887),c=n(2814),u=n(2642);function h(t){if(t.is_control)return i.a.fromJson(t);let e=t.type;null!=e&&(e=e.toUpperCase());const n=t.message,h=t.text_align_message,d=t.slide_from,b=t.extras,p=t.trigger_id,f=t.click_action,g=t.uri,m=t.open_target,v=t.message_close,w=t.duration,x=t.icon,y=t.image_url,S=t.image_style,A=t.icon_color,k=t.icon_bg_color,O=t.bg_color,E=t.text_color,D=t.close_btn_color,N=t.header,C=t.text_align_header,T=t.header_text_color,_=t.frame_color,I=[];let j=t.btns;null==j&&(j=[]);for(let t=0;t<j.length;t++)I.push(o.a.fromJson(j[t]));const P=t.crop_type,M=t.orientation,R=t.animate_in,z=t.animate_out;let U,B=t.html_id,q=t.css;if(null!=B&&""!==B&&null!=q&&""!==q||(B=void 0,q=void 0),e===l.a.es||e===a.a.es.Ye)U=new l.a(n,h,b,p,f,g,m,v,w,x,y,S,A,k,O,E,D,R,z,N,C,T,_,I,P,B,q);else if(e===s.a.es)U=new s.a(n,h,b,p,f,g,m,v,w,x,y,S,A,k,O,E,D,R,z,N,C,T,_,I,P,M,B,q);else if(e===c.a.es)U=new c.a(n,h,d,b,p,f,g,m,v,w,x,y,A,k,O,E,D,R,z,B,q);else{if(e!==r.a.es&&e!==a.a.es.cn)return void u.a.D.error("Ignoring message with unknown type "+e);{const e=t.message_fields;U=new r.a(n,b,p,v,w,R,z,_,B,q,e),U.trusted=t.trusted||!1}}return U.un=e,U}},3192:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var a=n(2810),i=n(3120),s=n(2730),r=n(2641),o=n(2642);function l(t){return!!r.b.rr()&&(t instanceof a.a?i.a.m().H(t).S:(o.a.D.error("card "+s.c),!1))}},3193:function(t,e,n){"use strict";n.d(e,"a",(function(){return h})),n.d(e,"b",(function(){return d})),n.d(e,"c",(function(){return b}));var a=n(2810),i=n(3185),s=n(3184),r=n(3183),o=n(3186),l=n(2676),c=n(2642);function u(t,e,n,l,u,h,d,b,p,f,g,m,v,w,x,y,S,A){let k;if(e===a.a.es.dt||e===a.a.es.Rt)k=new i.a(t,n,l,u,h,d,b,p,f,g,m,v,w,x,y,S);else if(e===a.a.es.st)k=new s.a(t,n,l,u,h,d,b,p,f,g,m,v,w,x,y,S);else if(e===a.a.es.rs)k=new r.a(t,n,u,d,b,p,f,g,m,v,w,x,y,S);else{if(e!==a.a.es._t)return c.a.D.error("Ignoring card with unknown type "+e),null;k=new o.a(t,n,b,f,w,x)}return A&&(k.test=A),k}function h(t){if(t[a.a.At.Dt])return null;const e=t[a.a.At.ns],n=t[a.a.At.ts],i=t[a.a.At.ls],s=t[a.a.At.ht],r=t[a.a.At.os],o=t[a.a.At.rt],c=Object(l.c)(t[a.a.At.us]),h=c;let d;return d=t[a.a.At.ps]===a.a.Ct?null:Object(l.c)(t[a.a.At.ps]),u(e,n,i,s,r,o,h,c,null,d,t[a.a.At.URL],t[a.a.At.bs],t[a.a.At.fs],t[a.a.At.xs],t[a.a.At.js],t[a.a.At.zs],t[a.a.At.gs],t[a.a.At.ks]||!1)}function d(t){return u(t.id,t.type,t.viewed,t.title,t.image,t.description,Object(l.c)(t.created),Object(l.c)(t.updated),t.categories,Object(l.c)(t.expires_at),t.url,t.domain,t.aspect_ratio,t.extras,!1,!1)}function b(t){return u(t[a.a.hs.ns],t[a.a.hs.ts],t[a.a.hs.ls],t[a.a.hs.ht],t[a.a.hs.os],t[a.a.hs.rt],Object(l.d)(t[a.a.hs.cs]),Object(l.d)(t[a.a.hs.us]),t[a.a.hs.ds],Object(l.d)(t[a.a.hs.ps]),t[a.a.hs.URL],t[a.a.hs.bs],t[a.a.hs.fs],t[a.a.hs.xs],t[a.a.hs.js],t[a.a.hs.zs],t[a.a.hs.gs],t[a.a.hs.ks]||!1)||void 0}},3194:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var a=n(2766),i=n(2885);function s(t,e,n){const s=document.createElement("button");s.setAttribute("aria-label",t),s.setAttribute("tabindex","0"),s.setAttribute("role","button"),Object(a.c)(s,"touchstart",(()=>{})),s.className="ab-close-button";const r=Object(a.e)("0 0 15 15","M15 1.5L13.5 0l-6 6-6-6L0 1.5l6 6-6 6L1.5 15l6-6 6 6 1.5-1.5-6-6 6-6z",e);return s.appendChild(r),s.addEventListener("keydown",(t=>{t.keyCode!==i.a.fo&&t.keyCode!==i.a.co||(n(),t.stopPropagation())})),s.onclick=t=>{n(),t.stopPropagation()},s}},3195:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var a=n(2641);function i(t,e,n){const i=t||document.querySelector("head"),s=`ab-${e}-css-definitions-${"4.6.2".replace(/\./g,"-")}`,r=i.ownerDocument||document;if(null==r.getElementById(s)){const t=r.createElement("style");t.innerHTML=n,t.id=s;const e=a.b.nn(a.a.ao);null!=e&&t.setAttribute("nonce",e),i.appendChild(t)}}},3196:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var a=n(2641);function i(){if(a.b.nn(a.a.vo))return;const t="https://use.fontawesome.com/7f85a56ba4.css";if(null===document.querySelector('link[rel=stylesheet][href="'+t+'"]')){const e=document.createElement("link");e.setAttribute("rel","stylesheet"),e.setAttribute("href",t),document.getElementsByTagName("head")[0].appendChild(e)}}},3197:function(t,e,n){"use strict";n.r(e),n.d(e,"changeUser",(function(){return l}));var a=n(2641),i=n(2940),s=n(2642),r=n(3187),o=n(2707);function l(t,e){return!!a.b.rr()&&(null==t||0===t.length||t!=t?(s.a.D.error("changeUser requires a non-empty userId."),!1):Object(i.b)(t)>r.a.ee?(s.a.D.error(`Rejected user id "${t}" because it is longer than ${r.a.ee} bytes.`),!1):!(null!=e&&!Object(o.g)(e,"set signature for new user","signature"))&&void a.b.mr().changeUser(t.toString(),a.b.re(),e))}},3198:function(t,e,n){"use strict";n.r(e),n.d(e,"logPurchase",(function(){return u}));var a=n(2641),i=n(2730),s=n(2642),r=n(2732),o=n(2771),l=n(2707),c=n(2731);function u(t,e,n,u,h){if(!a.b.rr())return!1;if(null==n&&(n="USD"),null==u&&(u=1),null==t||t.length<=0)return s.a.D.error(`logPurchase requires a non-empty productId, got "${t}", ignoring.`),!1;if(!Object(l.f)(t,"log purchase","the purchase name"))return!1;let d=parseFloat(e);if(isNaN(d))return s.a.D.error(`logPurchase requires a numeric price, got ${e}, ignoring.`),!1;d=d.toFixed(2);const b=parseInt(u);if(isNaN(b))return s.a.D.error(`logPurchase requires an integer quantity, got ${u}, ignoring.`),!1;if(b<1||b>i.b)return s.a.D.error(`logPurchase requires a quantity >1 and <${i.b}, got ${b}, ignoring.`),!1;if(n=n.toUpperCase(),-1===["AED","AFN","ALL","AMD","ANG","AOA","ARS","AUD","AWG","AZN","BAM","BBD","BDT","BGN","BHD","BIF","BMD","BND","BOB","BRL","BSD","BTC","BTN","BWP","BYR","BZD","CAD","CDF","CHF","CLF","CLP","CNY","COP","CRC","CUC","CUP","CVE","CZK","DJF","DKK","DOP","DZD","EEK","EGP","ERN","ETB","EUR","FJD","FKP","GBP","GEL","GGP","GHS","GIP","GMD","GNF","GTQ","GYD","HKD","HNL","HRK","HTG","HUF","IDR","ILS","IMP","INR","IQD","IRR","ISK","JEP","JMD","JOD","JPY","KES","KGS","KHR","KMF","KPW","KRW","KWD","KYD","KZT","LAK","LBP","LKR","LRD","LSL","LTL","LVL","LYD","MAD","MDL","MGA","MKD","MMK","MNT","MOP","MRO","MTL","MUR","MVR","MWK","MXN","MYR","MZN","NAD","NGN","NIO","NOK","NPR","NZD","OMR","PAB","PEN","PGK","PHP","PKR","PLN","PYG","QAR","RON","RSD","RUB","RWF","SAR","SBD","SCR","SDG","SEK","SGD","SHP","SLL","SOS","SRD","STD","SVC","SYP","SZL","THB","TJS","TMT","TND","TOP","TRY","TTD","TWD","TZS","UAH","UGX","USD","UYU","UZS","VEF","VND","VUV","WST","XAF","XAG","XAU","XCD","XDR","XOF","XPD","XPF","XPT","YER","ZAR","ZMK","ZMW","ZWL"].indexOf(n))return s.a.D.error(`logPurchase requires a valid currencyCode, got ${n}, ignoring.`),!1;const[p,f]=Object(l.e)(h,"logPurchase","purchaseProperties",`log purchase "${t}"`,"purchase");if(!p)return!1;if(a.b.ir().Dr(t))return s.a.D.info(`Purchase "${t}" is blocklisted, ignoring.`),!1;const g=c.a.G(s.a.A.Pr,{pid:t,c:n,p:d,q:b,pr:f});if(g.S){s.a.D.info(`Logged ${b} purchase${b>1?"s":""} of "${t}" for ${n} ${d}.`);for(const e of g.ve)o.a.er().je(r.a.Rr,[t,h],e)}return g.S}},3199:function(t,e,n){"use strict";n.r(e),n.d(e,"requestImmediateDataFlush",(function(){return i}));var a=n(2641);function i(t){a.b.rr()&&a.b.mr().requestImmediateDataFlush(t)}},3200:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var a=n(2641),i=n(2642);function s(){if(a.b.rr())return a.b.nr().Fr(i.a.Ar.qr).S}},3201:function(t,e,n){"use strict";n.r(e),n.d(e,"showFeed",(function(){return b}));var a=n(2641),i=n(2957),s=n(3095),r=n(3202),o=n(3200),l=n(2963),c=n(2654),u=n(2944),h=n(3742),d=n(2642);function b(t,e,n){if(!a.b.rr())return;Object(h.a)();const b=(t,e)=>{if(null==e)return t;const n=[];for(let t=0;t<e.length;t++)n.push(e[t].toLowerCase());const a=[];for(let e=0;e<t.length;e++){const i=[];for(let n=0;n<t[e].categories.length;n++)i.push(t[e].categories[n].toLowerCase());Object(c.a)(i,n).length>0&&a.push(t[e])}return a},p=a.b.nn(a.a.tn)||a.b.nn(a.a.en)||!1;let f=!1;null==t&&(t=document.body,f=!0);let g=!1,m=null;null==e?(m=l.a.er().ai(),Object(i.g)(m,b(m.cards,n),m.lastUpdated,null,p),g=!0):m=new s.a(b(e,n),new Date);const v=Object(i.d)(m,p);if(g){(null==m.lastUpdated||(new Date).valueOf()-m.lastUpdated.valueOf()>s.a.ur)&&(d.a.D.info(`Cached feed was older than max TTL of ${s.a.ur} ms, requesting an update from the server.`),Object(i.e)(m,v));const t=(new Date).valueOf(),e=Object(r.a)((function(e){const a=v.querySelectorAll(".ab-refresh-button")[0];if(null!=a){let e=500;const n=parseInt(v.getAttribute(i.a));isNaN(n)?e-=(new Date).valueOf()-t:e-=(new Date).valueOf()-n,setTimeout((function(){a.className=a.className.replace(/fa-spin/g,"")}),Math.max(e,0))}Object(i.g)(m,b(e.cards,n),e.lastUpdated,v,p)}));Object(i.f)(e,v)}const w=t=>{const e=t.querySelectorAll(".ab-feed");let n=null;for(let a=0;a<e.length;a++)e[a].parentNode===t&&(n=e[a]);null!=n?(Object(i.b)(n),n.parentNode.replaceChild(v,n)):t.appendChild(v),setTimeout((function(){v.className=v.className.replace("ab-hide","ab-show")}),0),f&&v.focus(),Object(o.a)(),Object(i.c)(m,v),Object(u.g)(m.cards,t)};var x;null!=t?w(t):window.onload=(x=window.onload,function(){"function"==typeof x&&x(),w(document.body)})}},3202:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var a=n(2641),i=n(2963);function s(t){if(a.b.rr())return i.a.er().Ws(t)}},3203:function(t,e,n){"use strict";n.r(e),n.d(e,"unregisterPush",(function(){return s}));var a=n(2641),i=n(3238);function s(t,e){if(a.b.rr())return i.default.aa().unsubscribe(t,e)}},3204:function(t,e,n){"use strict";n.r(e),n.d(e,"refreshFeatureFlags",(function(){return r}));var a=n(2641),i=n(2964);function s(t,e,n){if(a.b.rr())return i.a.er().refreshFeatureFlags(t,e,n)}function r(t,e){s(t,e)}e.default=s},3220:function(t,e,n){"use strict";n.d(e,"a",(function(){return g}));var a=n(2676),i=n(2642);class s{constructor(t){this.Jl=t}Hl(t){return null==this.Jl||this.Jl===t[0]}static fromJson(t){return new s(t?t.event_name:null)}ss(){return this.Jl}}var r=n(2654);class o{constructor(t,e,n,i){this.Xl=t,this.Vl=e,this.comparator=n,this.Yl=i,this.Vl===o.yh.Zl&&this.comparator!==o.Rh.Mh&&this.comparator!==o.Rh.Lh&&this.comparator!==o.Rh.Oh&&this.comparator!==o.Rh.Uh&&(this.Yl=Object(a.c)(this.Yl))}Hl(t){let e=null;switch(null!=t&&(e=t[this.Xl]),this.comparator){case o.Rh.Qh:return null!=e&&e.valueOf()===this.Yl.valueOf();case o.Rh.Xh:return null==e||e.valueOf()!==this.Yl.valueOf();case o.Rh.Bh:return typeof e==typeof this.Yl&&e>this.Yl;case o.Rh.Mh:return this.Vl===o.yh.Zl?null!=e&&Object(r.c)(e)&&Object(a.e)(e)<=this.Yl:typeof e==typeof this.Yl&&e>=this.Yl;case o.Rh.kh:return typeof e==typeof this.Yl&&e<this.Yl;case o.Rh.Lh:return this.Vl===o.yh.Zl?null!=e&&Object(r.c)(e)&&Object(a.e)(e)>=this.Yl:typeof e==typeof this.Yl&&e<=this.Yl;case o.Rh.Jh:return null!=e&&"string"==typeof e&&typeof e==typeof this.Yl&&null!=e.match(this.Yl);case o.Rh.Vh:return null!=e;case o.Rh.qh:return null==e;case o.Rh.Oh:return null!=e&&Object(r.c)(e)&&Object(a.f)(e)<this.Yl;case o.Rh.Uh:return null!=e&&Object(r.c)(e)&&Object(a.f)(e)>this.Yl;case o.Rh.Kh:return null==e||typeof e!=typeof this.Yl||"string"!=typeof e||null==e.match(this.Yl)}return!1}static fromJson(t){return new o(t.property_key,t.property_type,t.comparator,t.property_value)}ss(){let t=this.Yl;return Object(r.c)(this.Yl)&&(t=Object(a.a)(t.valueOf())),{k:this.Xl,t:this.Vl,c:this.comparator,v:t}}static jn(t){return new o(t.k,t.t,t.c,t.v)}}o.Rh={Qh:1,Xh:2,Bh:3,Mh:4,kh:5,Lh:6,Jh:10,Vh:11,qh:12,Oh:15,Uh:16,Kh:17},o.yh={Ph:"boolean",Wh:"number",Yh:"string",Zl:"date"};class l{constructor(t){this.filters=t}Hl(t){let e=!0;for(let n=0;n<this.filters.length;n++){const a=this.filters[n];let i=!1;for(let e=0;e<a.length;e++)if(a[e].Hl(t)){i=!0;break}if(!i){e=!1;break}}return e}static fromJson(t){if(null==t||!Object(r.b)(t))return null;const e=[];for(let n=0;n<t.length;n++){const a=[],i=t[n];for(let t=0;t<i.length;t++)a.push(o.fromJson(i[t]));e.push(a)}return new l(e)}ss(){const t=[];for(let e=0;e<this.filters.length;e++){const n=this.filters[e],a=[];for(let t=0;t<n.length;t++)a.push(n[t].ss());t.push(a)}return t}static jn(t){const e=[];for(let n=0;n<t.length;n++){const a=[],i=t[n];for(let t=0;t<i.length;t++)a.push(o.jn(i[t]));e.push(a)}return new l(e)}}class c{constructor(t,e){this.Jl=t,this.Ql=e}Hl(t){if(null==this.Jl||null==this.Ql)return!1;const e=t[0],n=t[1];return e===this.Jl&&this.Ql.Hl(n)}static fromJson(t){return new c(t?t.event_name:null,t?l.fromJson(t.property_filters):null)}ss(){return{e:this.Jl,pf:this.Ql.ss()}}}class u{constructor(t,e){this.fu=t,this.du=e}Hl(t){if(null==this.fu)return!1;const e=f.gu(t[0],this.fu);if(!e)return!1;let n=null==this.du||0===this.du.length;if(null!=this.du)for(let e=0;e<this.du.length;e++)if(this.du[e]===t[1]){n=!0;break}return e&&n}static fromJson(t){return new u(t?t.id:null,t?t.buttons:null)}ss(){return this.fu}}class h{constructor(t){this.productId=t}Hl(t){return null==this.productId||t[0]===this.productId}static fromJson(t){return new h(t?t.product_id:null)}ss(){return this.productId}}class d{constructor(t,e){this.productId=t,this.Ql=e}Hl(t){if(null==this.productId||null==this.Ql)return!1;const e=t[0],n=t[1];return e===this.productId&&this.Ql.Hl(n)}static fromJson(t){return new d(t?t.product_id:null,t?l.fromJson(t.property_filters):null)}ss(){return{id:this.productId,pf:this.Ql.ss()}}}class b{constructor(t){this.fu=t}Hl(t){return null==this.fu||f.gu(t[0],this.fu)}static fromJson(t){return new b(t?t.campaign_id:null)}ss(){return this.fu}}var p=n(2732);class f{constructor(t,e){this.type=t,this.data=e}ec(t,e){return f.tc[this.type]===t&&(null==this.data||this.data.Hl(e))}static gu(t,e){let n=null;try{n=window.atob(t)}catch(e){return i.a.D.info("Failed to unencode analytics id "+t+": "+e.message),!1}return e===n.split("_")[0]}static fromJson(t){const e=t.type;let n;switch(e){case f.rc.OPEN:n=null;break;case f.rc.Rr:n=h.fromJson(t.data);break;case f.rc.ac:n=d.fromJson(t.data);break;case f.rc.vr:n=b.fromJson(t.data);break;case f.rc.be:n=s.fromJson(t.data);break;case f.rc.sc:n=c.fromJson(t.data);break;case f.rc.Br:n=u.fromJson(t.data);break;case f.rc.ks:n=null}return new f(e,n)}ss(){return{t:this.type,d:this.data?this.data.ss():null}}static jn(t){let e,n;switch(t.t){case f.rc.OPEN:e=null;break;case f.rc.Rr:e=new h(t.d);break;case f.rc.ac:n=t.d||{},e=new d(n.id,l.jn(n.pf||[]));break;case f.rc.vr:e=new b(t.d);break;case f.rc.be:e=new s(t.d);break;case f.rc.sc:n=t.d||{},e=new c(n.e,l.jn(n.pf||[]));break;case f.rc.Br:e=new u(t.d);break;case f.rc.ks:e=null}return new f(t.t,e)}}f.rc={OPEN:"open",Rr:"purchase",ac:"purchase_property",vr:"push_click",be:"custom_event",sc:"custom_event_property",Br:"iam_click",ks:"test"},f.tc={},f.tc[f.rc.OPEN]=p.a.OPEN,f.tc[f.rc.Rr]=p.a.Rr,f.tc[f.rc.ac]=p.a.Rr,f.tc[f.rc.vr]=p.a.vr,f.tc[f.rc.be]=p.a.be,f.tc[f.rc.sc]=p.a.be,f.tc[f.rc.Br]=p.a.Br,f.tc[f.rc.ks]=p.a.ks;class g{constructor(t,e,n,a,i,s,r,o,l,c,u,h){this.id=t,this.$h=e||[],void 0===n&&(n=null),this.startTime=n,void 0===a&&(a=null),this.endTime=a,this.priority=i||0,this.type=s,this.Zh=o||0,null==c&&(c=1e3*(this.Zh+30)),this.xi=c,this.data=r,null==l&&(l=g.pu),this.Tu=l,this.Du=u,this.Pu=h||null}yu(t){return null==this.Pu||this.Tu!==g.pu&&t-this.Pu>=1e3*this.Tu}ju(t){this.Pu=t}wu(t){const e=t+1e3*this.Zh;return Math.max(e-(new Date).valueOf(),0)}Eu(t){const e=(new Date).valueOf()-t,n=null==t||isNaN(e)||null==this.xi||e<this.xi;return n||i.a.D.info(`Trigger action ${this.type} is no longer eligible for display - fired ${e}ms ago and has a timeout of ${this.xi}ms.`),!n}static fromJson(t){const e=t.id,n=[];for(let e=0;e<t.trigger_condition.length;e++)n.push(f.fromJson(t.trigger_condition[e]));const i=Object(a.c)(t.start_time),s=Object(a.c)(t.end_time),o=t.priority,l=t.type,c=t.delay,u=t.re_eligibility,h=t.timeout,d=t.data,b=t.min_seconds_since_last_trigger;return Object(r.g)(g.Fi,l,"Could not construct Trigger from server data","Trigger.Types")?new g(e,n,i,s,o,l,d,c,u,h,b):null}ss(){const t=[];for(let e=0;e<this.$h.length;e++)t.push(this.$h[e].ss());return{i:this.id,c:t,s:this.startTime,e:this.endTime,p:this.priority,t:this.type,da:this.data,d:this.Zh,r:this.Tu,tm:this.xi,ss:this.Du,ld:this.Pu}}static jn(t){const e=[];for(let n=0;n<t.c.length;n++)e.push(f.jn(t.c[n]));return new g(t.i,e,Object(a.d)(t.s),Object(a.d)(t.e),t.p,t.t,t.da,t.d,t.r,t.tm,t.ss,t.ld)}}g.pu=-1,g.Fi={Ei:"inapp",Nu:"templated_iam"}},3238:function(t,e,n){"use strict";n.r(e);var a=n(2641),i=n(2654),s=n(3188),r=n(2642),o=n(2658),l=n(3187),c=n(2765),u=n(2812);class h{constructor(t,e,n,a,i,s,r,o,l,c){this.Sr=t,this._r=e,this.Ur=n,this.Wr=a+"/safari/"+e,this.Nr=i||"/service-worker.js",this.Ir=s,this.gt=r,this.Vr=o||!1,this.Or=l||!1,this.h=c,this.Mr=u.a.Yr(),this.Gr=u.a.Hr()}Jr(){return this.Or}Kr(t,e,n,a,i){t.unsubscribe().then((t=>{t?this.Lr(e,n,a,i):(r.a.D.error("Failed to unsubscribe device from push."),"function"==typeof i&&i(!1))})).catch((t=>{r.a.D.error("Push unsubscription error: "+t),"function"==typeof i&&i(!1)}))}Qr(t,e,n){const a=(t=>{if("string"==typeof t)return t;if(0!==t.endpoint.indexOf("https://android.googleapis.com/gcm/send"))return t.endpoint;let e=t.endpoint;return t.Xr&&-1===t.endpoint.indexOf(t.Xr)&&(e=t.endpoint+"/"+t.Xr),e})(t);let i=null,s=null;if(null!=t.getKey)try{i=btoa(String.fromCharCode.apply(null,new Uint8Array(t.getKey("p256dh")))),s=btoa(String.fromCharCode.apply(null,new Uint8Array(t.getKey("auth"))))}catch(t){if("invalid arguments"!==t.message)throw t}const r=(t=>{let e;return t.options&&(e=t.options.applicationServerKey)&&e.byteLength&&e.byteLength>0?btoa(String.fromCharCode.apply(null,new Uint8Array(e))).replace(/\+/g,"-").replace(/\//g,"_"):null})(t);this.Sr.Zr(a,n,i,s,r),a&&"function"==typeof e&&e(a,i,s)}hn(){this.Sr.fn(!0)}dn(t,e){this.Sr.fn(!1),r.a.D.info(t),"function"==typeof e&&e(!1)}pn(t,e,n,a){if("default"===e.permission)try{window.safari.pushNotification.requestPermission(this.Wr,t,{api_key:this._r,device_id:this.Ur.te().id},(e=>{"granted"===e.permission&&this.Sr.setPushNotificationSubscriptionType(l.a.NotificationSubscriptionTypes.OPTED_IN),this.pn(t,e,n,a)}))}catch(t){this.dn("Could not request permission for push: "+t,a)}else"denied"===e.permission?this.dn("The user has blocked notifications from this site, or Safari push is not configured in the Braze dashboard.",a):"granted"===e.permission&&(r.a.D.info("Device successfully subscribed to push."),this.Qr(e.deviceToken,n,new Date))}bn(t,e,n){const a=a=>{switch(a){case"granted":return void("function"==typeof t&&t());case"default":return void("function"==typeof e&&e());case"denied":return void("function"==typeof n&&n());default:r.a.D.error("Received unexpected permission result "+a)}};let i=!1;const s=window.Notification.requestPermission((t=>{i&&a(t)}));s?s.then((t=>{a(t)})):i=!0}Lr(t,e,n,a){const i={userVisibleOnly:!0};null!=e&&(i.applicationServerKey=e),t.pushManager.subscribe(i).then((t=>{r.a.D.info("Device successfully subscribed to push."),this.Qr(t,n,new Date)})).catch((t=>{u.a.isPushBlocked()?(r.a.D.info("Permission for push notifications was denied."),"function"==typeof a&&a(!1)):r.a.D.error("Push subscription failed: "+t)}))}gn(){return this.Vr?navigator.serviceWorker.getRegistration():navigator.serviceWorker.register(this.Nr).then((()=>navigator.serviceWorker.ready.then((t=>(t&&"function"==typeof t.update&&t.update().catch((t=>{r.a.D.info("ServiceWorker update failed: "+t)})),t)))))}wn(t){this.Vr||(t.unregister(),r.a.D.info("Service worker successfully unregistered."))}subscribe(t,e){if(u.a.isPushSupported()){if(this.Mr){if(!this.Vr&&null!=window.location){let t=this.Nr;-1===t.indexOf(window.location.host)&&(t=window.location.host+t),-1===t.indexOf(window.location.protocol)&&(t=window.location.protocol+"//"+t);const e=t.substr(0,t.lastIndexOf("/")+1);if(0!==c.b.yn().indexOf(e))return void r.a.D.error("Cannot subscribe to push from a path higher than the service worker location (tried to subscribe from "+window.location.pathname+" but service worker is at "+t+")")}if(u.a.isPushBlocked())return void this.dn("Notifications from this site are blocked. This may be a temporary embargo or a permanent denial.",e);if(this.gt&&!this.gt.vn()&&0===this.gt.Zs())return r.a.D.info("Waiting for VAPID key from server config before subscribing to push."),void this.gt.kn((()=>{this.subscribe(t,e)}));const n=()=>{r.a.D.info("Permission for push notifications was denied."),"function"==typeof e&&e(!1)},a=()=>{let t="Permission for push notifications was ignored.";u.a.isPushBlocked()&&(t+=" The browser has automatically blocked further permission requests for a period (probably 1 week)."),r.a.D.info(t),"function"==typeof e&&e(!0)},h=u.a.isPushPermissionGranted(),d=()=>{h||this.Sr.setPushNotificationSubscriptionType(l.a.NotificationSubscriptionTypes.OPTED_IN),this.gn().then((n=>{if(null==n)return r.a.D.error("No service worker registration. Set the `manageServiceWorkerExternally` initialization option to false or ensure that your service worker is registered before calling registerPush."),void("function"==typeof e&&e());n.pushManager.getSubscription().then((a=>{let l=null;if(this.gt&&null!=this.gt.vn()&&(l=r.a.Dn.Pn(this.gt.vn())),a){let c=null,u=null;const h=this.h.I(o.a.q.Sn);if(h&&!Object(i.b)(h)){let t;try{t=s.a.jn(h)._n}catch(e){t=null}null==t||isNaN(t.getTime())||0===t.getTime()||(c=t,u=new Date(c),u.setMonth(c.getMonth()+6))}null!=l&&a.options&&a.options.applicationServerKey&&a.options.applicationServerKey.byteLength&&a.options.applicationServerKey.byteLength>0&&!Object(i.d)(l,new Uint8Array(a.options.applicationServerKey))?(a.options.applicationServerKey.byteLength>12?r.a.D.info("Device was already subscribed to push using a different VAPID provider, creating new subscription."):r.a.D.info("Attempting to upgrade a gcm_sender_id-based push registration to VAPID - depending on the browser this may or may not result in the same gcm_sender_id-based subscription."),this.Kr(a,n,l,t,e)):a.expirationTime&&new Date(a.expirationTime)<=(new Date).valueOf()?(r.a.D.info("Push subscription is expired, creating new subscription."),this.Kr(a,n,l,t,e)):h&&Object(i.b)(h)?this.Kr(a,n,l,t,e):null==u?(r.a.D.info("No push subscription creation date found, creating new subscription."),this.Kr(a,n,l,t,e)):u<=(new Date).valueOf()?(r.a.D.info("Push subscription older than 6 months, creating new subscription."),this.Kr(a,n,l,t,e)):(r.a.D.info("Device already subscribed to push, sending existing subscription to backend."),this.Qr(a,t,c))}else this.Lr(n,l,t,e)})).catch((t=>{r.a.D.error("Error checking current push subscriptions: "+t)}))})).catch((t=>{r.a.D.error("ServiceWorker registration failed: "+t)}))};this.bn(d,a,n)}else if(this.Gr){if(null==this.Ir||""===this.Ir)return void r.a.D.error("You must supply the safariWebsitePushId initialization option in order to use registerPush on Safari");const n=window.safari.pushNotification.permission(this.Ir);this.pn(this.Ir,n,t,e)}}else r.a.D.info(this.An)}unsubscribe(t,e){u.a.isPushSupported()?this.Mr?navigator.serviceWorker.getRegistration().then((n=>{n?n.pushManager.getSubscription().then((a=>{a&&(this.hn(),a.unsubscribe().then((a=>{a?(r.a.D.info("Device successfully unsubscribed from push."),"function"==typeof t&&t()):(r.a.D.error("Failed to unsubscribe device from push."),"function"==typeof e&&e()),this.wn(n)})).catch((t=>{r.a.D.error("Push unsubscription error: "+t),"function"==typeof e&&e()})))})).catch((t=>{r.a.D.error("Error unsubscribing from push: "+t),"function"==typeof e&&e()})):(r.a.D.info("Device already unsubscribed from push."),"function"==typeof t&&t())})):this.Gr&&(this.hn(),r.a.D.info("Device unsubscribed from push."),"function"==typeof t&&t()):r.a.D.info(this.An)}}h.An="Push notifications are not supported in this browser.";const d={t:!1,pushManager:null,aa:()=>(d.o(),d.pushManager||(d.pushManager=new h(a.b.gr(),a.b.ea(),a.b.ce(),a.b.Ks(),a.b.nn(a.a.na),a.b.nn(a.a.ra),a.b.ir(),a.b.nn(a.a.ta),a.b.nn(a.a.ia),a.b.l())),d.pushManager),o:()=>{d.t||(a.b.u(d),d.t=!0)},destroy:()=>{d.pushManager=null,d.t=!1}};e.default=d},3742:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var a=n(3195),i=n(3196);function s(){var t;Object(a.a)(t,"feed","body>.ab-feed{position:fixed;top:0;right:0;bottom:0;width:421px;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}body>.ab-feed .ab-feed-body{position:absolute;top:0;left:0;right:0;border:none;border-left:1px solid #d0d0d0;padding-top:70px;min-height:100%}body>.ab-feed .ab-initial-spinner{float:none}body>.ab-feed .ab-no-cards-message{position:absolute;width:100%;margin-left:-20px;top:40%}.ab-feed{-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 1px 7px 1px rgba(66,82,113,.15);-moz-box-shadow:0 1px 7px 1px rgba(66,82,113,.15);box-shadow:0 1px 7px 1px rgba(66,82,113,.15);width:402px;background-color:#eee;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif;font-size:13px;line-height:130%;letter-spacing:normal;overflow-y:auto;overflow-x:visible;z-index:9011;-webkit-overflow-scrolling:touch}.ab-feed :focus,.ab-feed:focus{outline:0}.ab-feed .ab-feed-body{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;border:1px solid #d0d0d0;border-top:none;padding:20px 20px 0 20px}.ab-feed.ab-effect-slide{-webkit-transform:translateX(450px);-moz-transform:translateX(450px);-ms-transform:translateX(450px);transform:translateX(450px);-webkit-transition:transform .5s ease-in-out;-moz-transition:transform .5s ease-in-out;-o-transition:transform .5s ease-in-out;transition:transform .5s ease-in-out}.ab-feed.ab-effect-slide.ab-show{-webkit-transform:translateX(0);-moz-transform:translateX(0);-ms-transform:translateX(0);transform:translateX(0)}.ab-feed.ab-effect-slide.ab-hide{-webkit-transform:translateX(450px);-moz-transform:translateX(450px);-ms-transform:translateX(450px);transform:translateX(450px)}.ab-feed .ab-card{position:relative;-webkit-box-shadow:0 2px 3px 0 rgba(178,178,178,.5);-moz-box-shadow:0 2px 3px 0 rgba(178,178,178,.5);box-shadow:0 2px 3px 0 rgba(178,178,178,.5);-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;width:100%;border:1px solid #d0d0d0;margin-bottom:20px;overflow:hidden;background-color:#fff;-webkit-transition:height .4s ease-in-out,margin .4s ease-in-out;-moz-transition:height .4s ease-in-out,margin .4s ease-in-out;-o-transition:height .4s ease-in-out,margin .4s ease-in-out;transition:height .4s ease-in-out,margin .4s ease-in-out}.ab-feed .ab-card .ab-pinned-indicator{position:absolute;right:0;top:0;margin-right:-1px;width:0;height:0;border-style:solid;border-width:0 24px 24px 0;border-color:transparent #1676d0 transparent transparent}.ab-feed .ab-card .ab-pinned-indicator .fa-star{position:absolute;right:-21px;top:2px;font-size:9px;color:#fff}.ab-feed .ab-card.ab-effect-card.ab-hide{-webkit-transition:all .5s ease-in-out;-moz-transition:all .5s ease-in-out;-o-transition:all .5s ease-in-out;transition:all .5s ease-in-out}.ab-feed .ab-card.ab-effect-card.ab-hide.ab-swiped-left{-webkit-transform:translateX(-450px);-moz-transform:translateX(-450px);-ms-transform:translateX(-450px);transform:translateX(-450px)}.ab-feed .ab-card.ab-effect-card.ab-hide.ab-swiped-right{-webkit-transform:translateX(450px);-moz-transform:translateX(450px);-ms-transform:translateX(450px);transform:translateX(450px)}.ab-feed .ab-card.ab-effect-card.ab-hide:not(.ab-swiped-left):not(.ab-swiped-right){opacity:0}.ab-feed .ab-card .ab-close-button{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;background-color:transparent;background-size:15px;border:none;width:15px;min-width:15px;height:15px;cursor:pointer;display:block;font-size:15px;line-height:0;padding-top:15px;padding-right:15px;padding-left:15px;padding-bottom:15px;position:absolute;right:0;top:0;z-index:9021;opacity:0;-webkit-transition:.5s;-moz-transition:.5s;-o-transition:.5s;transition:.5s}.ab-feed .ab-card .ab-close-button svg{-webkit-transition:.2s ease;-moz-transition:.2s ease;-o-transition:.2s ease;transition:.2s ease;fill:#9b9b9b;height:auto;width:100%}.ab-feed .ab-card .ab-close-button svg.ab-chevron{display:none}.ab-feed .ab-card .ab-close-button:active{background-color:transparent}.ab-feed .ab-card .ab-close-button:focus{background-color:transparent}.ab-feed .ab-card .ab-close-button:hover{background-color:transparent}.ab-feed .ab-card .ab-close-button:hover svg{fill-opacity:.8}.ab-feed .ab-card .ab-close-button:hover{opacity:1}.ab-feed .ab-card .ab-close-button:focus{opacity:1}.ab-feed .ab-card a{float:none;color:inherit;text-decoration:none}.ab-feed .ab-card a:hover{text-decoration:underline}.ab-feed .ab-card .ab-image-area{float:none;display:inline-block;vertical-align:top;line-height:0;overflow:hidden;width:100%;-webkit-box-sizing:initial;-moz-box-sizing:initial;box-sizing:initial}.ab-feed .ab-card .ab-image-area img{float:none;height:auto;width:100%}.ab-feed .ab-card.ab-banner .ab-card-body{display:none}.ab-feed .ab-card .ab-card-body{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:inline-block;width:100%;position:relative}.ab-feed .ab-card .ab-unread-indicator{position:absolute;bottom:0;margin-right:-1px;width:100%;height:5px;background-color:#1676d0}.ab-feed .ab-card .ab-unread-indicator.read{background-color:transparent}.ab-feed .ab-card .ab-title{float:none;letter-spacing:0;margin:0;font-weight:700;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif;display:block;overflow:hidden;word-wrap:break-word;text-overflow:ellipsis;font-size:18px;line-height:130%;padding:20px 25px 0 25px}.ab-feed .ab-card .ab-description{float:none;color:#545454;padding:15px 25px 20px 25px;word-wrap:break-word;white-space:pre-wrap}.ab-feed .ab-card .ab-description.ab-no-title{padding-top:20px}.ab-feed .ab-card .ab-url-area{float:none;color:#1676d0;margin-top:12px;font-family:'Helvetica Neue Light','Helvetica Neue',Helvetica,Arial,'Lucida Grande',sans-serif}.ab-feed .ab-card.ab-classic-card .ab-card-body{min-height:40px;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px}.ab-feed .ab-card.ab-classic-card.with-image .ab-card-body{min-height:100px;padding-left:72px}.ab-feed .ab-card.ab-classic-card.with-image .ab-image-area{width:60px;height:60px;padding:20px 0 25px 25px;position:absolute}.ab-feed .ab-card.ab-classic-card.with-image .ab-image-area img{-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;max-width:100%;max-height:100%;width:auto;height:auto}.ab-feed .ab-card.ab-classic-card.with-image .ab-title{background-color:transparent;font-size:16px}.ab-feed .ab-card.ab-classic-card.with-image .ab-description{padding-top:10px}.ab-feed .ab-card.ab-control-card{height:0;width:0;margin:0;border:0}.ab-feed .ab-feed-buttons-wrapper{float:none;position:relative;background-color:#282828;height:50px;-webkit-box-shadow:0 2px 3px 0 rgba(178,178,178,.5);-moz-box-shadow:0 2px 3px 0 rgba(178,178,178,.5);box-shadow:0 2px 3px 0 rgba(178,178,178,.5);z-index:1}.ab-feed .ab-feed-buttons-wrapper .ab-close-button,.ab-feed .ab-feed-buttons-wrapper .ab-refresh-button{float:none;cursor:pointer;color:#fff;font-size:18px;padding:16px;-webkit-transition:.2s;-moz-transition:.2s;-o-transition:.2s;transition:.2s}.ab-feed .ab-feed-buttons-wrapper .ab-close-button:hover,.ab-feed .ab-feed-buttons-wrapper .ab-refresh-button:hover{font-size:22px}.ab-feed .ab-feed-buttons-wrapper .ab-close-button{float:right}.ab-feed .ab-feed-buttons-wrapper .ab-close-button:hover{padding-top:12px;padding-right:14px}.ab-feed .ab-feed-buttons-wrapper .ab-refresh-button{padding-left:17px}.ab-feed .ab-feed-buttons-wrapper .ab-refresh-button:hover{padding-top:13px;padding-left:14px}.ab-feed .ab-no-cards-message{text-align:center;margin-bottom:20px}@media (max-width:600px){body>.ab-feed{width:100%}}"),Object(i.a)()}},3761:function(t,e,n){"use strict";n.r(e),n.d(e,"Card",(function(){return a.c})),n.d(e,"Banner",(function(){return a.a})),n.d(e,"CaptionedImage",(function(){return a.b})),n.d(e,"ClassicCard",(function(){return a.d})),n.d(e,"ControlCard",(function(){return a.e})),n.d(e,"logCardClick",(function(){return a.f})),n.d(e,"logCardDismissal",(function(){return a.g})),n.d(e,"logCardImpressions",(function(){return a.h})),n.d(e,"logContentCardImpressions",(function(){return a.j})),n.d(e,"logContentCardClick",(function(){return a.i})),n.d(e,"ContentCards",(function(){return y})),n.d(e,"getCachedContentCards",(function(){return S})),n.d(e,"hideContentCards",(function(){return k})),n.d(e,"logContentCardsDisplayed",(function(){return E})),n.d(e,"requestContentCardsRefresh",(function(){return x})),n.d(e,"showContentCards",(function(){return T})),n.d(e,"subscribeToContentCardsUpdates",(function(){return D})),n.d(e,"toggleContentCards",(function(){return _})),n.d(e,"addSdkMetadata",(function(){return P})),n.d(e,"changeUser",(function(){return M.changeUser})),n.d(e,"destroy",(function(){return R})),n.d(e,"BrazeSdkMetadata",(function(){return I})),n.d(e,"DeviceProperties",(function(){return z.a})),n.d(e,"disableSDK",(function(){return U})),n.d(e,"enableSDK",(function(){return B})),n.d(e,"getDeviceId",(function(){return q})),n.d(e,"getUser",(function(){return L.a})),n.d(e,"initialize",(function(){return F})),n.d(e,"isDisabled",(function(){return G})),n.d(e,"logCustomEvent",(function(){return $.logCustomEvent})),n.d(e,"logPurchase",(function(){return H.logPurchase})),n.d(e,"openSession",(function(){return J})),n.d(e,"removeAllSubscriptions",(function(){return W})),n.d(e,"removeSubscription",(function(){return Y.a})),n.d(e,"requestImmediateDataFlush",(function(){return Z.requestImmediateDataFlush})),n.d(e,"setLogger",(function(){return V})),n.d(e,"setSdkAuthenticationSignature",(function(){return tt})),n.d(e,"subscribeToSdkAuthenticationFailures",(function(){return et})),n.d(e,"toggleLogging",(function(){return nt})),n.d(e,"wipeData",(function(){return at})),n.d(e,"handleBrazeAction",(function(){return it.b})),n.d(e,"Feed",(function(){return st.a})),n.d(e,"getCachedFeed",(function(){return st.c})),n.d(e,"destroyFeed",(function(){return st.b})),n.d(e,"logFeedDisplayed",(function(){return st.d})),n.d(e,"requestFeedRefresh",(function(){return st.e})),n.d(e,"showFeed",(function(){return st.f})),n.d(e,"subscribeToFeedUpdates",(function(){return st.g})),n.d(e,"toggleFeed",(function(){return st.h})),n.d(e,"InAppMessage",(function(){return rt.d})),n.d(e,"InAppMessageButton",(function(){return rt.e})),n.d(e,"ControlMessage",(function(){return rt.a})),n.d(e,"FullScreenMessage",(function(){return rt.b})),n.d(e,"HtmlMessage",(function(){return rt.c})),n.d(e,"ModalMessage",(function(){return rt.f})),n.d(e,"SlideUpMessage",(function(){return rt.g})),n.d(e,"automaticallyShowInAppMessages",(function(){return rt.h})),n.d(e,"logInAppMessageButtonClick",(function(){return rt.i})),n.d(e,"logInAppMessageClick",(function(){return rt.j})),n.d(e,"logInAppMessageHtmlClick",(function(){return rt.k})),n.d(e,"logInAppMessageImpression",(function(){return rt.l})),n.d(e,"showInAppMessage",(function(){return rt.m})),n.d(e,"subscribeToInAppMessage",(function(){return rt.n})),n.d(e,"isPushBlocked",(function(){return lt})),n.d(e,"isPushPermissionGranted",(function(){return ct})),n.d(e,"isPushSupported",(function(){return ut})),n.d(e,"requestPushPermission",(function(){return ht.requestPushPermission})),n.d(e,"unregisterPush",(function(){return dt.unregisterPush})),n.d(e,"User",(function(){return bt.a})),n.d(e,"FeatureFlag",(function(){return pt.a})),n.d(e,"refreshFeatureFlags",(function(){return ft.refreshFeatureFlags})),n.d(e,"getFeatureFlag",(function(){return vt})),n.d(e,"subscribeToFeatureFlagsUpdates",(function(){return wt})),n.d(e,"getAllFeatureFlags",(function(){return xt})),n.d(e,"WindowUtils",(function(){return yt.b}));var a=n(2735),i=n(3092),s=n(3091),r=n(3089),o=n(2641),l=n(2943),c=n(2884),u=n(2676),h=n(2937),d=n(3193),b=n(2642),p=n(2658),f=n(2681),g=n(2731);class m extends c.a{constructor(t,e,n,a,i){super(),this.v=t,this.h=e,this.gt=n,this.wt=a,this.vt=i,this.yt=new f.a,o.b.jt(this.yt),this.Ut=0,this.kt=0,this.zt();const s=b.a.xt.Ft;new b.a.qt(s,b.a.D).Jt(s.$t.Mt,(t=>{this.Bt(t)})),this.Gt=null}Ht(){return this.Kt}Qt(t){this.Kt=t}Vt(){return this.Wt}Xt(t){this.Wt=t}zt(){const t=this.h.I(p.a.q.Yt)||[],e=[];for(let n=0;n<t.length;n++){const a=Object(d.c)(t[n]);null!=a&&e.push(a)}this.Zt=this.Cs(this.ws(e,!1)),this.Ut=this.h.I(p.a.q.vs)||this.Ut,this.kt=this.h.I(p.a.q.ys)||this.kt}Ns(t,e,n,a){let i;if(e){i=[];for(const t of this.Zt)t.test&&i.push(t)}else i=this.Zt.slice();for(let n=0;n<t.length;n++){const a=t[n];let s=null;for(let t=0;t<this.Zt.length;t++)if(a.id===this.Zt[t].id){s=this.Zt[t];break}if(e){const t=Object(d.a)(a);null!=s&&s.viewed&&(t.viewed=!0),null!=t&&i.push(t)}else if(null==s){const t=Object(d.a)(a);null!=t&&i.push(t)}else if(!s.ct(a))for(let t=0;t<i.length;t++)if(a.id===i[t].id){i.splice(t,1);break}}this.Zt=this.Cs(this.ws(i,e)),this.Ss(),this.Ut=n||0,this.h.B(p.a.q.vs,this.Ut),this.kt=a||0,this.h.B(p.a.q.ys,this.kt)}Rs(t){if(this.Ts()&&null!=t&&t.cards){this.h.B(p.a.q._s,o.b.Ds());const e=t.full_sync;e||this.zt(),this.Ns(t.cards,e,t.last_full_sync_at,t.last_card_updated_at),this.yt.St(this.Us(!0))}}Fs(t){this.h.B(p.a.q.As,t)}Ls(t,e,n){const a=()=>{this.Is(e,n,!0)},i=Object(l.b)(t);let s,r;if(this.Js(),!i["retry-after"])return void this.Fs(0);if(s=i["retry-after"],isNaN(s)&&!isNaN(Date.parse(s)))r=Date.parse(s)-(new Date).getTime(),r<0&&a();else{if(isNaN(parseFloat(s))){const t="Received unexpected value for retry-after header in /sync response";return g.a.G(b.a.A.qs,{e:t+": "+s}),void this.Fs(0)}r=1e3*s}this.Gt=setTimeout((()=>{a()}),r);let o=this.h.I(p.a.q.As);o&&!isNaN(parseInt(o))||(o=0),this.Fs(parseInt(o)+1)}Bt(t){if(!this.Ts())return;this.zt();const e=this.Zt.slice(),n=this.v.getUserId();for(let a=0;a<t.length;a++)if(n===t[a].userId||null==n&&null==t[a].userId){const n=t[a].card;let i=null;for(let t=0;t<this.Zt.length;t++)if(n.id===this.Zt[t].id){i=this.Zt[t];break}if(null==i){const t=Object(d.a)(n);null!=t&&e.push(t)}else if(!i.ct(n))for(let t=0;t<e.length;t++)if(n.id===e[t].id){e.splice(t,1);break}}this.Zt=this.Cs(this.ws(e,!1)),this.Ss(),this.yt.St(this.Us(!0))}ws(t,e){const n=this.h.I(p.a.q.$)||{},a=this.h.I(p.a.q.O)||{},i=this.h.I(p.a.q.K)||{},s={},r={},o={};for(let e=0;e<t.length;e++)n[t[e].id]&&(t[e].clicked=!0,s[t[e].id]=!0),a[t[e].id]&&(t[e].viewed=!0,r[t[e].id]=!0),i[t[e].id]&&(t[e].dismissed=!0,o[t[e].id]=!0);return e&&(this.h.B(p.a.q.$,s),this.h.B(p.a.q.O,r),this.h.B(p.a.q.K,o)),t}Cs(t){const e=[],n=new Date,a=this.h.I(p.a.q.K)||{};let i=!1;for(let s=0;s<t.length;s++){const r=t[s].url;!this.wt&&r&&Object(h.a)(r)?b.a.D.error(`Card with url ${r} will not be displayed because Javascript URLs are disabled. Use the "allowUserSuppliedJavascript" option for braze.initialize to enable this card.`):(null==t[s].expiresAt||t[s].expiresAt>=n)&&!t[s].dismissed?e.push(t[s]):(a[t[s].id]=!0,i=!0)}return i&&this.h.B(p.a.q.K,a),e}Ss(){const t=[];for(let e=0;e<this.Zt.length;e++)t.push(this.Zt[e].ss());this.h.B(p.a.q.Yt,t)}Js(){this.Gt&&(clearTimeout(this.Gt),this.Gt=null)}Is(t,e,n){if(n||(this.Js(),this.Fs(0)),!this.Ts())return void(this.Es||(this.Es=this.gt.Ms((()=>{this.Is(t,e)}))));const a=this.vt.Ps({},!0);this.h.I(p.a.q._s)!==o.b.Ds()&&this.$s(),a.last_full_sync_at=this.Ut,a.last_card_updated_at=this.kt;const i=this.vt.Bs(a,!0,!1,n);this.vt.Gs(a,(()=>{l.a.Hs({url:this.vt.Ks()+"/content_cards/sync",data:a,headers:i,S:(n,s)=>{this.vt.Os(a,n,i)?(this.vt.Qs(),this.Ls(s,t,e),this.Rs(n),"function"==typeof t&&t()):"function"==typeof e&&e()},error:t=>{this.vt.Vs(t,"retrieving content cards"),"function"==typeof e&&e()}})}))}Us(t){t||this.zt();const e=this.Cs(this.Zt);e.sort(((t,e)=>t.pinned&&!e.pinned?-1:e.pinned&&!t.pinned?1:t.updated>e.updated?-1:e.updated>t.updated?1:0));let n=Math.max(this.kt||0,this.Ut||0);return 0===n&&(n=void 0),this.h.I(p.a.q.ys)===this.kt&&void 0===n&&(n=this.kt),new y(e,Object(u.c)(n))}Ws(t){return this.yt.ut(t)}$s(){this.Ut=0,this.kt=0,this.h.Xs(p.a.q.vs),this.h.Xs(p.a.q.ys)}changeUser(t){t||(this.Zt=[],this.yt.St(new y(this.Zt.slice(),null)),this.h.Xs(p.a.q.Yt),this.h.Xs(p.a.q.$),this.h.Xs(p.a.q.O),this.h.Xs(p.a.q.K)),this.$s()}clearData(t){this.Ut=0,this.kt=0,this.Zt=[],this.yt.St(new y(this.Zt.slice(),null)),t&&(this.h.Xs(p.a.q.Yt),this.h.Xs(p.a.q.$),this.h.Xs(p.a.q.O),this.h.Xs(p.a.q.K),this.h.Xs(p.a.q.vs),this.h.Xs(p.a.q.ys))}Ts(){return!!this.gt.Ys()||(0!==this.gt.Zs()&&this.ti(),!1)}ti(){this.yt.St(new y([],(new Date).valueOf())),this.h.Xs(p.a.q.Yt)}}const v={t:!1,provider:null,er:()=>(v.o(),v.provider||(v.provider=new m(o.b.p(),o.b.l(),o.b.ir(),o.b.tr(),o.b.nr()),o.b.ar(v.provider)),v.provider),o:()=>{v.t||(o.b.u(v),v.t=!0)},destroy:()=>{v.provider=null,v.t=!1}};var w=v;function x(t,e){if(o.b.rr())return w.er().Is(t,e)}class y extends i.a{constructor(t,e){super(t,e)}getUnviewedCardCount(){return super.getUnreadCardCount()}logCardImpressions(t){Object(s.a)(t,!0)}logCardClick(t){Object(r.a)(t,!0)}sr(){x()}dr(){return!0}}function S(){if(o.b.rr())return w.er().Us(!1)}y.ur=6e4;var A=n(2957);function k(t){if(!o.b.rr())return;const e=document.querySelectorAll(".ab-feed");for(let n=0;n<e.length;n++)(null==t||null!=t&&e[n].parentNode===t)&&Object(A.b)(e[n])}var O=n(3190);function E(){if(o.b.rr())return Object(O.a)("logContentCardsDisplayed","method"),!0}function D(t){if(!o.b.rr())return;const e=w.er(),n=e.Ws(t);if(!e.Vt()){const t=o.b.mr().cr((()=>{e.Is()}));e.Xt(t)}return n}var N=n(2944),C=n(3742);function T(t,e){if(!o.b.rr())return;Object(C.a)();let n=!1;null==t&&(t=document.body,n=!0);const a=o.b.nn(o.a.tn)||o.b.nn(o.a.en)||!1;let i=w.er().Us(!1);"function"==typeof e&&Object(A.g)(i,e(i.cards.slice()),i.lastUpdated,null,a);const s=Object(A.d)(i,a),r=w.er();(null==i.lastUpdated||(new Date).valueOf()-i.lastUpdated.valueOf()>y.ur)&&(null==r.Ht()||(new Date).valueOf()-r.Ht()>y.ur)&&(b.a.D.info(`Cached content cards were older than max TTL of ${y.ur} ms, requesting an update from the server.`),Object(A.e)(i,s),r.Qt((new Date).valueOf()));const l=(new Date).valueOf(),c=D((function(t){const n=s.querySelectorAll(".ab-refresh-button")[0];if(null!=n){let t=500;const e=parseInt(s.getAttribute(A.a));isNaN(e)?t-=(new Date).valueOf()-l:t-=(new Date).valueOf()-e,setTimeout((function(){n.className=n.className.replace(/fa-spin/g,"")}),Math.max(t,0))}let r=t.cards;"function"==typeof e&&(r=e(r.slice())),Object(A.g)(i,r,t.lastUpdated,s,a)}));Object(A.f)(c,s);const u=function(t){const e=t.querySelectorAll(".ab-feed");let a=null;for(let n=0;n<e.length;n++)e[n].parentNode===t&&(a=e[n]);null!=a?(Object(A.b)(a),a.parentNode.replaceChild(s,a)):t.appendChild(s),setTimeout((function(){s.className=s.className.replace("ab-hide","ab-show")}),0),n&&s.focus(),Object(A.c)(i,s),Object(N.g)(i.cards,t)};var h;null!=t?u(t):window.onload=(h=window.onload,function(){"function"==typeof h&&h(),u(document.body)})}function _(t,e){o.b.rr()&&(document.querySelectorAll(".ab-feed").length>0?k():T(t,e))}var I={GOOGLE_TAG_MANAGER:"gg",MPARTICLE:"mp",SEGMENT:"sg",TEALIUM:"tl",MANUAL:"manu",NPM:"npm",CDN:"wcd",SHOPIFY:"shp"},j=n(2654);function P(t){if(o.b.rr()){if(!Object(j.b)(t))return b.a.D.error("Cannot set SDK metadata because metadata is not an array."),!1;for(const e of t)if(!Object(j.g)(I,e,"sdkMetadata contained an invalid value.","BrazeSdkMetadata"))return!1;return o.b.nr().addSdkMetadata(t),!0}}var M=n(3197);function R(){b.a.D.info("Destroying Braze instance"),o.b.destroy(!0)}var z=n(2883);function U(){null!=o.b.mr()&&o.b.mr().requestImmediateDataFlush();const t=new p.b.ne(null,!0);t.store(p.a.ae,"This-cookie-will-expire-in-"+t.ie());const e=b.a.xt.Ft;new b.a.qt(e,b.a.D).setItem(e.$t.oe,e.se,!0),o.b.destroy(!1),o.b.le(!0)}function B(){new p.b.ne(null,!0).remove(p.a.ae);const t=b.a.xt.Ft;new b.a.qt(t,b.a.D).br(t.$t.oe,t.se),o.b.destroy(!1),o.b.le(!1)}function q(t){o.b.rr()&&(null==t&&b.a.D.error("getDeviceId must be supplied with a callback. e.g., braze.getDeviceId(function(deviceId) {console.log('the device id is ' + deviceId)})"),"function"==typeof t&&t(o.b.ce().te().id))}var L=n(2945);function F(t,e){return o.b.initialize(t,e)}function G(){return!!new p.b.ne(null,!0).lr(p.a.ae)}var $=n(3094),H=n(3198),K=n(2732),X=n(2771);function J(){if(!o.b.rr())return;o.b.mr().openSession();const t=b.a.xt.Ft,e=new b.a.qt(t,b.a.D);e.hr(t.$t.jr,(function(n,a){const i=a.lastClick,s=a.trackingString;b.a.D.info(`Firing push click trigger from ${s} push click at ${i}`);const r=o.b.mr().kr(i,s),l=function(){X.a.er().je(K.a.vr,[s],r)};o.b.mr().zr(l,l),e.br(t.$t.jr,n)})),e.Jt(t.$t.$r,(function(t){o.b.mr().wr(t)}))}function W(){o.b.rr()&&o.b.removeAllSubscriptions()}var Y=n(3093),Z=n(3199);function V(t){b.a.D.setLogger(t)}var Q=n(2707);function tt(t){return!!o.b.rr()&&!(""===t||!Object(Q.g)(t,"set signature","signature",!1))&&(o.b.ii().setSdkAuthenticationSignature(t),!0)}function et(t){if(o.b.rr())return o.b.ii().subscribeToSdkAuthenticationFailures(t)}function nt(){b.a.D.toggleLogging()}function at(){if(null==o.b.l())throw new Error("Braze must be initialized before calling methods.");o.b.l().clearData();const t=Object(j.f)(b.a.xt);for(let e=0;e<t.length;e++){const n=t[e],a=b.a.xt[n];new b.a.qt(a,b.a.D).clearData()}if(o.b.rr())for(const t of o.b.re())t.clearData(!0)}var it=n(2889),st=n(3109),rt=n(3100),ot=n(2812);function lt(){if(o.b.rr())return ot.a.isPushBlocked()}function ct(){if(o.b.rr())return ot.a.isPushPermissionGranted()}function ut(){if(o.b.rr())return ot.a.isPushSupported()}var ht=n(3097),dt=n(3203),bt=n(2767),pt=n(2946),ft=n(3204),gt=n(3098),mt=n(2964);function vt(t){if(!o.b.rr())return;if(!o.b.ir()._e())return b.a.D.info("Feature flags are not enabled."),new pt.a(t);const e=mt.a.er().xe();return e[t]?Object(gt.a)(e[t]):new pt.a(t)}function wt(t){if(o.b.rr())return mt.a.er().Ws(t)}function xt(){if(!o.b.rr())return;let t=[];if(!o.b.ir()._e())return b.a.D.info("Feature flags are not enabled."),t;const e=mt.a.er().xe();for(let n in e)t.push(Object(gt.a)(e[n]));return t}var yt=n(2765)}}]);